(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5632],{73212:function(e,n,t){"use strict";t.d(n,{Z:function(){return un}});var i=t(26042),r=t(69396),o=t(828),a=t(85893),s=t(67294),l=t(11163),c=t(14174),d=t(97153),u=t(84946),f=t(91930),m=t(20709),v=t(21580),h=t(72600),p=t(53183),x=t(86010),_=t(56316),y=t(69095),j=t(57533),b=t(98336),g=t(12518),Z=t(14562),C=function(){var e=(0,Z.A)();return{providers:e.data||[],isProvidersReady:"fulfilled"===e.status}},w=t(52209);var S=function(){var e=(0,w.K)();return{currencies:(null===e||void 0===e?void 0:e.data)||[],isCurrenciesReady:"fulfilled"===e.status}};var T=function(e){var n=e.provider,t=e.assetCode,i=e.currencyCode,r=e.deviation,o=e.sign,a=e.unit,s=e.skip;return(0,v.XV)({provider:n,asset_code:t,currency_code:i,deviation:r,sign:o,unit:a},{skip:!n||!i||null===(0,y.He)(r)||s}).currentData||0};var P=function(e){var n=e.currencyCode;return(0,v.F0)({currency_code:n},{skip:"USD"===n}).currentData||1},M=t(33780),I=t.n(M),N=t(23585),k=function(e){var n=e.caption,t=e.label,i=e.labelPostfix,r=e.children;return(0,a.jsxs)("div",{className:I().groupContainer,children:[t&&(0,a.jsxs)("div",{className:I().formGroupLabel,children:[(0,a.jsx)(N.Z,{color:"primaryBrown",weight:"medium",children:t}),i]}),(0,a.jsx)("div",{className:I().formGroup,children:r}),n&&(0,a.jsx)("div",{className:I().caption,children:n})]})},F=t(99534),V=t(14924),z=t(34140),B=t(23830),D=t(25279),G=t(92234),E=(0,s.createContext)({}),L=t(24419),H=t(28628),R=t(1155),A=t(95979),O=t.n(A),q=function(e){var n,t=e.isEmphasized,o=e.isRequired,s=e.label,l=e.validationState,c=e.children,d=e.orientation,u=void 0===d?"horizontal":d,f=e.size,m=void 0===f?"base":f,v=(e.className,(0,D.w)(e)),h=(0,B.a)(e,v),p=h.radioGroupProps,_=h.labelProps,y=e.className,j={className:(0,x.Z)(y,O().tabs,(n={},(0,V.Z)(n,O().required,o),(0,V.Z)(n,O().horizontal,"horizontal"===u),(0,V.Z)(n,O()["size--".concat(m)],m),n))};return(0,a.jsxs)("div",(0,r.Z)((0,i.Z)({},(0,G.dG)(j,p)),{children:[(0,a.jsx)(z.T,{children:(0,a.jsx)("span",(0,r.Z)((0,i.Z)({className:O().label,"aria-hidden":"true"},_),{children:s}))}),(0,a.jsx)(E.Provider,{value:{isEmphasized:t,validationState:l,state:v},children:c})]}))};q.Tab=(0,s.forwardRef)((function(e,n){var t,o=e.isDisabled,l=e.children,c=e.autoFocus,d=(0,L.XI)({isDisabled:o}),u=d.hoverProps,f=d.isHovered,m=(0,s.useRef)(null),v=(0,R.rV)(n,m),h=(0,s.useContext)(E),p=h.isEmphasized,_=h.validationState,y=h.state,j=(0,B.x)((0,r.Z)((0,i.Z)({},e,h),{isDisabled:o}),y,m).inputProps;return(0,a.jsxs)("label",(0,r.Z)((0,i.Z)({},u),{ref:v,className:(0,x.Z)(O().tab,(t={},(0,V.Z)(t,O().hover,f),(0,V.Z)(t,O().quiet,!p),(0,V.Z)(t,O().invalid,"invalid"===_),t)),children:[(0,a.jsx)(H.tE,{focusRingClass:O().focusRing,autoFocus:c,children:(0,a.jsx)("input",(0,r.Z)((0,i.Z)({className:O().input},j),{ref:m}))}),(0,a.jsx)("span",{className:O().text,children:l})]}))}));var W=q,U=function(e){var n=e.tabs,t=e.inInput,o=(0,F.Z)(e,["tabs","inInput"]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(W,(0,r.Z)((0,i.Z)({},o),{size:t?"sm":void 0,"aria-label":"fieldSwitch",children:n.map((function(e){return(0,a.jsx)(W.Tab,{value:e.value,children:e.title},e.value)}))}))})},Y=function(e){var n=e.name,t=e.value,i=e.defaultValue;return"string"===typeof i?(0,a.jsx)("input",{type:"hidden",name:n,defaultValue:i}):(0,a.jsx)("input",{type:"hidden",name:n,value:t})},K=t(84647),$=t(872),Q=t(42004),J=t(30658),X=t(94215),ee=t(91473),ne=function(e){var n=e.onPress,t=e.isDisabled,i=(0,m.Z)().t,r=(0,K.dD)();return(0,a.jsx)(J.ZP,{icon:(0,a.jsx)(X.Z,{color:t?"grey600":"primary"}),iconSize:"M",variant:"primaryFlat",cursor:"pointer",weight:"medium",isDisabled:t,className:t?I().addMarginButton:"",onPress:function(){return null===n||void 0===n?void 0:n()},children:r?null:i("Add margin")})},te=[{title:"+",value:"+"},{title:"-",value:"-"}],ie=function(e){var n=e.sign,t=e.unit,i=e.onClose,r=e.onChangeSign,o=e.currencyCode,l=void 0===o?"":o,c=e.errorContent,d=(0,s.useState)(n||"+"),u=d[0],f=d[1],m=(0,s.useMemo)((function(){return[{text:"%",value:"%"},{text:l,value:l}]}),[l]),v=(0,a.jsx)(U,{inInput:!0,tabs:te,defaultValue:u,onChange:function(e){r&&r(e),f(e)}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:I().rateFields,children:[(0,a.jsx)(_.ZP.Item,{display:"none",name:"offer.exchange_price_sign",defaultValue:u,children:(0,a.jsx)(Y,{value:u})}),(0,a.jsx)(_.ZP.Item,{required:!0,showError:!1,maxLength:"%"===t?5:12,pattern:"^[0-9.]*$",name:"offer.exchange_price_deviation",children:(0,a.jsx)(Q.Z,{validateOnType:!0,prefix:v,inputMode:"numeric",className:I().deviation,"aria-label":"priceDeviation"})}),(0,a.jsx)(_.ZP.Item,{name:"offer.exchange_price_unit",defaultValue:t,children:(0,a.jsx)($.Z,{w:25,items:m})}),(0,a.jsx)(J.ZP,{isQuiet:!0,icon:(0,a.jsx)(ee.Z,{color:"grey600"}),cursor:"pointer",iconSize:"M",onPress:function(){return i()}})]}),c]})},re=function(e){var n,t,i,r=e.providerItems,o=e.currencieItems,l=e.provider,c=e.currencyCode,d=e.deviation,u=e.sign,f=e.unit,m=e.onChangeSign,v=e.onClose,h=e.onCurrencyChange,p=(0,K.BF)(),y=(0,_.Gc)().formState,j=(0,s.useState)(!!d),b=j[0],g=j[1],Z=null===y||void 0===y||null===(n=y.errors)||void 0===n||null===(t=n.offer)||void 0===t||null===(i=t.exchange_price_deviation)||void 0===i?void 0:i.message,C=Z?(0,a.jsx)(N.Z,{color:"error",preset:"b2-14r",className:I().errorMsg,children:Z}):null,w=(0,a.jsx)(ne,{onPress:function(){return g(!0)}}),S=(0,a.jsx)(ie,{sign:u,unit:f,currencyCode:c,errorContent:C,onChangeSign:m,onClose:function(){g(!1),v&&v()}});return(0,a.jsxs)("section",{className:(0,x.Z)(b?I().rateFieldsMargin:I().rateFieldsGroup,C&&I().errorContent),children:[(0,a.jsxs)("div",{className:I().rateFields,children:[(0,a.jsx)(_.ZP.Item,{required:!0,name:"offer.exchange_rate_provider",defaultValue:l,children:(0,a.jsx)($.Z,{w:"md"==p?40:56,items:r,className:I().rateProvider})}),(0,a.jsx)(_.ZP.Item,{required:!0,name:"offer.currency_code",defaultValue:c||"USD",children:(0,a.jsx)($.Z,{isDisabled:!l,w:25,items:o,onChange:h})}),b?(0,a.jsx)(ne,{isDisabled:!0}):null]}),(0,a.jsx)("div",{className:I().rateFields,children:b?S:w})]})},oe=function(e){var n,t=e.currencieItems,i=e.defaultValue,r=void 0===i?"":i,o=(0,m.Z)().t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.ZP.Item,{name:"offer.price",required:"".concat(o("This field is required")),maxLength:12,pattern:"^[0-9.]*$",defaultValue:r,children:(0,a.jsx)(Q.Z,{validateOnType:!0,inputMode:"numeric","aria-label":"rate"})}),(0,a.jsx)(_.ZP.Item,{required:!0,name:"offer.currency_code",defaultValue:(null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.value)||"USD",children:(0,a.jsx)($.Z,{w:25,items:t})})]})},ae=t(44916),se=t(4348),le=t(77189),ce=t(64582),de=t.n(ce),ue=function(e){var n=e.children,t=e.title,i=e.caption,r=e.defaultOpen,o=void 0!==r&&r,l=e.isOpen,c=(0,s.useState)(o),d=c[0],u=c[1],f="boolean"===typeof l?l:d;return(0,a.jsxs)("section",{className:de().container,children:[(0,a.jsxs)("div",{className:de().titleContainer,onClick:function(){u(!d)},children:[(0,a.jsx)(N.Z,{weight:"medium",color:"primaryBrown",className:de().title,children:t}),(0,a.jsx)(le.Z,{className:(0,x.Z)(de().icon,f&&de().open)})]}),i&&(0,a.jsx)("div",{className:(0,x.Z)(de().caption,(0,V.Z)({},de().unvisible,f)),children:i}),(0,a.jsx)("div",{className:(0,x.Z)(de().content,(0,V.Z)({},de().visible,f)),children:n})]})},fe=t(18485),me=function(e){var n=e.visible,t=e.currencyCode,i=e.currencyType,r=e.onClose,o=(0,m.Z)().t,s=(0,fe.U)(),l=(0,_.fq)().offer,c=(0,K.dD)(),d=(0,y.He)(null===l||void 0===l?void 0:l.stop_loss_value)||0,u=d?s.format(d):"",f=(null===l||void 0===l?void 0:l.balance)?s.format(l.balance):"",v=(null===l||void 0===l?void 0:l.first_trade_limit)?s.format(l.first_trade_limit):"",h="fixed_value"===(null===l||void 0===l?void 0:l.price_source);return(0,a.jsx)("div",{className:I().advancedAmount,style:{display:n?"block":"none"},children:(0,a.jsx)(ae.Z,{title:o("Advanced settings"),titlePostfix:(0,a.jsx)(N.Z,{size:"sm",color:"grey",children:o("Optional")}),variant:"gradient",onClose:r,children:(0,a.jsxs)("div",{className:I().advancedAmountContent,children:[(0,a.jsxs)(ue,{title:o("Total offer balance"),caption:f?"".concat(f," ").concat(t):o("Max amount available for trade. Offer will be disabled when reached."),children:[(0,a.jsx)(N.Z,{mb:1.5,color:"grey",children:o("Max amount available for trade. Offer will be disabled when reached.")}),(0,a.jsx)(_.ZP.Item,{name:"offer.balance",pattern:"^[0-9.]*$",maxLength:"stable"===i?12:14,defaultValue:"",children:(0,a.jsx)(Q.Z,{validateOnType:!0,w:c?100:80,inputMode:"numeric",postfix:t.toUpperCase(),"aria-label":"offerBalance"})})]}),(0,a.jsxs)(ue,{title:o("Stop-loss value"),caption:u?"".concat(u," ").concat(t):o("If applicable rate drops to defined value, your offer will be disabled."),children:[(0,a.jsx)(N.Z,{mb:1.5,color:"grey",children:o("If applicable rate drops to defined value, your offer will be disabled.")}),(0,a.jsx)(_.ZP.Item,{name:"offer.stop_loss_value",pattern:"^[0-9.]*$",maxLength:"stable"===i?12:14,isDisabled:h,defaultValue:u,children:(0,a.jsx)(Q.Z,{validateOnType:!0,w:c?100:80,inputMode:"numeric",postfix:t.toUpperCase(),"aria-label":"offerStopLossValue"})})]}),(0,a.jsxs)(ue,{title:"First-trade limit",caption:v?"".concat(v," ").concat(t):o("Max amount available for a trade with a user you have not dealt with before."),children:[(0,a.jsx)(N.Z,{mb:1.5,color:"grey",children:o("Max amount available for a trade with a user you have not dealt with before.")}),(0,a.jsx)(_.ZP.Item,{name:"offer.first_trade_limit",pattern:"^[0-9.]*$",maxLength:"stable"===i?12:14,defaultValue:"",children:(0,a.jsx)(Q.Z,{validateOnType:!0,w:c?100:80,inputMode:"numeric",postfix:t.toUpperCase(),"aria-label":"offerFirstTradeLimit"})})]}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(_.ZP.Item,{name:"offer.for_experienced_users",children:(0,a.jsx)(se.Z,{children:(0,a.jsxs)("div",{className:I().switchContent,children:[(0,a.jsx)(N.Z,{weight:"medium",color:"primaryBrown",children:o("Available to experienced users only")}),(0,a.jsx)(N.Z,{block:!0,color:"grey",children:o("Your offer will only be available to users who have traded on Hodl Hodl before.")})]})})})]})})})},ve=function(e){var n,t,i,r,o,l,c=e.currencyCode,d=e.currencyType,u=e.currencyTypeSwitch,f=e.caption,v=(0,m.Z)().t,h=(0,s.useState)(!1),p=h[0],x=h[1],y=(0,K.ac)("(max-width: 767px )"),j=(0,_.Gc)().formState,b=null===j||void 0===j||null===(n=j.errors)||void 0===n||null===(t=n.offer)||void 0===t||null===(i=t.min_amount)||void 0===i?void 0:i.message,g=null===j||void 0===j||null===(r=j.errors)||void 0===r||null===(o=r.offer)||void 0===o||null===(l=o.max_amount)||void 0===l?void 0:l.message,Z=b||g?(0,a.jsxs)(N.Z,{block:!0,color:"error",preset:"b2-14r",children:[b," ",g]}):null,C=(0,a.jsx)(J.ZP,{icon:(0,a.jsx)(X.Z,{color:p?"grey600":"primary"}),iconSize:"M",variant:"primaryFlat",cursor:"pointer",weight:"medium",isDisabled:p,onPress:function(){return x((function(e){return!e}))},children:v("Advanced settings")});return(0,a.jsxs)("div",{className:I().rangeAmount,children:[(0,a.jsxs)("div",{className:I().rangeAmountGroup,children:[(0,a.jsx)(_.ZP.Item,{required:"".concat(v("This field is required")),pattern:"^[0-9.]*$",maxLength:"stable"===d?12:14,name:"offer.min_amount",isWide:y,showError:!1,children:(0,a.jsx)(Q.Z,{validateOnType:!0,prefix:v("From"),inputMode:"numeric",w:y?void 0:48,"aria-label":"offerMinAmount"})}),y?null:"-",(0,a.jsx)(_.ZP.Item,{required:!0,name:"offer.max_amount",pattern:"^[0-9.]*$",maxLength:"stable"===d?12:14,showError:!1,children:(0,a.jsx)(Q.Z,{validateOnType:!0,w:y?void 0:56,prefix:v("To"),inputMode:"numeric",postfix:u,"aria-label":"offerMaxAmount"})}),y?null:C]}),Z,Z?f("error"):f(),y?C:null,(0,a.jsx)(me,{visible:p,currencyCode:c,currencyType:d,onClose:function(){return x((function(e){return!e}))}})]})},he=function(e){var n,t,i,r,o,l,c=e.currencyCode,d=e.currencyTypeSwitch,u=e.caption,f=e.currencyType,v=(0,m.Z)().t,h=(0,K.ac)("(max-width: 767px )"),p=(0,_.Gc)(),x=p.formState,y=p.watch,j=p.setValue,b=(0,s.useState)(!1),g=b[0],Z=b[1],C=null===x||void 0===x||null===(n=x.errors)||void 0===n||null===(t=n.offer)||void 0===t||null===(i=t.min_amount)||void 0===i?void 0:i.message,w=null===x||void 0===x||null===(r=x.errors)||void 0===r||null===(o=r.offer)||void 0===o||null===(l=o.max_amount)||void 0===l?void 0:l.message,S=C||w?(0,a.jsxs)(N.Z,{block:!0,items:"center",color:"error",preset:"b2-14r",children:[C," ",w]}):null,T=y("offer.min_amount");return(0,s.useEffect)((function(){j("offer.max_amount",T)}),[T]),(0,a.jsxs)("div",{className:I().amountContainer,children:[(0,a.jsxs)("div",{className:I().amountGroup,children:[(0,a.jsx)(_.ZP.Item,{name:"offer.min_amount",required:"".concat(v("This field is required")),pattern:"^[0-9.]*$",maxLength:"stable"===f?12:14,showError:!1,defaultValue:"",children:(0,a.jsx)(Q.Z,{validateOnType:!0,w:80,inputMode:"numeric",postfix:d,"aria-label":"currencyType"})}),(0,a.jsx)(_.ZP.Item,{required:!0,name:"offer.max_amount",display:"none",defaultValue:"0",children:(0,a.jsx)(Y,{})}),h&&(0,a.jsxs)("div",{children:[S," ",S?u("error"):u()]}),(0,a.jsx)(J.ZP,{icon:(0,a.jsx)(X.Z,{color:g?"grey600":"primary"}),iconSize:"M",variant:"primaryFlat",cursor:"pointer",weight:"medium",isDisabled:g,onPress:function(){return Z((function(e){return!e}))},children:v("Advanced settings")})]}),!h&&(0,a.jsxs)(a.Fragment,{children:[S," ",S?u("error"):u()]}),(0,a.jsx)(me,{visible:g,currencyCode:c,currencyType:f,onClose:function(){return Z((function(e){return!e}))}})]})},pe=t(29815),xe=t(88267),_e=function(e){var n=e.methods,t=void 0===n?[]:n,i=e.field,r=e.types,o=e.values,l=e.onClose,c=e.onChange,d=e.error,u=(0,K.ac)("(max-width: 767px )"),f=(0,m.Z)().t,v=(0,s.useState)((null===i||void 0===i?void 0:i.type)||""),h=v[0],p=v[1],x=(0,s.useState)((null===i||void 0===i?void 0:i.name)||""),_=x[0],j=x[1],b=(0,s.useMemo)((function(){return(0,y.TE)(t.filter((function(e){return e.type===h})).map((function(e){return e.name})))}),[h,t]).map((function(e){return{text:e,value:e}})).sort((function(e,n){return e.text.localeCompare(n.text)})),g=r.map((function(e){return{text:e,value:e}})),Z=t.find((function(e){return e.name===_&&e.type&&h})),C=(0,y.He)(null===Z||void 0===Z?void 0:Z.id),w=!((null===Z||void 0===Z?void 0:Z.id)===(null===i||void 0===i?void 0:i.id)||!C||!(null===o||void 0===o?void 0:o.includes(C))),S=h?"".concat(h," ").concat(_):f("Payment instruction");(0,s.useEffect)((function(){(null===Z||void 0===Z?void 0:Z.id)!==(null===i||void 0===i?void 0:i.id)&&c&&C&&!(null===o||void 0===o?void 0:o.includes(C))&&c(C)}),[h,_,o]);var T=w?(0,a.jsx)(N.Z,{color:"error",size:"xs",mt:1.5,children:f("Selected payment method has already been used in one of the instructions above. Create another offer\nif you want to use the same payment method with different payment details.")}):null;return(0,a.jsxs)("div",{className:I().paymentMethodItem,id:null===i||void 0===i?void 0:i.id,children:[(0,a.jsx)(ae.Z,{variant:"gradient",title:S,isInvalid:w||!!d,onClose:l,children:(0,a.jsxs)("div",{className:I().paymentBuyContent,children:[(0,a.jsx)($.Z,{value:h,placeholder:f("Select payment type"),w:u?"100":"1/2",items:g,isWide:u,onChange:p}),(0,a.jsx)($.Z,{isDisabled:!h,w:u?"100":"1/2",value:_,placeholder:f("Select payment method"),items:b,isWide:u,onChange:j})]})}),T,d?(0,a.jsx)(N.Z,{color:"error",size:"xs",mt:1.5,children:d}):null]})},ye={id:"",name:"",type:""},je=function(e){var n=e.types,t=e.paymentMethods,i=e.name,r=e.value,o=void 0===r?[]:r,l=e.defaultValue,c=void 0===l?[]:l,d=e.error,u=e.onChange,f=function(e){return e.length>0?e.map((function(e){return t.find((function(n){return String(e)===String(n.id)}))})).filter((function(e){return!!e})):null},v=(0,m.Z)().t,h=(0,s.useState)(f(c)||[]),p=h[0],x=h[1],_=p.map((function(e){return e.type})),j=n.filter((function(e){return!_.includes(e)})),b=t.filter((function(e){return j.includes(e.type)})).length>0,g=(0,s.useMemo)((function(){return p.map((function(e){return(0,y.He)(e.id)||0})).filter((function(e){return!!e}))}),[p]),Z=function(e,n){var i,r=null===t||void 0===t?void 0:t.find((function(n){return n.id===String(e)}));if(u&&r){var o=(0,pe.Z)(p);o[n]=r,u((0,y.TE)(null===(i=o)||void 0===i?void 0:i.map((function(e){return(0,y.He)(e.id)||0})).filter((function(e){return!!e}))))}};return(0,s.useEffect)((function(){var e=f(o);e&&x(e)}),[o]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.Z,{weight:"medium",mb:3,color:"primaryBrown",children:v("Your payment instructions")}),(0,a.jsxs)("div",{className:I().paymentPanel,children:[p.length>0?p.map((function(e,i){return(0,a.jsx)(_e,{field:e,values:o,types:n,methods:t,error:d,onChange:function(e){return Z(e,i)},onClose:function(){return function(e){if(u){var n=(0,y.TE)(o.filter((function(n){return String(n)!==e.id})));0===n.length&&x([]),u(n)}}(e)}},"".concat(e.id,"-").concat(i))})):(0,a.jsx)(_e,{types:n,methods:t,error:d,onChange:function(e){return Z(e,p.length)}}),b&&(0,a.jsx)(J.ZP,{isWide:!0,variant:"primaryOutline",size:12,icon:(0,a.jsx)(xe.Z,{}),iconSize:"M",onPress:function(){if(b&&u){var e=f(o);e&&x((0,pe.Z)(e).concat([ye]))}},children:v("Add new payment insctruction")}),(0,a.jsx)(Y,{name:i,value:g})]})]})},be=t(90650),ge=t(85905),Ze=t(44412),Ce=t(26207),we=t(44647),Se=t(93142),Te=t(28021),Pe=t(93349),Me=t.n(Pe),Ie=function(e){return null===e||void 0===e?void 0:e.map((function(e){return(0,y.He)(e.id)||0})).filter((function(e){return!!e}))},Ne=function(e,n){return e.map((function(e){return n.find((function(n){return String(n.id)===String(e)}))})).filter((function(e){return!!e}))},ke=function(e){var n,t,r=e.item,l=e.types,c=e.paymentMethods,d=e.onRemove,u=(0,m.Z)().t,f=(0,o.Z)((0,Te.BG)(),1)[0],v=(0,s.useMemo)((function(){var e,n;return{id:(null===r||void 0===r?void 0:r.id)||"",method:(null===r||void 0===r||null===(e=r.paymentMethod)||void 0===e?void 0:e.name)||"",type:(null===r||void 0===r||null===(n=r.paymentMethod)||void 0===n?void 0:n.type)||"",name:(null===r||void 0===r?void 0:r.name)||"",details:(null===r||void 0===r?void 0:r.details)||""}}),[r]),p=function(e){var n={payment_method_instruction:{name:e.name,details:e.details||"",payment_method_id:e.payment_method_id}};return f((0,i.Z)({id:null===v||void 0===v?void 0:v.id},n)).then((function(e){return(0,h.L)(e)}))},_=(0,a.jsxs)(ge.hg,{type:"modal",mobileType:"fullscreenTakeover",preventPressOutside:!1,isDismissable:!1,children:[(0,a.jsx)(J.ZP,{icon:(0,a.jsx)(Se.Z,{color:"primary"}),variant:"primaryFlat",weight:"medium",text:"sm",className:Me().editBtn,iconSize:"5",ml:1.5,cursor:"pointer",children:u("offers_create_payment_instructions_edit_btn")}),function(e){return(0,a.jsx)(ge.Vq,{mobileType:"fullscreenTakeover",children:(0,a.jsx)(Ze.V,{style:{maxWidth:"33.75rem"},children:(0,a.jsx)(Ce.Z,{types:l,methods:c,defaultValues:v,onSubmit:p,onClose:e})})})}]});return(0,a.jsx)(ae.Z,{variant:"gradient",title:r.name,titlePostfix:_,onClose:function(){return d(r.id)},children:(0,a.jsxs)("div",{className:Me().content,children:[(0,a.jsxs)("div",{className:Me().contentItem,children:[(0,a.jsx)(N.Z,{block:!0,size:"xs",color:"primary800",mb:1.5,children:u("offers_create_payment_instructions_type")}),(0,a.jsx)(N.Z,{block:!0,weight:"medium",color:"black",children:null===(n=r.paymentMethod)||void 0===n?void 0:n.type})]}),(0,a.jsxs)("div",{className:Me().contentItem,children:[(0,a.jsx)(N.Z,{block:!0,size:"xs",color:"primary800",mb:1.5,children:u("offers_create_payment_instructions_method")}),(0,a.jsx)(N.Z,{block:!0,color:"black",weight:"medium",children:null===(t=r.paymentMethod)||void 0===t?void 0:t.name})]}),(0,a.jsxs)("div",{className:(0,x.Z)(Me().contentItem,Me().details),children:[(0,a.jsx)(N.Z,{block:!0,size:"xs",color:"primary800",mb:1.5,children:u("offers_create_payment_instructions_details")}),(0,a.jsx)(N.Z,{block:!0,weight:"medium",color:"primaryBrown",className:Me().details,children:r.details})]})]})})},Fe=function(e){var n=e.paymentMethods,t=void 0===n?[]:n,l=e.paymentInstructions,c=void 0===l?[]:l,d=e.types,u=void 0===d?[]:d,f=e.name,v=e.defaultValue,p=void 0===v?[]:v,x=e.value,_=e.error,j=e.onChange,b=(0,m.Z)().t,g=(0,K.dD)(),Z=(0,s.useState)(Ne(p,c)),C=Z[0],w=Z[1],S=(0,o.Z)((0,Te.V2)(),1)[0],T=(0,s.useMemo)((function(){return C.map((function(e){return(0,y.He)(e.id)||0}))}),[C]),P=function(e){return S({payment_method_instruction:{name:e.name,details:e.details,payment_method_id:e.payment_method_id}}).then((function(e){return(0,h.L)(e)}))},M=(0,a.jsxs)(ge.hg,{type:"modal",mobileType:"fullscreenTakeover",preventPressOutside:!1,isDismissable:!1,children:[(0,a.jsx)(J.ZP,{isWide:!0,variant:"primaryOutline",size:12,icon:(0,a.jsx)(xe.Z,{}),iconSize:"M",children:b("Create new payment instruction")}),function(e){return(0,a.jsx)(ge.Vq,{mobileType:"fullscreenTakeover",children:(0,a.jsx)(Ze.V,{style:{maxWidth:g?"none":"33.75rem"},children:(0,a.jsx)(Ce.Z,{types:u,methods:t,onSubmit:P,onClose:e})})})}]}),I=c.map((function(e){return(0,r.Z)((0,i.Z)({},e),{paymentMethod:t.find((function(n){return n.id===e.payment_method_id}))})})).map((function(e){var n,t;return{text:(0,a.jsxs)(N.Z,{children:[e.name," ",(null===e||void 0===e?void 0:e.paymentMethod)?(0,a.jsx)(we.Z,{type:null===(n=e.paymentMethod)||void 0===n?void 0:n.type,name:null===(t=e.paymentMethod)||void 0===t?void 0:t.name},e.id):null]}),value:e.id}})),k=C.map((function(e){return e.id})),F=I.filter((function(e){return!k.includes(e.value)})),V=function(e){var n=C.filter((function(n){return n.id!=e}));j&&j((0,y.TE)(Ie(n)))};return(0,s.useEffect)((function(){"undefined"!==typeof x&&w(Ne(x,c))}),[x,c]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.Z,{weight:"medium",mb:3,color:"primaryBrown",children:b("Your payment instructions")}),(0,a.jsx)(be.Z,{flex:"col",gap:"6",mb:"6",children:C.length>0&&C.map((function(e){return(0,a.jsx)(ke,{item:e,types:u,paymentMethods:t,onRemove:V},e.id)}))}),(0,a.jsxs)("div",{children:[(0,a.jsx)($.Z,{mb:4,validationState:_?"invalid":void 0,error:_,placeholder:b("Select payment instruction"),items:F,value:"",defaultValue:"",onChange:function(e){return function(e){var n=c.find((function(n){return n.id===e})),t=C.find((function(e){return e.id===(null===n||void 0===n?void 0:n.id)}));j&&!t&&n&&j((0,y.TE)(Ie((0,pe.Z)(C).concat([n]))))}(e)}}),M,(0,a.jsx)(Y,{name:f,value:T})]})]})},Ve=t(22791);var ze=function(e){var n=e.status,t=void 0===n?"lightGreen":n,i=e.children;return(0,a.jsx)(N.Z,{preset:"b2-14m",children:(0,a.jsx)(Ve.Z,{status:t,variant:"solid",children:i})})};var Be=function(e){var n=e.min,t=e.max,i=e.price,r=e.type,o=e.currencyCode,s=e.currencyMultiplier,l=e.badgeStatus,c=(0,fe.U)({maximumFractionDigits:8}),d=function(e){var n=e.min,t=e.max,i=e.price,r=e.type,o=e.format,a=e.currencyCode,s=e.currencyMultiplier,l=function(e,n){return(0,y.tD)(["".concat(String(o((0,y._z)(e,2)||0))),"".concat(String(o((0,y._z)(n,2)||0)))])},c=function(e,n){var t=n?l(e*s,n*s):o(e*s);return 1!==s?"(".concat(t," USD)"):""};if(!i)return"";if(n&&t){if("btc"===r){var d=n*i,u=t*i;return"= ".concat(l(d,u)," ").concat(a," ").concat(c(d,u))}if("stable"===r)return"= ".concat(function(e,n){return(0,y.tD)(["".concat((0,y._z)(e,8)),"".concat((0,y._z)(n,8))])}(n/i,t/i)," BTC ").concat(c(n,t))}if(n){if("btc"===r){var f=n*i;return"= ".concat((0,y._z)(f,2)," ").concat(a," ").concat(c(f))}if("stable"===r){var m=n/i;return"= ".concat((0,y._z)(m)," BTC ").concat(c(n))}}return""}({min:n,max:t,type:r,price:i,format:function(e){return c.format(e)},currencyCode:o,currencyMultiplier:s});return d?(0,a.jsx)(ze,{status:l,children:d}):"stable"===r?(0,a.jsx)(ze,{status:l,children:"- BTC"}):"btc"===r?(0,a.jsxs)(ze,{status:l,children:["- ",o]}):null},De=function(e){var n=e.isBuy,t=e.isEdit,i=e.error,r=(0,m.Z)().t,o=(0,l.useRouter)(),s=r(n?"Create offer to buy BTC":"Create offer to sell BTC"),c=r(n?"Save offer to buy BTC":"Save offer to sell BTC"),d=i?(0,a.jsx)(N.Z,{color:"error",preset:"c-12r",mb:4,children:i}):null;return(0,a.jsxs)("div",{className:I().switchButtons,children:[(0,a.jsx)(be.Z,{mb:4,children:(0,a.jsx)(_.ZP.Item,{name:"offer.enabled",children:(0,a.jsx)(se.Z,{isSelected:!0,children:(0,a.jsxs)("div",{className:I().switchContent,children:[(0,a.jsx)(N.Z,{weight:"medium",color:"primaryBrown",children:r("Enable offer after creation")}),(0,a.jsx)(N.Z,{block:!0,color:"grey",children:r("Your offer will be active and available to other users. Disable to save as a\ndraft.")})]})})})}),(0,a.jsx)(be.Z,{mb:4,children:(0,a.jsx)(_.ZP.Item,{name:"offer.private",children:(0,a.jsx)(se.Z,{children:(0,a.jsxs)("div",{className:I().switchContent,children:[(0,a.jsx)(N.Z,{weight:"medium",color:"primaryBrown",children:r("Make offer private")}),(0,a.jsx)(N.Z,{block:!0,color:"grey",children:r("Your offer will only be accessible by the link and not displayed in the\npublic offer list.")})]})})})}),d,(0,a.jsxs)("div",{className:I().submitGroup,children:[(0,a.jsx)(_.ZP.Submit,{isWide:!0,weight:"medium",size:12,variant:"primary",children:t?c:s}),(0,a.jsx)(J.ZP,{isWide:!0,weight:"medium",size:12,variant:"primaryOutline",onPress:function(){return o.back()},children:r("Cancel changes")})]})]})},Ge=t(60386),Ee=t(94470),Le=t(10832),He=t.n(Le),Re=function(e){var n,t=e.elementType,i=void 0===t?"span":t,r=e.className,o=e.isIndeterminate,s=e.isSelected,l=e.isHovered,c=e.children;return(0,a.jsx)(i,{className:(0,x.Z)(He().checkmark,(n={},(0,V.Z)(n,He().indeterminate,o),(0,V.Z)(n,He().selected,s),(0,V.Z)(n,He().hovered,l),n),r),children:c})},Ae=t(67023),Oe=t.n(Ae),qe=function(e){var n=e.children,t=e.isIndeterminate,o=e.value,l=e.isSelected,c=e.className,d=(0,Ee.l)((0,r.Z)((0,i.Z)({},e),{isSelected:(0,y.Xq)(o)?o:l})),u=(0,s.useRef)(null),f=(0,Ge.O)(e,d,u).inputProps;return(0,a.jsxs)("label",{className:(0,x.Z)(Oe().checkbox,c),children:[(0,a.jsx)(Re,{elementType:"label",isIndeterminate:t,isSelected:d.isSelected,children:(0,a.jsx)("input",(0,r.Z)((0,i.Z)({className:Oe().input},f),{ref:u}))}),n]})},We=function(e){var n,t,i=e.onFullTime,r=e.isRoundClock,o=(0,m.Z)().t,s=(0,y.w6)(0,48).map((function(e){return{text:(0,y.bx)(30*e),value:"".concat((0,y.bx)(30*e))}})),l=null===(n=s[0])||void 0===n?void 0:n.value,c=null===(t=s[0])||void 0===t?void 0:t.value;return(0,a.jsxs)("div",{className:I().hoursField,children:[(0,a.jsx)(N.Z,{weight:"medium",color:"primaryBrown",children:o("Available hours")}),(0,a.jsx)(N.Z,{block:!0,color:"grey",children:o("Define the timeframes for an offer to be active. An offer is automatically disabled if you have not been online for {{count}} days.",{count:10})}),(0,a.jsxs)("div",{className:I().hoursContent,children:[(0,a.jsx)(_.ZP.Item,{name:"offer.round_the_clock",children:(0,a.jsx)(qe,{isSelected:r,"aria-label":"24HoursAccess",onChange:function(e){i&&i(e)},children:o("24 hours access")})}),(0,a.jsxs)("div",{className:I().hoursGroup,children:[(0,a.jsx)(_.ZP.Item,{name:"offer.working_hours_start",isDisabled:r,defaultValue:l,children:(0,a.jsx)($.Z,{w:32,variant:"white",items:s})}),"-",(0,a.jsx)(_.ZP.Item,{name:"offer.working_hours_end",isDisabled:r,defaultValue:c,children:(0,a.jsx)($.Z,{w:32,variant:"white",items:s})})]})]}),(0,a.jsxs)("div",{className:I().hoursContent,children:[(0,a.jsx)(_.ZP.Item,{name:"offer.workdays_only",children:(0,a.jsxs)(qe,{"aria-label":"workdaysOnly",children:[" ",o("Workdays only.")]})}),(0,a.jsx)(N.Z,{color:"grey",children:o("Offer will be disabled on Saturdays and Sundays.")})]})]})},Ue=t(25588),Ye=function(){return(0,Ue.R)().data||[]},Ke=function(e){var n,t,i,r=e.value,o=(0,m.Z)().t,s=Ye(),l=[{text:"Global",value:"Global"}].concat((0,pe.Z)(s.map((function(e){return{text:e.name,value:e.code}})))),c=r?null===(n=null===l||void 0===l?void 0:l.find((function(e){return String(e.value)===String(r)})))||void 0===n?void 0:n.text:"",d=(0,_.Gc)().formState,u=null===d||void 0===d||null===(t=d.errors)||void 0===t||null===(i=t.offer)||void 0===i?void 0:i.country_code;return(0,a.jsxs)(ue,{title:o("Location"),caption:c,isOpen:!!u||void 0,children:[(0,a.jsx)(N.Z,{mb:1.5,color:"grey",children:o('The list of payment methods depends on the "Country" setting.')}),(0,a.jsx)(_.ZP.Item,{name:"offer.country_code",defaultValue:"Global",children:(0,a.jsx)($.Z,{w:48,variant:"white",items:l})})]})},$e=t(90837),Qe=function(e){var n,t,i=e.value,r=(0,m.Z)().t,o=i?r("{{count}} min",{count:i}):"",s=(0,_.Gc)().formState,l=null===s||void 0===s||null===(n=s.errors)||void 0===n||null===(t=n.offer)||void 0===t?void 0:t.payment_window_minutes;return(0,a.jsxs)(ue,{title:r("Payment window"),caption:o,isOpen:!!l||void 0,children:[(0,a.jsxs)(N.Z,{mb:1.5,color:"grey",children:[r("The time within which the Seller must receive the payment from the Buyer. When the time runs out, a\ndispute can be started.")," ",(0,a.jsx)($e.Z,{variant:"link",href:"/pages/faq#payment_window",children:r("How to set payment window?")})]}),(0,a.jsx)(_.ZP.Item,{name:"offer.payment_window_minutes",pattern:"^[0-9]*$",maxLength:5,defaultValue:"90",children:(0,a.jsx)(Q.Z,{validateOnType:!0,w:48,variant:"white",inputMode:"numeric",postfix:"min","aria-label":"offerPaymentWindowMinutes"})})]})},Je=function(e){var n,t,i,r=e.value,o=(0,m.Z)().t,s=(0,_.Gc)().formState,l=(0,p.Z)().user;if(!l)return null;var c=(0,y.w6)(l.canHaveZeroConfirmations?0:1,7).map((function(e){return{text:"".concat(e," confirmation"),value:"".concat(e)}})),d=r?null===(n=null===c||void 0===c?void 0:c.find((function(e){return String(e.value)===String(r)})))||void 0===n?void 0:n.text:"",u=null===s||void 0===s||null===(t=s.errors)||void 0===t||null===(i=t.offer)||void 0===i?void 0:i.confirmations;return(0,a.jsxs)(ue,{title:o("BTC confirmations"),caption:d,isOpen:!!u||void 0,children:[(0,a.jsx)(N.Z,{mb:1.5,color:"grey",children:o("The number of transaction confirmations you will have to wait when deposing Bitcoin to escrow. More\nconfirmations ensure better security but require more time.")}),(0,a.jsx)(_.ZP.Item,{required:!0,name:"offer.confirmations",defaultValue:"1",children:(0,a.jsx)($.Z,{w:48,variant:"white",items:c})})]})},Xe=function(){var e,n,t,i,r=(0,m.Z)().t,o=(0,_.Gc)().formState,s=(null===o||void 0===o||null===(e=o.errors)||void 0===e||null===(n=e.offer)||void 0===n?void 0:n.title)||(null===o||void 0===o||null===(t=o.errors)||void 0===t||null===(i=t.offer)||void 0===i?void 0:i.description);return(0,a.jsx)(ue,{title:r("Offer description"),isOpen:!!s||void 0,children:(0,a.jsxs)(be.Z,{flex:"col",gap:"2",children:[(0,a.jsx)(_.ZP.Item,{label:r("Title"),maxLength:100,name:"offer.title",children:(0,a.jsx)(Q.Z,{showCounter:!0,variant:"white",caption:r("Displayed in offer list"),"aria-label":"offerTitle"})}),(0,a.jsx)(_.ZP.Item,{label:r("Description"),maxLength:5e3,name:"offer.description",children:(0,a.jsx)(Q.Z,{showCounter:!0,multiLine:!0,variant:"white",rows:4,"aria-label":"offerDescription"})})]})})},en=function(e,n){return{title:e,content:n}},nn=function(e){var n=e.displayMethods,t=void 0===n?[]:n,i=e.price,r=e.currencyCode,o=e.provider,s=e.amountMin,l=e.amountMax,c=e.total,u=e.stopLoss,f=e.firstTrade,v=e.deviation,h=e.isBuy,p=e.sign,_=e.isPriceFixed,j=(0,K.dD)(),b=(0,m.Z)().t,g="+"===p?"calmGreen":"orangeBg",Z=(0,a.jsxs)(a.Fragment,{children:["0"===i?"-":i," ",r," ",j||_?"":"|",!_&&(0,a.jsxs)("div",{className:I().priceContent,children:[o," ",v&&(0,a.jsx)(Ve.Z,{status:g,preset:"s2b",variant:"solid",children:v})]})]}),C=(0,a.jsxs)(a.Fragment,{children:[(0,y.tD)([s,l])," ",l||s?r:"- ".concat(r)]}),w=(0,a.jsxs)(a.Fragment,{children:[c," ",r]}),S=(0,a.jsxs)(a.Fragment,{children:[u," ",r]}),T=(0,a.jsxs)(a.Fragment,{children:[f," ",r]}),P=(0,a.jsx)(a.Fragment,{children:t.map((function(e){return(0,a.jsx)(we.Z,{type:e.type,name:e.name},e.name)}))}),M=[!!i&&en(b("Price"),Z),en(b("Amount"),C),!!c&&en(b("Offer balance"),w),!!u&&en(b("Stop-loss value"),S),!!f&&en(b("First-trade limit"),T),en(b("Payment methods"),P)].filter(Boolean);return(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Z,{uppercase:!0,level:5,color:"primaryBrown",children:b(h?"Offer to buy BTC":"Offer to sell BTC")}),(0,a.jsx)("div",{className:I().infoContent,children:M.map((function(e){return(0,a.jsxs)("div",{className:(0,x.Z)("Payment methods"===e.title?I().infoRowPayments:I().infoRow),children:[(0,a.jsx)("div",{className:I().infoRowTitle,children:e.title}),(0,a.jsx)("div",{className:I().infoRowItem,children:e.content})]},e.title)}))})]})},tn=function(e){var n=e.currencyType,t=e.countryCode,i=e.paymentWindow,r=e.confirmations,o=e.displayMethods,s=e.price,l=e.provider,c=e.amountMin,d=e.amountMax,u=e.balance,f=e.stopLoss,m=e.firstTrade,v=e.currencyCode,h=e.deviation,p=e.sign,x=e.unit,_=e.isBuy,b=e.isPriceFixed,g=e.isRoundClock,Z=e.onFullTime,C=(0,fe.U)(),w="btc"===n,S=C.format(s),T=c?C.format(w?c*s:c):"",P=d?C.format(w?d*s:d):"",M=(0,y.He)(u),N=M?C.format(M):"",k=(0,y.He)(f),F=k?C.format(k):"",V=(0,y.He)(m),z=V?C.format(V):"",B=C.format((0,y.He)(h)||0),D="currency"==x?" ".concat(v):x,G=(0,y.He)(h)?"".concat(p).concat(B).concat(D):"";return(0,a.jsx)(ae.Z,{variant:"grey",children:(0,a.jsxs)("div",{className:I().columnContentLayout,children:[(0,a.jsx)(We,{isRoundClock:g,onFullTime:Z}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(Ke,{value:t}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(Qe,{value:i}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(Je,{value:r}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(Xe,{}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(nn,{isBuy:_,displayMethods:o,price:S,provider:l,currencyCode:v,amountMin:T,amountMax:P,total:N,stopLoss:F,firstTrade:z,deviation:G,sign:p,isPriceFixed:b})]})})},rn=function(e){var n,t,i,r,o,s,l=e.price,c=e.currencyCode,d=e.currencyMultiplier,u=e.isFixed,f=e.deviation,v=e.unit,h=e.sign,p=(0,m.Z)().t,j=(0,fe.U)({maximumFractionDigits:2}),b=(0,K.BF)(),g=(0,y.He)(f)||0,Z=function(e){return 1!==d?"(".concat(j.format(e*d)," USD)"):""},C=Z(l),w=(0,_.Gc)().formState,S=null===w||void 0===w||null===(n=w.errors)||void 0===n||null===(t=n.offer)||void 0===t||null===(i=t.exchange_price_deviation)||void 0===i?void 0:i.message,T=null===w||void 0===w||null===(r=w.errors)||void 0===r||null===(o=r.offer)||void 0===o||null===(s=o.price)||void 0===s?void 0:s.message;return u?(0,a.jsxs)(N.Z,{preset:"b2-14m",children:[!T&&p("Fixed price won\u2019t change with the market price")," ",C?(0,a.jsx)(Ve.Z,{isBlock:"md"==b,status:T?"error":"lightGreen",variant:"solid",children:C}):null]}):(0,a.jsxs)(N.Z,{preset:"b2-14m",className:Me().priceCaptionTitle,children:[!S&&(0,a.jsx)(N.Z,{className:Me().priceTitle,children:p("Applicable rate")}),(0,a.jsx)(Ve.Z,{isBlock:"md"==b,status:S?"error":"lightGreen",variant:"solid",className:(0,x.Z)(!S&&Me().priceCaptionBadge),children:function(){var e="".concat(j.format(l)," ").concat(c," ").concat(C),n="+"===h?100+g:g>=100?100:100-g,t="+"===h?l-g:l+g,i=Z(l/n*100),r=Z(t),o="".concat(j.format(l/n*100)," ").concat(c," ").concat(i," * ").concat(n,"% = ").concat(e),a="".concat(j.format(t)," ").concat(c," ").concat(r," ").concat(h," ").concat(f," ").concat(c," = ").concat(e);return f?"%"===v?o:a:e}()})]})},on=t(4982),an=function(){var e=(0,m.Z)().t,n=[{title:"1",text:e("offers_create_step_1_title"),active:!0},{title:"2",text:e("offers_create_step_2_title")},{title:"3",text:e("offers_create_step_3_title")},{title:"4",text:e("offers_create_step_4_title")},{title:"5",text:e("offers_create_step_5_title")}];return(0,a.jsx)(on.Z,{steps:n})},sn=function(e){var n,t,i,r,o=e.side,l=e.defaultValues,c=e.isEdit,d=e.onSubmit,u="buy"===o,f=(0,m.Z)().t,v=S(),h=v.currencies,p=v.isCurrenciesReady,Z=C(),w=Z.providers,M=Z.isProvidersReady,N=(0,b.Z)(),F=N.paymentMethods,V=N.types,z=N.isPaymentMethodsReady,B=(0,g.Z)(),D=B.paymentInstructions,G=B.isPaymentInstructionsReady,E=(null===l||void 0===l||null===(n=l.offer)||void 0===n?void 0:n.min_amount)!==(null===l||void 0===l||null===(t=l.offer)||void 0===t?void 0:t.max_amount)?"range":"fixed",L=h.map((function(e){return{value:e.code,text:e.code}})),H=w.map((function(e){return{value:e.name,text:e.name}})),R=(0,s.useState)(E),A=R[0],O=R[1],q=(0,s.useState)("stable"),W=q[0],K=q[1],$=(0,s.useState)(""),Q=$[0],J=$[1],X="fixed"===A,ee=(0,_.cI)({defaultValues:l,mode:"onSubmit",shouldUseNativeValidation:!0}),ne=ee.watch("offer.price_source")||"exchange_rate",te=ee.watch("offer.currency_code"),ie=ee.watch("offer.exchange_rate_provider"),ae=(0,y.He)(ee.watch("offer.price")),se=(0,y.He)(ee.watch("offer.min_amount")),le=(0,y.He)(ee.watch("offer.max_amount")),ce=ee.watch("offer.exchange_price_sign"),de=ee.watch("offer.exchange_price_unit"),ue=ee.watch("offer.exchange_price_deviation")||"",fe=ee.watch("offer.payment_method_ids"),me=ee.watch("offer.payment_method_instruction_ids"),pe=ee.watch("offer.round_the_clock",!0),xe=(null===l||void 0===l?void 0:l.offer.stop_loss_value)?null===l||void 0===l?void 0:l.offer.stop_loss_value:ee.watch("offer.stop_loss_value"),_e=F.filter((function(e){var n=(0,y.He)(e.id);return!!n&&(null===fe||void 0===fe?void 0:fe.includes(n))})),ye=D.filter((function(e){var n=(0,y.He)(e.id);return!!n&&((null===me||void 0===me?void 0:me.includes(n))&&e.paymentMethod)})).map((function(e){return e.paymentMethod})).filter((function(e){return!!e})),be=ie||(null===(i=H[0])||void 0===i?void 0:i.value),ge=te||"USD",Ze=ce||"+",Ce=de||"%",we=ue||"",Se="fixed_value"===ne,Te=T({provider:be,assetCode:(null===l||void 0===l||null===(r=l.offer)||void 0===r?void 0:r.asset_code)||"BTC",currencyCode:ge,deviation:ue||"0",sign:ce||"+",unit:de||"%",skip:Se}),Pe=P({currencyCode:ge}),Me=f(Se?"Tied to a fixed rate":"Tied to an exchange rate"),Ie=(Se?ae:Te)||0,Ne=function(e){(0,_.Ih)({data:e,ns:"offer",onError:function(e,n){"base"===e?J(n):ee.setError(e,{message:n})}})};(0,s.useEffect)((function(){c||ee.setValue("offer.workdays_only",!0)}),[c]);var ke=(0,a.jsx)(U,{inInput:!0,tabs:[{title:ge,value:"stable"},{title:"BTC",value:"btc"}],defaultValue:W,onChange:function(e){if(K(e),"btc"===e&&Ie){if(se){var n=(0,y._z)(String(se/Ie));n&&ee.setValue("offer.min_amount",String(n))}if(le){var t=(0,y._z)(String(le/Ie));t&&ee.setValue("offer.max_amount",String(t))}}else{if(se){var i=(0,y._z)(String(Ie*se),2);i&&ee.setValue("offer.min_amount",String(i))}if(le){var r=(0,y._z)(String(Ie*le),2);r&&ee.setValue("offer.max_amount",String(r))}}}}),Ve=function(e){return(0,a.jsx)(Be,{isFixed:Se,min:se,max:le,price:Ie,type:W,currencyMultiplier:Pe,currencyCode:ge,badgeStatus:e})},ze=(0,a.jsx)(U,{inInput:!0,tabs:[{title:f("Floating rate"),value:"exchange_rate"},{title:f("Fixed rate"),value:"fixed_value"}],defaultValue:ne,className:I().switchContainer,onChange:function(e){ee.setValue("offer.price_source",e),ee.setValue("offer.currency_code",ge),"fixed_value"===e&&(ee.resetField("offer.exchange_rate_provider"),ee.resetField("offer.exchange_price_sign"),ee.resetField("offer.exchange_price_deviation"),ee.resetField("offer.exchange_price_unit")),"exchange_rate"===e&&(ee.resetField("offer.price"),ee.setValue("offer.exchange_rate_provider",be),ee.setValue("offer.exchange_price_sign",Ze),ee.setValue("offer.exchange_price_unit",Ce),ee.setValue("offer.exchange_price_deviation",we))}}),Ge=(0,a.jsx)(U,{inInput:!0,tabs:[{title:f("Fixed amount"),value:"fixed"},{title:f("Amount range"),value:"range"}],defaultValue:A,className:I().switchContainer,onChange:function(e){O(e),"fixed"===e&&ee.setValue("offer.max_amount",ee.watch("offer.min_amount")),"range"===e&&ee.setValue("offer.max_amount",ee.watch("offer.min_amount"))}});return(0,a.jsxs)(_.ZP,{state:ee,onSubmit:function(e){if(J(""),d){var n,t=e.offer||{};t.enabled=null===(n=t.enabled)||void 0===n||n;var i=(Se?(0,y.He)(t.price):Te)||0;if("btc"===W&&i){var r=(0,y.He)(t.max_amount),o=(0,y.He)(t.min_amount);r&&(t.max_amount=String(r*i)),o&&(t.min_amount=String(o*i))}return d({offer:t}).catch((function(e){var n;"error"in e&&"data"in e.error&&Ne(null===(n=e.error)||void 0===n?void 0:n.data)}))}},onError:Ne,children:[(0,a.jsxs)("section",{className:I().layout,children:[(0,a.jsxs)("main",{className:I().layoutCol,children:[(0,a.jsxs)(k,{label:Me,labelPostfix:ze,caption:(0,a.jsx)(rn,{isFixed:Se,price:Ie,currencyCode:ge,currencyMultiplier:Pe,deviation:ue,sign:ce,unit:de}),children:[!Se&&M&&p&&H.length&&(0,a.jsx)(re,{sign:ce,deviation:ue,unit:de||Ce,provider:be,providerItems:H,currencieItems:L,currencyCode:ge,onClose:function(){ee.setValue("offer.exchange_price_deviation","")},onChangeSign:function(e){ee.setValue("offer.exchange_price_sign",e)},onCurrencyChange:function(e){"%"!==de&&ee.setValue("offer.exchange_price_unit",e)}}),Se&&(0,a.jsx)(oe,{currencieItems:L})]}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(k,{label:f(u?"Amount you want to buy":"Amount you want to sell"),labelPostfix:Ge,children:(0,a.jsxs)("div",{style:{width:"100%"},children:[!X&&(0,a.jsx)(ve,{currencyCode:ge,currencyType:W,currencyTypeSwitch:ke,caption:Ve}),X&&(0,a.jsx)(he,{currencyCode:ge,currencyType:W,currencyTypeSwitch:ke,caption:Ve,stopLoss:xe})]})}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),u&&z&&F.length&&(0,a.jsx)(k,{children:(0,a.jsx)(_.ZP.Item,{isWide:!0,name:"offer.payment_method_ids",required:"".concat(f("These fields are required")),children:(0,a.jsx)(je,{paymentMethods:F,types:V})})}),!u&&z&&G&&(0,a.jsx)(k,{children:(0,a.jsx)(_.ZP.Item,{isWide:!0,name:"offer.payment_method_instruction_ids",required:"".concat(f("Payment instruction is required")),children:(0,a.jsx)(Fe,{paymentInstructions:D,paymentMethods:F,types:V})})})]}),(0,a.jsx)("aside",{className:(0,x.Z)(I().layoutCol,I().stickyCol),children:(0,a.jsx)(tn,{countryCode:ee.watch("offer.country_code"),paymentWindow:ee.watch("offer.payment_window_minutes"),confirmations:ee.watch("offer.confirmations"),displayMethods:u?_e:ye,price:Ie,provider:be,amountMin:se,amountMax:le,balance:ee.watch("offer.balance"),stopLoss:ee.watch("offer.stop_loss_value"),firstTrade:ee.watch("offer.first_trade_limit"),currencyCode:ge,deviation:ue,currencyType:W,sign:ce,unit:de,isBuy:u,isPriceFixed:Se,isRoundClock:pe,onFullTime:function(e){e?(ee.setValue("offer.working_hours_start","00:00"),ee.setValue("offer.working_hours_end","00:00")):(ee.resetField("offer.working_hours_start"),ee.resetField("offer.working_hours_end"))}})}),(0,a.jsx)(De,{error:Q,isBuy:u,isEdit:c})]}),(0,a.jsx)(an,{}),(0,a.jsx)(_.ZP.Item,{required:!0,name:"offer.side",defaultValue:o,children:(0,a.jsx)(Y,{})}),(0,a.jsx)(_.ZP.Item,{required:!0,name:"offer.price_source",defaultValue:"exchange_rate",children:(0,a.jsx)(Y,{value:ne})})]})},ln=function(e){var n=e.children,t=e.title;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.W,{children:(0,a.jsx)(u.Z.Heading,{children:(0,a.jsx)(d.Z,{uppercase:!0,level:1,children:t})})}),(0,a.jsx)(u.W,{containerSize:"sm",children:(0,a.jsx)(u.Z.Content,{isQuiet:!0,p:0,children:n})})]})},cn=function(e){var n=e.offer,t=e.side,c=e.isEdit,d=(0,o.Z)((0,v.Ly)(),1)[0],u=(0,o.Z)((0,v.o$)(),1)[0],f=null===n||void 0===n?void 0:n.id,m=(0,v.p5)(f,{skip:!f}),p=(0,l.useRouter)(),x=(0,s.useMemo)((function(){if(n)return(0,v.c)(n)}),[n]);return(0,a.jsx)(sn,{side:t,isEdit:c,defaultValues:x,onSubmit:function(e){if(e){var t=function(e){var n,t,i,r;(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.offer)||void 0===t?void 0:t.id)&&(m.refetch(),p.push("/offers/".concat(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(r=i.offer)||void 0===r?void 0:r.id)))};return c&&n?u((0,r.Z)((0,i.Z)({},e),{id:n.id})).then((function(e){return(0,h.L)(e)})).then((function(e){return t(e)})):d(e).then((function(e){return(0,h.L)(e)})).then((function(e){return t(e)}))}return Promise.resolve()}})},dn=function(){return(0,a.jsxs)("div",{style:{display:"flex",gap:"24px"},children:[(0,a.jsx)(f.Z,{height:"6",style:{width:"50%"}}),(0,a.jsx)(f.Z,{height:"6",style:{width:"50%"}})]})},un=function(e){var n=e.title,t=e.offer,i=e.isEdit,r=(0,l.useRouter)().asPath.includes("#sell")?"sell":"buy",o=(0,m.Z)().t,d=(0,s.useState)((null===t||void 0===t?void 0:t.side)||r),u=d[0],f=d[1],v=(0,p.Z)(),h=v.isUserReady,x=v.isGuest,_=function(e){f(e)},y=(0,a.jsx)(ln,{title:n,children:(0,a.jsxs)(c.Z,{variant:"transparent",defaultKey:u,onChange:_,children:[(0,a.jsx)(c.Z.Tab,{title:o("I want to buy BTC"),children:(0,a.jsx)(dn,{})},"buy"),(0,a.jsx)(c.Z.Tab,{title:o("I want to sell BTC"),children:(0,a.jsx)(dn,{})},"sell")]})});if((0,s.useEffect)((function(){h&&x&&(null===window||void 0===window?void 0:window.location)&&(window.location.href="/sign_in")}),[h,x]),!h)return y;if(i&&!t)return y;var j=i?["buy"===(null===t||void 0===t?void 0:t.side)?"sell":"buy"]:void 0,b=(0,a.jsx)(cn,{isEdit:i,side:u,offer:t});return(0,a.jsx)(ln,{title:n,children:(0,a.jsxs)(c.Z,{variant:"transparent",defaultKey:u,disabledKeys:j,onChange:_,children:[(0,a.jsx)(c.Z.Tab,{title:o("I want to buy BTC"),children:b},"buy"),(0,a.jsx)(c.Z.Tab,{title:o("I want to sell BTC"),children:b},"sell")]})})}},14174:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var i=t(14924),r=t(85893),o=t(67294),a=t(86010),s=t(51621),l=t.n(s),c=function(e){var n=e.children;return(0,r.jsx)(r.Fragment,{children:n})},d=Object.assign((function(e){var n=e.children,t=e.variant,s=void 0===t?"solid":t,d=e.defaultKey,u=void 0===d?"":d,f=e.disabledKeys,m=void 0===f?[]:f,v=e.onChange,h=e.isWithHover,p=o.Children.map(n,(function(e,n){if(e.type!==c)throw new Error("Tabs only accepts Tabs.Tab elements");return{index:n,key:e.key,title:e.props.title}})),x=(0,o.useState)(p[0].key),_=x[0],y=x[1],j=p.find((function(e){return e.key===_}));if((0,o.useEffect)((function(){u&&y(u)}),[u]),!j)return null;var b,g=n[j.index];return(0,r.jsxs)("div",{className:(0,a.Z)(l().container,(b={},(0,i.Z)(b,l()["variant--".concat(s)],!!s),(0,i.Z)(b,l().withHover,h),b)),children:[(0,r.jsx)("div",{className:l().tabItems,children:p.map((function(e){var n,t=e.key,o=e.title;return(0,r.jsxs)("div",{className:(0,a.Z)(l().tabItem,(n={},(0,i.Z)(n,l().tabItemActive,_===t),(0,i.Z)(n,l().tabItemDisabled,m.includes(t)),n)),onClick:function(){return function(e){e&&e!==_&&(m.includes(e)||(y(e),v&&v(e)))}(t)},children:[o,(0,r.jsx)("div",{className:(0,a.Z)(l().underline,(0,i.Z)({},l().activeUnderline,_===t))})]},t)}))}),(0,r.jsx)("div",{className:l().body,children:g})]})}),{Tab:c,displayName:"Tabs"});d.displayName="Tabs";var u=d},93349:function(e){e.exports={content:"paymentInstructions_content___BSJM",details:"paymentInstructions_details__FYh4k",priceCaptionTitle:"paymentInstructions_priceCaptionTitle__zK_MN",priceTitle:"paymentInstructions_priceTitle__DjTIs"}},33780:function(e){e.exports={groupContainer:"offerCreate_groupContainer__uSmPp",rateFieldsGroup:"offerCreate_rateFieldsGroup__lEgwz",rateFieldsMargin:"offerCreate_rateFieldsMargin__yzCLA",errorContent:"offerCreate_errorContent__pCSDo",errorMsg:"offerCreate_errorMsg__1NRoQ",rateFields:"offerCreate_rateFields__7ojbp",deviation:"offerCreate_deviation__A5yTd",formGroup:"offerCreate_formGroup__c6Ate",formGroupLabel:"offerCreate_formGroupLabel__Sy3z1",layoutCol:"offerCreate_layoutCol__iwOOF",stickyCol:"offerCreate_stickyCol__nswLF",switchButtons:"offerCreate_switchButtons__lBWG2",hoursField:"offerCreate_hoursField__t2nfd",hoursContent:"offerCreate_hoursContent__M4ace",hoursGroup:"offerCreate_hoursGroup__VCT_2",infoContent:"offerCreate_infoContent__vcw04",infoRow:"offerCreate_infoRow__bq48_",priceContent:"offerCreate_priceContent__EYUML",infoRowTitle:"offerCreate_infoRowTitle__fuggJ",infoRowItem:"offerCreate_infoRowItem__2e7sc",caption:"offerCreate_caption___5YIE",amountGroup:"offerCreate_amountGroup__S2HEr",paymentPanel:"offerCreate_paymentPanel__8abnz",paymentBuyContent:"offerCreate_paymentBuyContent__vavmp",amountContainer:"offerCreate_amountContainer__mT6kR",advancedAmount:"offerCreate_advancedAmount__x3PNB",advancedAmountContent:"offerCreate_advancedAmountContent__Blp4D",switchContent:"offerCreate_switchContent__p1oWm",rangeAmount:"offerCreate_rangeAmount__Uc_xc",rangeAmountGroup:"offerCreate_rangeAmountGroup__DqCrl",columnContentLayout:"offerCreate_columnContentLayout__klWM1",submitGroup:"offerCreate_submitGroup__A621_",paymentMethodItem:"offerCreate_paymentMethodItem__Nisbf",switchContainer:"offerCreate_switchContainer__LPiYh",infoRowPayments:"offerCreate_infoRowPayments__c_4_x",addMarginButton:"offerCreate_addMarginButton__3DgGA",layout:"offerCreate_layout__ZvKwz",rateProvider:"offerCreate_rateProvider__ct1fd"}},67023:function(e){e.exports={checkbox:"checkbox_checkbox__J6io9",input:"checkbox_input__tzL0t"}},10832:function(e){e.exports={checkmark:"checkmark_checkmark__iLnY5",selected:"checkmark_selected__e14Nt",indeterminate:"checkmark_indeterminate__sT1MF"}},64582:function(e){e.exports={container:"expander_container__N8_vH",titleContainer:"expander_titleContainer__z0sN9",icon:"expander_icon__kYDOW",open:"expander_open__sU27w",caption:"expander_caption__KkX5w",unvisible:"expander_unvisible__Tt493",content:"expander_content__zHoNB",visible:"expander_visible__wn0JK"}},95979:function(e){e.exports={tabs:"tabSwitch_tabs__jHO8_",tab:"tabSwitch_tab__Hse1f",text:"tabSwitch_text__kpc5C","size--base":"tabSwitch_size--base__7LMb3","size--sm":"tabSwitch_size--sm__ocMOf",input:"tabSwitch_input__MQlRY"}},51621:function(e){e.exports={container:"tabs_container__LPpGD",tabItems:"tabs_tabItems__txghQ",tabItem:"tabs_tabItem__V2aqi",withHover:"tabs_withHover__1PQMI",tabItemActive:"tabs_tabItemActive__tuP2b",underline:"tabs_underline__baSMP",body:"tabs_body__8l3KE","variant--transparent":"tabs_variant--transparent__x3Y85",tabItemDisabled:"tabs_tabItemDisabled__sjFiz",activeUnderline:"tabs_activeUnderline__8yOGc"}}}]);