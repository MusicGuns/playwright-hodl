(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{65937:function(e,n,t){"use strict";t.d(n,{Z:function(){return mn}});var i=t(26042),r=t(69396),a=t(828),o=t(85893),s=t(67294),l=t(11163),c=t(14174),d=t(97153),u=t(84946),f=t(91930),m=t(20709),v=t(21580),h=t(72600),p=t(53183),x=t(86010),_=t(21209),y=t(69095),j=t(57533),b=t(98336),g=t(12518),Z=t(14562),w=function(){var e=(0,Z.A)();return{providers:e.data||[],isProvidersReady:"fulfilled"===e.status}},C=t(52209);var S=function(){var e=(0,C.K)();return{currencies:(null===e||void 0===e?void 0:e.data)||[],isCurrenciesReady:"fulfilled"===e.status}};var T=function(e){var n=e.provider,t=e.assetCode,i=e.currencyCode,r=e.deviation,a=e.sign,o=e.unit,s=e.skip;return(0,v.XV)({provider:n,asset_code:t,currency_code:i,deviation:r,sign:a,unit:o},{skip:!n||!i||null===(0,y.He)(r)||s}).currentData||0};var M=function(e){var n=e.currencyCode;return(0,v.F0)({currency_code:n},{skip:"USD"===n}).currentData||1},I=t(33780),N=t.n(I),P=t(23585),k=function(e){var n=e.caption,t=e.label,i=e.labelPostfix,r=e.children;return(0,o.jsxs)("div",{className:N().groupContainer,children:[t&&(0,o.jsxs)("div",{className:N().formGroupLabel,children:[(0,o.jsx)(P.Z,{color:"primaryBrown",weight:"medium",children:t}),i]}),(0,o.jsx)("div",{className:N().formGroup,children:r}),n&&(0,o.jsx)("div",{className:N().caption,children:n})]})},F=t(99534),B=t(14924),V=t(34140),z=t(23830),D=t(25279),E=t(92234),G=(0,s.createContext)({}),H=t(24419),L=t(28628),O=t(1155),A=t(95979),R=t.n(A),q=function(e){var n,t=e.isEmphasized,a=e.isRequired,s=e.isDisabled,l=e.label,c=e.validationState,d=e.children,u=e.orientation,f=void 0===u?"horizontal":u,m=e.size,v=void 0===m?"base":m,h=e.className,p=(0,D.w)(e),_=(0,z.a)(e,p),y=_.radioGroupProps,j=_.labelProps,b={className:(0,x.Z)(h,R().tabs,(n={},(0,B.Z)(n,R().required,a),(0,B.Z)(n,R().horizontal,"horizontal"===f),(0,B.Z)(n,R().disabled,s),(0,B.Z)(n,R()["size--".concat(v)],v),n))};return(0,o.jsxs)("div",(0,r.Z)((0,i.Z)({},(0,E.dG)(b,y)),{children:[(0,o.jsx)(V.T,{children:(0,o.jsx)("span",(0,r.Z)((0,i.Z)({className:R().label,"aria-hidden":"true"},j),{children:l}))}),(0,o.jsx)(G.Provider,{value:{isEmphasized:t,validationState:c,state:p},children:d})]}))};q.Tab=(0,s.forwardRef)((function(e,n){var t,a=e.isDisabled,l=e.children,c=e.autoFocus,d=(0,H.XI)({isDisabled:a}),u=d.hoverProps,f=d.isHovered,m=(0,s.useRef)(null),v=(0,O.rV)(n,m),h=(0,s.useContext)(G),p=h.isEmphasized,_=h.validationState,y=h.state,j=(0,z.x)((0,r.Z)((0,i.Z)({},e,h),{isDisabled:a}),y,m).inputProps;return(0,o.jsxs)("label",(0,r.Z)((0,i.Z)({},u),{ref:v,className:(0,x.Z)(R().tab,(t={},(0,B.Z)(t,R().hover,f),(0,B.Z)(t,R().quiet,!p),(0,B.Z)(t,R().invalid,"invalid"===_),(0,B.Z)(t,R().disabled,y.isDisabled),t)),children:[(0,o.jsx)(L.tE,{focusRingClass:R().focusRing,autoFocus:c,children:(0,o.jsx)("input",(0,r.Z)((0,i.Z)({className:R().input},j),{ref:m}))}),(0,o.jsx)("span",{className:R().text,children:l})]}))}));var W=q,U=function(e){var n=e.tabs,t=e.inInput,a=(0,F.Z)(e,["tabs","inInput"]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(W,(0,r.Z)((0,i.Z)({},a),{size:t?"sm":void 0,"aria-label":"fieldSwitch",children:n.map((function(e){return(0,o.jsx)(W.Tab,{value:e.value,children:e.title},e.value)}))}))})},Y=function(e){var n=e.name,t=e.value,i=e.defaultValue;return"string"===typeof i?(0,o.jsx)("input",{type:"hidden",name:n,defaultValue:i}):(0,o.jsx)("input",{type:"hidden",name:n,value:t})},K=t(84647),$=t(872),Q=t(42004),J=t(30658),X=t(94215),ee=t(91473),ne=t(4304),te=function(e){var n=e.onPress,t=e.isDisabled,i=(0,m.Z)().t,r=(0,K.dD)();return(0,o.jsx)(J.ZP,{icon:(0,o.jsx)(X.Z,{color:t?"grey600":"primary"}),iconSize:"M",variant:"primaryFlat",cursor:"pointer",weight:"medium",isDisabled:t,className:t?N().addMarginButton:"",onPress:function(){return null===n||void 0===n?void 0:n()},children:r?null:i("Add margin")})},ie=[{title:(0,o.jsx)(ne.Z,{width:"32px",height:"50px",src:{src:"/_next/static/media/PlusIcon.0bf6dbd2.svg",height:16,width:16},alt:"plus"}),value:"+"},{title:(0,o.jsx)(ne.Z,{width:"32px",height:"50px",src:{src:"/_next/static/media/MinusIcon.5830e8df.svg",height:24,width:24},alt:"minus"}),value:"-"}],re=function(e){var n=e.sign,t=e.unit,i=e.onClose,r=e.onChangeSign,a=e.currencyCode,l=void 0===a?"":a,c=e.errorContent,d=(0,s.useState)(n||"+"),u=d[0],f=d[1],m=(0,s.useMemo)((function(){return[{text:"%",value:"%"},{text:l,value:l}]}),[l]),v=(0,o.jsx)(U,{inInput:!0,tabs:ie,defaultValue:u,onChange:function(e){r&&r(e),f(e)}});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:N().rateFields,children:[(0,o.jsx)(_.ZP.Item,{display:"none",name:"offer.exchange_price_sign",defaultValue:u,children:(0,o.jsx)(Y,{value:u})}),(0,o.jsx)(_.ZP.Item,{required:!0,showError:!1,maxLength:"%"===t?5:12,pattern:"^[0-9.]*$",name:"offer.exchange_price_deviation",children:(0,o.jsx)(Q.Z,{validateOnType:!0,prefix:v,inputMode:"numeric",className:N().deviation,"aria-label":"priceDeviation"})}),(0,o.jsx)(_.ZP.Item,{name:"offer.exchange_price_unit",defaultValue:t,children:(0,o.jsx)($.Z,{w:25,items:m})}),(0,o.jsx)(J.ZP,{isQuiet:!0,icon:(0,o.jsx)(ee.Z,{color:"grey600"}),cursor:"pointer",iconSize:"M",onPress:function(){return i()}})]}),c]})},ae=function(e){var n,t,i,r=e.providerItems,a=e.currencieItems,l=e.provider,c=e.currencyCode,d=e.deviation,u=e.sign,f=e.unit,m=e.onChangeSign,v=e.onClose,h=e.onCurrencyChange,p=(0,K.BF)(),y=(0,_.Gc)().formState,j=(0,s.useState)(!!d),b=j[0],g=j[1],Z=null===y||void 0===y||null===(n=y.errors)||void 0===n||null===(t=n.offer)||void 0===t||null===(i=t.exchange_price_deviation)||void 0===i?void 0:i.message,w=Z?(0,o.jsx)(P.Z,{color:"error",preset:"b2-14r",className:N().errorMsg,children:Z}):null,C=(0,o.jsx)(te,{onPress:function(){return g(!0)}}),S=(0,o.jsx)(re,{sign:u,unit:f,currencyCode:c,errorContent:w,onChangeSign:m,onClose:function(){g(!1),v&&v()}});return(0,o.jsxs)("section",{className:(0,x.Z)(b?N().rateFieldsMargin:N().rateFieldsGroup,w&&N().errorContent),children:[(0,o.jsxs)("div",{className:N().rateFields,children:[(0,o.jsx)(_.ZP.Item,{required:!0,name:"offer.exchange_rate_provider",defaultValue:l,children:(0,o.jsx)($.Z,{w:"md"==p?40:56,items:r,className:N().rateProvider})}),(0,o.jsx)(_.ZP.Item,{required:!0,name:"offer.currency_code",defaultValue:c||"USD",children:(0,o.jsx)($.Z,{isDisabled:!l,w:25,items:a,onChange:h})}),b?(0,o.jsx)(te,{isDisabled:!0}):null]}),(0,o.jsx)("div",{className:N().rateFields,children:b?S:C})]})},oe=function(e){var n,t=e.currencieItems,i=e.defaultValue,r=void 0===i?"":i,a=(0,m.Z)().t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.ZP.Item,{name:"offer.price",required:"".concat(a("This field is required")),maxLength:12,pattern:"^[0-9.]*$",defaultValue:r,children:(0,o.jsx)(Q.Z,{validateOnType:!0,inputMode:"numeric","aria-label":"rate"})}),(0,o.jsx)(_.ZP.Item,{required:!0,name:"offer.currency_code",defaultValue:(null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.value)||"USD",children:(0,o.jsx)($.Z,{w:25,items:t})})]})},se=t(26845),le=t(44916),ce=t(4348),de=t(77189),ue=t(64582),fe=t.n(ue),me=function(e){var n=e.children,t=e.title,i=e.caption,r=e.defaultOpen,a=void 0!==r&&r,l=e.isOpen,c=e.footnote,d=(0,s.useState)(a),u=d[0],f=d[1],m="boolean"===typeof l?l:u;return(0,o.jsxs)("section",{className:fe().container,children:[(0,o.jsxs)("div",{className:fe().titleContainer,onClick:function(){f(!u)},children:[(0,o.jsx)(P.Z,{weight:"medium",color:"primaryBrown",className:fe().title,children:t}),(0,o.jsx)(de.Z,{className:(0,x.Z)(fe().icon,m&&fe().open)})]}),i&&(0,o.jsx)("div",{className:(0,x.Z)(fe().caption,(0,B.Z)({},fe().unvisible,m)),children:i}),(0,o.jsx)("div",{className:(0,x.Z)(fe().content,(0,B.Z)({},fe().visible,m)),children:n}),c&&u&&(0,o.jsx)(P.Z,{size:"sm",weight:"medium",children:c})]})},ve=t(18485),he=function(e){var n,t=e.visible,i=e.currencyCode,r=e.currencyType,a=e.onClose,s=e.isEdit,l=(0,K.dD)(),c=(0,m.Z)().t,d=(0,_.Gc)().formState.defaultValues,u=(0,_.fq)().offer,f=(0,ve.U)(),v=(0,y.He)(null===u||void 0===u?void 0:u.stop_loss_value)||0,h=v?f.format(v):"",p=Number(null===u||void 0===u?void 0:u.initial_balance)||0,x=(0,y.He)(null===u||void 0===u?void 0:u.balance),b=x?f.format(x):0,g=(null===d||void 0===d||null===(n=d.offer)||void 0===n?void 0:n.balance)===(null===u||void 0===u?void 0:u.balance)?p:x,Z=g?f.format(g):"",w=(null===u||void 0===u?void 0:u.first_trade_limit)?f.format(u.first_trade_limit):"",C="fixed_value"===(null===u||void 0===u?void 0:u.price_source),S={balance:b,currencyCode:i,initialBalance:Z},T=b?c("{{balance}} {{currencyCode}} out of {{initialBalance}} {{currencyCode}}",S):c("Max amount available for trade. Offer will be disabled when reached."),M=c("Left of the initial balance of {{initialBalance}} {{currencyCode}}",S);return(0,o.jsx)("div",{className:N().advancedAmount,style:{display:t?"block":"none"},children:(0,o.jsx)(le.Z,{title:c("Advanced settings"),titlePostfix:(0,o.jsx)(P.Z,{size:"sm",color:"grey",children:c("Optional")}),variant:"gradient",onClose:a,children:(0,o.jsxs)("div",{className:N().advancedAmountContent,children:[(0,o.jsxs)(me,{title:c("Total offer balance"),caption:T,footnote:s?M:void 0,children:[(0,o.jsx)(P.Z,{mb:1.5,color:"grey",children:c("Max amount available for trade. Offer will be disabled when reached.")}),(0,o.jsx)(_.ZP.Item,{name:"offer.balance",pattern:"^[0-9.]*$",maxLength:"stable"===r?12:14,defaultValue:s?b:"",children:(0,o.jsx)(Q.Z,{validateOnType:!0,w:l?100:80,inputMode:"numeric",postfix:i.toUpperCase(),"aria-label":"offerBalance"})})]}),(0,o.jsxs)(me,{title:c("Stop-loss value"),caption:h?"".concat(h," ").concat(i):c("If applicable rate drops to defined value, your offer will be disabled."),children:[(0,o.jsx)(P.Z,{mb:1.5,color:"grey",children:c("If applicable rate drops to defined value, your offer will be disabled.")}),(0,o.jsx)(_.ZP.Item,{name:"offer.stop_loss_value",pattern:"^[0-9.]*$",maxLength:"stable"===r?12:14,isDisabled:C,defaultValue:h,children:(0,o.jsx)(Q.Z,{validateOnType:!0,w:l?100:80,inputMode:"numeric",postfix:i.toUpperCase(),"aria-label":"offerStopLossValue"})})]}),(0,o.jsxs)(me,{title:"First-trade limit",caption:w?"".concat(w," ").concat(i):c("Max amount available for a trade with a user you have not dealt with before."),children:[(0,o.jsx)(P.Z,{mb:1.5,color:"grey",children:c("Max amount available for a trade with a user you have not dealt with before.")}),(0,o.jsx)(_.ZP.Item,{name:"offer.first_trade_limit",pattern:"^[0-9.]*$",maxLength:"stable"===r?12:14,defaultValue:"",children:(0,o.jsx)(Q.Z,{validateOnType:!0,w:l?100:80,inputMode:"numeric",postfix:i.toUpperCase(),"aria-label":"offerFirstTradeLimit"})})]}),(0,o.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,o.jsx)(_.ZP.Item,{name:"offer.for_experienced_users",children:(0,o.jsx)(ce.Z,{children:(0,o.jsxs)("div",{className:N().switchContent,children:[(0,o.jsx)(P.Z,{weight:"medium",color:"primaryBrown",children:c("Available to experienced users only")}),(0,o.jsx)(P.Z,{block:!0,color:"grey",children:c("Your offer will only be available to users who have traded on Hodl Hodl before.")})]})})})]})})})},pe=function(e){var n,t,i,r,a,l,c=e.currencyCode,d=e.currencyType,u=e.currencyTypeSwitch,f=e.caption,v=e.isEdit,h=(0,m.Z)().t,p=(0,s.useState)(!1),x=p[0],y=p[1],j=(0,K.ac)("(max-width: 767px )"),b=(0,_.Gc)().formState,g=null===b||void 0===b||null===(n=b.errors)||void 0===n||null===(t=n.offer)||void 0===t||null===(i=t.min_amount)||void 0===i?void 0:i.message,Z=null===b||void 0===b||null===(r=b.errors)||void 0===r||null===(a=r.offer)||void 0===a||null===(l=a.max_amount)||void 0===l?void 0:l.message,w=g||Z?(0,o.jsxs)(P.Z,{block:!0,color:"error",preset:"b2-14r",children:[g," ",Z]}):null,C=(0,o.jsx)(J.ZP,{icon:(0,o.jsx)(X.Z,{color:x?"grey600":"primary"}),iconSize:"M",variant:"primaryFlat",cursor:"pointer",weight:"medium",isDisabled:x,onPress:function(){return y((function(e){return!e}))},children:h("Advanced settings")});return(0,o.jsxs)("div",{className:N().rangeAmount,children:[(0,o.jsxs)("div",{className:N().rangeAmountGroup,children:[(0,o.jsx)(se.Z.Item,{required:"".concat(h("This field is required")),pattern:"^[0-9.]*$",maxLength:"stable"===d?12:14,name:"offer.min_amount",isWide:j,showError:!1,children:(0,o.jsx)(Q.Z,{validateOnType:!0,prefix:h("From"),inputMode:"numeric",w:j?void 0:48,"aria-label":"offerMinAmount"})}),j?null:"-",(0,o.jsx)(se.Z.Item,{required:!0,name:"offer.max_amount",pattern:"^[0-9.]*$",maxLength:"stable"===d?12:14,showError:!1,children:(0,o.jsx)(Q.Z,{validateOnType:!0,w:j?void 0:56,prefix:h("To"),inputMode:"numeric",postfix:u,"aria-label":"offerMaxAmount"})}),j?null:C]}),w,w?f("error"):f(),j?C:null,(0,o.jsx)(he,{isEdit:v,visible:x,currencyCode:c,currencyType:d,onClose:function(){return y((function(e){return!e}))}})]})},xe=function(e){var n,t,i,r,a,l,c=e.currencyCode,d=e.currencyTypeSwitch,u=e.caption,f=e.currencyType,v=e.isEdit,h=(0,m.Z)().t,p=(0,K.ac)("(max-width: 767px )"),x=(0,_.Gc)(),y=x.formState,j=x.watch,b=x.setValue,g=(0,s.useState)(!1),Z=g[0],w=g[1],C=null===y||void 0===y||null===(n=y.errors)||void 0===n||null===(t=n.offer)||void 0===t||null===(i=t.min_amount)||void 0===i?void 0:i.message,S=null===y||void 0===y||null===(r=y.errors)||void 0===r||null===(a=r.offer)||void 0===a||null===(l=a.max_amount)||void 0===l?void 0:l.message,T=C||S?(0,o.jsxs)(P.Z,{block:!0,items:"center",color:"error",preset:"b2-14r",children:[C," ",S]}):null,M=j("offer.min_amount");return(0,s.useEffect)((function(){b("offer.max_amount",M)}),[M]),(0,o.jsxs)("div",{className:N().amountContainer,children:[(0,o.jsxs)("div",{className:N().amountGroup,children:[(0,o.jsx)(se.Z.Item,{name:"offer.min_amount",required:"".concat(h("This field is required")),pattern:"^[0-9.]*$",maxLength:"stable"===f?12:14,showError:!1,defaultValue:"",children:(0,o.jsx)(Q.Z,{validateOnType:!0,w:80,inputMode:"numeric",postfix:d,"aria-label":"currencyType"})}),(0,o.jsx)(se.Z.Item,{required:!0,name:"offer.max_amount",display:"none",defaultValue:"0",children:(0,o.jsx)(Y,{})}),p&&(0,o.jsxs)("div",{children:[T," ",T?u("error"):u()]}),(0,o.jsx)(J.ZP,{icon:(0,o.jsx)(X.Z,{color:Z?"grey600":"primary"}),iconSize:"M",variant:"primaryFlat",cursor:"pointer",weight:"medium",isDisabled:Z,onPress:function(){return w((function(e){return!e}))},children:h("Advanced settings")})]}),!p&&(0,o.jsxs)(o.Fragment,{children:[T," ",T?u("error"):u()]}),(0,o.jsx)(he,{isEdit:v,visible:Z,currencyCode:c,currencyType:f,onClose:function(){return w((function(e){return!e}))}})]})},_e=t(29815),ye=t(88267),je=function(e){var n=e.methods,t=void 0===n?[]:n,i=e.field,r=e.types,a=e.values,l=e.onClose,c=e.onChange,d=e.error,u=(0,K.ac)("(max-width: 767px )"),f=(0,m.Z)().t,v=(0,s.useState)((null===i||void 0===i?void 0:i.type)||""),h=v[0],p=v[1],x=(0,s.useState)((null===i||void 0===i?void 0:i.name)||""),_=x[0],j=x[1],b=(0,s.useMemo)((function(){return(0,y.TE)(t.filter((function(e){return e.type===h})).map((function(e){return e.name})))}),[h,t]).map((function(e){return{text:e,value:e}})).sort((function(e,n){return e.text.localeCompare(n.text)})),g=r.map((function(e){return{text:e,value:e}})),Z=t.find((function(e){return e.name===_&&e.type&&h})),w=(0,y.He)(null===Z||void 0===Z?void 0:Z.id),C=!((null===Z||void 0===Z?void 0:Z.id)===(null===i||void 0===i?void 0:i.id)||!w||!(null===a||void 0===a?void 0:a.includes(w))),S=h?"".concat(h," ").concat(_):f("Payment instruction");(0,s.useEffect)((function(){(null===Z||void 0===Z?void 0:Z.id)!==(null===i||void 0===i?void 0:i.id)&&c&&w&&!(null===a||void 0===a?void 0:a.includes(w))&&c(w)}),[h,_,a]);var T=C?(0,o.jsx)(P.Z,{color:"error",size:"xs",mt:1.5,children:f("Selected payment method has already been used in one of the instructions above. Create another offer\nif you want to use the same payment method with different payment details.")}):null;return(0,o.jsxs)("div",{className:N().paymentMethodItem,id:null===i||void 0===i?void 0:i.id,children:[(0,o.jsx)(le.Z,{variant:"gradient",title:S,isInvalid:C||!!d,onClose:l,children:(0,o.jsxs)("div",{className:N().paymentBuyContent,children:[(0,o.jsx)($.Z,{value:h,placeholder:f("Select payment type"),w:u?"100":"1/2",items:g,isWide:u,onChange:p}),(0,o.jsx)($.Z,{isDisabled:!h,w:u?"100":"1/2",value:_,placeholder:f("Select payment method"),items:b,isWide:u,onChange:j})]})}),T,d?(0,o.jsx)(P.Z,{color:"error",size:"xs",mt:1.5,children:d}):null]})},be={id:"",name:"",type:""},ge=function(e){var n=e.types,t=e.paymentMethods,i=e.name,r=e.value,a=void 0===r?[]:r,l=e.defaultValue,c=void 0===l?[]:l,d=e.error,u=e.onChange,f=function(e){return e.length>0?e.map((function(e){return t.find((function(n){return String(e)===String(n.id)}))})).filter((function(e){return!!e})):null},v=(0,m.Z)().t,h=(0,s.useState)(f(c)||[]),p=h[0],x=h[1],_=p.map((function(e){return e.type})),j=n.filter((function(e){return!_.includes(e)})),b=t.filter((function(e){return j.includes(e.type)})).length>0,g=(0,s.useMemo)((function(){return p.map((function(e){return(0,y.He)(e.id)||0})).filter((function(e){return!!e}))}),[p]),Z=function(e,n){var i,r=null===t||void 0===t?void 0:t.find((function(n){return n.id===String(e)}));if(u&&r){var a=(0,_e.Z)(p);a[n]=r,u((0,y.TE)(null===(i=a)||void 0===i?void 0:i.map((function(e){return(0,y.He)(e.id)||0})).filter((function(e){return!!e}))))}};return(0,s.useEffect)((function(){var e=f(a);e&&x(e)}),[a]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(P.Z,{weight:"medium",mb:3,color:"primaryBrown",children:v("Your payment instructions")}),(0,o.jsxs)("div",{className:N().paymentPanel,children:[p.length>0?p.map((function(e,i){return(0,o.jsx)(je,{field:e,values:a,types:n,methods:t,error:d,onChange:function(e){return Z(e,i)},onClose:function(){return function(e){if(u){var n=(0,y.TE)(a.filter((function(n){return String(n)!==e.id})));0===n.length&&x([]),u(n)}}(e)}},"".concat(e.id,"-").concat(i))})):(0,o.jsx)(je,{types:n,methods:t,error:d,onChange:function(e){return Z(e,p.length)}}),b&&(0,o.jsx)(J.ZP,{isWide:!0,variant:"primaryOutline",size:12,icon:(0,o.jsx)(ye.Z,{}),iconSize:"M",onPress:function(){if(b&&u){var e=f(a);e&&x((0,_e.Z)(e).concat([be]))}},children:v("Add new payment insctruction")}),(0,o.jsx)(Y,{name:i,value:g})]})]})},Ze=t(90650),we=t(85905),Ce=t(44412),Se=t(26207),Te=t(44647),Me=t(93142),Ie=t(28021),Ne=t(93349),Pe=t.n(Ne),ke=function(e){return null===e||void 0===e?void 0:e.map((function(e){return(0,y.He)(e.id)||0})).filter((function(e){return!!e}))},Fe=function(e,n){return e.map((function(e){return n.find((function(n){return String(n.id)===String(e)}))})).filter((function(e){return!!e}))},Be=function(e){var n,t,r=e.item,l=e.types,c=e.paymentMethods,d=e.onRemove,u=(0,m.Z)().t,f=(0,a.Z)((0,Ie.BG)(),1)[0],v=(0,s.useMemo)((function(){var e,n;return{id:(null===r||void 0===r?void 0:r.id)||"",method:(null===r||void 0===r||null===(e=r.paymentMethod)||void 0===e?void 0:e.name)||"",type:(null===r||void 0===r||null===(n=r.paymentMethod)||void 0===n?void 0:n.type)||"",name:(null===r||void 0===r?void 0:r.name)||"",details:(null===r||void 0===r?void 0:r.details)||""}}),[r]),p=function(e){var n={payment_method_instruction:{name:e.name,details:e.details||"",payment_method_id:e.payment_method_id}};return f((0,i.Z)({id:null===v||void 0===v?void 0:v.id},n)).then((function(e){return(0,h.L)(e)}))},_=(0,o.jsxs)(we.hg,{type:"modal",mobileType:"fullscreenTakeover",preventPressOutside:!1,isDismissable:!1,children:[(0,o.jsx)(J.ZP,{icon:(0,o.jsx)(Me.Z,{color:"primary"}),variant:"primaryFlat",weight:"medium",text:"sm",className:Pe().editBtn,iconSize:"5",ml:1.5,cursor:"pointer",children:u("offers_create_payment_instructions_edit_btn")}),function(e){return(0,o.jsx)(we.Vq,{mobileType:"fullscreenTakeover",children:(0,o.jsx)(Ce.V,{style:{maxWidth:"33.75rem"},children:(0,o.jsx)(Se.Z,{types:l,methods:c,defaultValues:v,onSubmit:p,onClose:e})})})}]});return(0,o.jsx)(le.Z,{variant:"gradient",title:r.name,titlePostfix:_,onClose:function(){return d(r.id)},children:(0,o.jsxs)("div",{className:Pe().content,children:[(0,o.jsxs)("div",{className:Pe().contentItem,children:[(0,o.jsx)(P.Z,{block:!0,size:"xs",color:"primary800",mb:1.5,children:u("offers_create_payment_instructions_type")}),(0,o.jsx)(P.Z,{block:!0,weight:"medium",color:"black",children:null===(n=r.paymentMethod)||void 0===n?void 0:n.type})]}),(0,o.jsxs)("div",{className:Pe().contentItem,children:[(0,o.jsx)(P.Z,{block:!0,size:"xs",color:"primary800",mb:1.5,children:u("offers_create_payment_instructions_method")}),(0,o.jsx)(P.Z,{block:!0,color:"black",weight:"medium",children:null===(t=r.paymentMethod)||void 0===t?void 0:t.name})]}),(0,o.jsxs)("div",{className:(0,x.Z)(Pe().contentItem,Pe().details),children:[(0,o.jsx)(P.Z,{block:!0,size:"xs",color:"primary800",mb:1.5,children:u("offers_create_payment_instructions_details")}),(0,o.jsx)(P.Z,{block:!0,weight:"medium",color:"primaryBrown",className:Pe().details,children:r.details})]})]})})},Ve=function(e){var n=e.paymentMethods,t=void 0===n?[]:n,l=e.paymentInstructions,c=void 0===l?[]:l,d=e.types,u=void 0===d?[]:d,f=e.name,v=e.defaultValue,p=void 0===v?[]:v,x=e.value,_=e.error,j=e.onChange,b=(0,m.Z)().t,g=(0,K.dD)(),Z=(0,s.useState)(Fe(p,c)),w=Z[0],C=Z[1],S=(0,a.Z)((0,Ie.V2)(),1)[0],T=(0,s.useMemo)((function(){return w.map((function(e){return(0,y.He)(e.id)||0}))}),[w]),M=function(e){return S({payment_method_instruction:{name:e.name,details:e.details,payment_method_id:e.payment_method_id}}).then((function(e){return(0,h.L)(e)})).then((function(e){var n;(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.payment_method_instruction)&&j&&j((0,y.TE)(ke((0,_e.Z)(w).concat([e.data.payment_method_instruction]))))}))},I=(0,o.jsxs)(we.hg,{type:"modal",mobileType:"fullscreenTakeover",preventPressOutside:!1,isDismissable:!1,children:[(0,o.jsx)(J.ZP,{isWide:!0,variant:"primaryOutline",size:12,icon:(0,o.jsx)(ye.Z,{}),iconSize:"M",children:b("Create new payment instruction")}),function(e){return(0,o.jsx)(we.Vq,{mobileType:"fullscreenTakeover",children:(0,o.jsx)(Ce.V,{style:{maxWidth:g?"none":"33.75rem"},children:(0,o.jsx)(Se.Z,{types:u,methods:t,onSubmit:M,onClose:e})})})}]}),N=c.map((function(e){return(0,r.Z)((0,i.Z)({},e),{paymentMethod:t.find((function(n){return n.id===e.payment_method_id}))})})).map((function(e){var n,t;return{text:(0,o.jsxs)(P.Z,{children:[e.name," ",(null===e||void 0===e?void 0:e.paymentMethod)?(0,o.jsx)(Te.Z,{type:null===(n=e.paymentMethod)||void 0===n?void 0:n.type,name:null===(t=e.paymentMethod)||void 0===t?void 0:t.name},e.id):null]}),value:e.id}})),k=w.map((function(e){return e.id})),F=N.filter((function(e){return!k.includes(e.value)})),B=function(e){var n=w.filter((function(n){return n.id!=e}));j&&j((0,y.TE)(ke(n)))};return(0,s.useEffect)((function(){"undefined"!==typeof x&&C(Fe(x,c))}),[x,c]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(P.Z,{weight:"medium",mb:3,color:"primaryBrown",children:b("Your payment instructions")}),(0,o.jsx)(Ze.Z,{flex:"col",gap:"6",mb:"6",children:w.length>0&&w.map((function(e){return(0,o.jsx)(Be,{item:e,types:u,paymentMethods:t,onRemove:B},e.id)}))}),(0,o.jsxs)("div",{children:[(0,o.jsx)($.Z,{mb:4,validationState:_?"invalid":void 0,error:_,placeholder:b("Select payment instruction"),items:F,value:" ",defaultValue:"",onChange:function(e){return function(e){var n=c.find((function(n){return n.id===e})),t=w.find((function(e){return e.id===(null===n||void 0===n?void 0:n.id)}));j&&!t&&n&&j((0,y.TE)(ke((0,_e.Z)(w).concat([n]))))}(e)}}),I,(0,o.jsx)(Y,{name:f,value:T})]})]})},ze=t(76858);var De=function(e){var n=e.status,t=void 0===n?"lightGreen":n,i=e.children;return(0,o.jsx)(P.Z,{preset:"b2-14m",children:(0,o.jsx)(ze.Z,{status:t,variant:"solid",children:i})})};var Ee=function(e){var n=e.min,t=e.max,i=e.price,r=e.type,a=e.currencyCode,s=e.currencyMultiplier,l=e.badgeStatus,c=(0,ve.U)({maximumFractionDigits:8}),d=function(e){var n=e.min,t=e.max,i=e.price,r=e.type,a=e.format,o=e.currencyCode,s=e.currencyMultiplier,l=function(e,n){return(0,y.tD)(["".concat(String(a((0,y._z)(e,2)||0))),"".concat(String(a((0,y._z)(n,2)||0)))])},c=function(e,n){var t=n?l(e*s,n*s):a(e*s);return 1!==s?"(".concat(t," USD)"):""};if(!i)return"";if(n&&t){if("btc"===r){var d=n*i,u=t*i;return"= ".concat(l(d,u)," ").concat(o," ").concat(c(d,u))}if("stable"===r)return"= ".concat(function(e,n){return(0,y.tD)(["".concat((0,y._z)(e,8)),"".concat((0,y._z)(n,8))])}(n/i,t/i)," BTC ").concat(c(n,t))}if(n){if("btc"===r){var f=n*i;return"= ".concat((0,y._z)(f,2)," ").concat(o," ").concat(c(f))}if("stable"===r){var m=n/i;return"= ".concat((0,y._z)(m)," BTC ").concat(c(n))}}return""}({min:n,max:t,type:r,price:i,format:function(e){return c.format(e)},currencyCode:a,currencyMultiplier:s});return d?(0,o.jsx)(De,{status:l,children:d}):"stable"===r?(0,o.jsx)(De,{status:l,children:"- BTC"}):"btc"===r?(0,o.jsxs)(De,{status:l,children:["- ",a]}):null},Ge=function(e){var n=e.isBuy,t=e.isEdit,i=e.error,r=(0,m.Z)().t,a=(0,l.useRouter)(),s=r(n?"Create offer to buy BTC":"Create offer to sell BTC"),c=r(n?"Save offer to buy BTC":"Save offer to sell BTC"),d=i?(0,o.jsx)(P.Z,{color:"error",preset:"c-12r",mb:4,children:i}):null;return(0,o.jsxs)("div",{className:N().switchButtons,children:[(0,o.jsx)(Ze.Z,{mb:4,children:(0,o.jsx)(_.ZP.Item,{name:"offer.enabled",children:(0,o.jsx)(ce.Z,{isSelected:!0,children:(0,o.jsxs)("div",{className:N().switchContent,children:[(0,o.jsx)(P.Z,{weight:"medium",color:"primaryBrown",children:r("Enable offer after creation")}),(0,o.jsx)(P.Z,{block:!0,color:"grey",children:r("Your offer will be active and available to other users. Disable to save as a\ndraft.")})]})})})}),(0,o.jsx)(Ze.Z,{mb:4,children:(0,o.jsx)(_.ZP.Item,{name:"offer.private",children:(0,o.jsx)(ce.Z,{children:(0,o.jsxs)("div",{className:N().switchContent,children:[(0,o.jsx)(P.Z,{weight:"medium",color:"primaryBrown",children:r("Make offer private")}),(0,o.jsx)(P.Z,{block:!0,color:"grey",children:r("Your offer will only be accessible by the link and not displayed in the\npublic offer list.")})]})})})}),d,(0,o.jsxs)("div",{className:N().submitGroup,children:[(0,o.jsx)(_.ZP.Submit,{isWide:!0,weight:"medium",size:12,variant:"primary",children:t?c:s}),(0,o.jsx)(J.ZP,{isWide:!0,weight:"medium",size:12,variant:"primaryOutline",onPress:function(){return a.back()},children:r("Cancel changes")})]})]})},He=t(60386),Le=t(94470),Oe=t(10832),Ae=t.n(Oe),Re=function(e){var n,t=e.elementType,i=void 0===t?"span":t,r=e.className,a=e.isIndeterminate,s=e.isSelected,l=e.isHovered,c=e.children;return(0,o.jsx)(i,{className:(0,x.Z)(Ae().checkmark,(n={},(0,B.Z)(n,Ae().indeterminate,a),(0,B.Z)(n,Ae().selected,s),(0,B.Z)(n,Ae().hovered,l),n),r),children:c})},qe=t(67023),We=t.n(qe),Ue=function(e){var n=e.children,t=e.isIndeterminate,a=e.value,l=e.isSelected,c=e.className,d=(0,Le.l)((0,r.Z)((0,i.Z)({},e),{isSelected:(0,y.Xq)(a)?a:l})),u=(0,s.useRef)(null),f=(0,He.O)(e,d,u).inputProps;return(0,o.jsxs)("label",{className:(0,x.Z)(We().checkbox,c),children:[(0,o.jsx)(Re,{elementType:"label",isIndeterminate:t,isSelected:d.isSelected,children:(0,o.jsx)("input",(0,r.Z)((0,i.Z)({className:We().input},f),{ref:u}))}),n]})},Ye=function(e){var n,t,i=e.onFullTime,r=e.isRoundClock,a=(0,m.Z)().t,s=(0,y.w6)(0,48).map((function(e){return{text:(0,y.bx)(30*e),value:"".concat((0,y.bx)(30*e))}})),l=null===(n=s[0])||void 0===n?void 0:n.value,c=null===(t=s[0])||void 0===t?void 0:t.value;return(0,o.jsxs)("div",{className:N().hoursField,children:[(0,o.jsx)(P.Z,{weight:"medium",color:"primaryBrown",children:a("Available hours")}),(0,o.jsx)(P.Z,{block:!0,color:"grey",children:a("Define the timeframes for an offer to be active. An offer is automatically disabled if you have not been online for {{count}} days.",{count:10})}),(0,o.jsxs)("div",{className:N().hoursContent,children:[(0,o.jsx)(_.ZP.Item,{name:"offer.round_the_clock",children:(0,o.jsx)(Ue,{isSelected:r,"aria-label":"24HoursAccess",onChange:function(e){i&&i(e)},children:a("24 hours access")})}),(0,o.jsxs)("div",{className:N().hoursGroup,children:[(0,o.jsx)(_.ZP.Item,{name:"offer.working_hours_start",isDisabled:r,defaultValue:l,children:(0,o.jsx)($.Z,{w:32,variant:"white",items:s})}),"-",(0,o.jsx)(_.ZP.Item,{name:"offer.working_hours_end",isDisabled:r,defaultValue:c,children:(0,o.jsx)($.Z,{w:32,variant:"white",items:s})})]})]}),(0,o.jsxs)("div",{className:N().hoursContent,children:[(0,o.jsx)(_.ZP.Item,{name:"offer.workdays_only",children:(0,o.jsxs)(Ue,{"aria-label":"workdaysOnly",children:[" ",a("Workdays only.")]})}),(0,o.jsx)(P.Z,{color:"grey",children:a("Offer will be disabled on Saturdays and Sundays.")})]})]})},Ke=t(25588),$e=function(){return(0,Ke.R)().data||[]},Qe=function(e){var n,t,i,r=e.value,a=(0,m.Z)().t,s=$e(),l=[{text:"Global",value:"Global"}].concat((0,_e.Z)(s.map((function(e){return{text:e.name,value:e.code}})))),c=r?null===(n=null===l||void 0===l?void 0:l.find((function(e){return String(e.value)===String(r)})))||void 0===n?void 0:n.text:"",d=(0,_.Gc)().formState,u=null===d||void 0===d||null===(t=d.errors)||void 0===t||null===(i=t.offer)||void 0===i?void 0:i.country_code;return(0,o.jsxs)(me,{title:a("Location"),caption:c,isOpen:!!u||void 0,children:[(0,o.jsx)(P.Z,{mb:1.5,color:"grey",children:a('The list of payment methods depends on the "Country" setting.')}),(0,o.jsx)(se.Z.Item,{name:"offer.country_code",defaultValue:"Global",children:(0,o.jsx)($.Z,{w:48,variant:"white",items:l})})]})},Je=t(90837),Xe=function(e){var n,t,i=e.value,r=(0,m.Z)().t,a=i?r("{{count}} min",{count:i}):"",s=(0,_.Gc)().formState,l=null===s||void 0===s||null===(n=s.errors)||void 0===n||null===(t=n.offer)||void 0===t?void 0:t.payment_window_minutes;return(0,o.jsxs)(me,{title:r("Payment window"),caption:a,isOpen:!!l||void 0,children:[(0,o.jsxs)(P.Z,{mb:1.5,color:"grey",children:[r("The time within which the Seller must receive the payment from the Buyer. When the time runs out, a\ndispute can be started.")," ",(0,o.jsx)(Je.Z,{variant:"link",href:"/pages/faq#payment_window",children:r("How to set payment window?")})]}),(0,o.jsx)(se.Z.Item,{name:"offer.payment_window_minutes",pattern:"^[0-9]*$",maxLength:5,defaultValue:"90",children:(0,o.jsx)(Q.Z,{validateOnType:!0,w:48,variant:"white",inputMode:"numeric",postfix:"min","aria-label":"offerPaymentWindowMinutes"})})]})},en=function(e){var n,t,i,r=e.value,a=(0,m.Z)().t,s=(0,_.Gc)().formState,l=(0,p.Z)().user;if(!l)return null;var c=(0,y.w6)(l.canHaveZeroConfirmations?0:1,7).map((function(e){return{text:"".concat(e," confirmation"),value:"".concat(e)}})),d=r?null===(n=null===c||void 0===c?void 0:c.find((function(e){return String(e.value)===String(r)})))||void 0===n?void 0:n.text:"",u=null===s||void 0===s||null===(t=s.errors)||void 0===t||null===(i=t.offer)||void 0===i?void 0:i.confirmations;return(0,o.jsxs)(me,{title:a("BTC confirmations"),caption:d,isOpen:!!u||void 0,children:[(0,o.jsx)(P.Z,{mb:1.5,color:"grey",children:a("The number of transaction confirmations you will have to wait when deposing Bitcoin to escrow. More\nconfirmations ensure better security but require more time.")}),(0,o.jsx)(se.Z.Item,{required:!0,name:"offer.confirmations",defaultValue:"1",children:(0,o.jsx)($.Z,{w:48,variant:"white",items:c})})]})},nn=function(){var e,n,t,i,r=(0,m.Z)().t,a=(0,_.Gc)().formState,s=(null===a||void 0===a||null===(e=a.errors)||void 0===e||null===(n=e.offer)||void 0===n?void 0:n.title)||(null===a||void 0===a||null===(t=a.errors)||void 0===t||null===(i=t.offer)||void 0===i?void 0:i.description);return(0,o.jsx)(me,{title:r("Offer description"),isOpen:!!s||void 0,children:(0,o.jsxs)(Ze.Z,{flex:"col",gap:"2",children:[(0,o.jsx)(se.Z.Item,{label:r("Title"),maxLength:100,name:"offer.title",children:(0,o.jsx)(Q.Z,{showCounter:!0,variant:"white",caption:r("Displayed in offer list"),"aria-label":"offerTitle"})}),(0,o.jsx)(se.Z.Item,{label:r("Description"),maxLength:5e3,name:"offer.description",children:(0,o.jsx)(Q.Z,{showCounter:!0,multiLine:!0,variant:"white",rows:4,"aria-label":"offerDescription"})})]})})},tn=function(e,n){return{title:e,content:n}},rn=function(e){var n=e.displayMethods,t=void 0===n?[]:n,i=e.price,r=e.currencyCode,a=e.provider,s=e.amountMin,l=e.amountMax,c=e.total,u=e.stopLoss,f=e.firstTrade,v=e.deviation,h=e.isBuy,p=e.initialBalance,_=e.sign,j=e.isPriceFixed,b=(0,K.dD)(),g=(0,m.Z)().t,Z="+"===_?"calmGreen":"orangeBg",w=(0,o.jsxs)(o.Fragment,{children:["0"===i?"-":i," ",r," ",b||j?"":"|",!j&&(0,o.jsxs)("div",{className:N().priceContent,children:[a," ",v&&(0,o.jsx)(ze.Z,{status:Z,preset:"s2b",variant:"solid",children:v})]})]}),C=(0,o.jsxs)(o.Fragment,{children:[(0,y.tD)([s,l])," ",l||s?r:"- ".concat(r)]}),S=(0,o.jsxs)(o.Fragment,{children:[c," ",r,p&&(0,o.jsxs)(ze.Z,{status:"darkGrey",preset:"l-12m",variant:"solid",children:["out of ",p," ",r]})]}),T=(0,o.jsxs)(o.Fragment,{children:[u," ",r]}),M=(0,o.jsxs)(o.Fragment,{children:[f," ",r]}),I=(0,o.jsx)(o.Fragment,{children:t.map((function(e){return(0,o.jsx)(Te.Z,{type:e.type,name:e.name},e.name)}))}),P=[!!i&&tn(g("Price"),w),tn(g("Amount"),C),c&&tn(g("Offer balance"),S),!!u&&tn(g("Stop-loss value"),T),!!f&&tn(g("First-trade limit"),M),tn(g("Payment methods"),I)].filter(Boolean);return(0,o.jsxs)("div",{children:[(0,o.jsx)(d.Z,{uppercase:!0,level:5,color:"primaryBrown",children:g(h?"Offer to buy BTC":"Offer to sell BTC")}),(0,o.jsx)("div",{className:N().infoContent,children:P.map((function(e){return(0,o.jsxs)("div",{className:(0,x.Z)("Payment methods"===e.title?N().infoRowPayments:N().infoRow),children:[(0,o.jsx)("div",{className:N().infoRowTitle,children:e.title}),(0,o.jsx)("div",{className:N().infoRowItem,children:e.content})]},e.title)}))})]})},an=function(e){var n=e.currencyType,t=e.countryCode,i=e.paymentWindow,r=e.confirmations,a=e.displayMethods,s=e.price,l=e.initialBalance,c=e.provider,d=e.amountMin,u=e.amountMax,f=e.balance,m=e.stopLoss,v=e.firstTrade,h=e.currencyCode,p=e.deviation,x=e.sign,_=e.unit,b=e.isBuy,g=e.isPriceFixed,Z=e.isRoundClock,w=e.onFullTime,C=(0,ve.U)(),S="btc"===n,T=C.format(s),M=d?C.format(S?d*s:d):"",I=u?C.format(S?u*s:u):"",P=(0,y.He)(f),k=null!==P?C.format(P):null,F=(0,y.He)(l),B=null!==F?C.format(F):null,V=(0,y.He)(m),z=V?C.format(V):"",D=(0,y.He)(v),E=D?C.format(D):"",G=C.format((0,y.He)(p)||0),H="currency"==_?" ".concat(h):_,L=(0,y.He)(p)?"".concat(x).concat(G).concat(H):"";return(0,o.jsx)(le.Z,{variant:"grey",children:(0,o.jsxs)("div",{className:N().columnContentLayout,children:[(0,o.jsx)(Ye,{isRoundClock:Z,onFullTime:w}),(0,o.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,o.jsx)(Qe,{value:t}),(0,o.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,o.jsx)(Xe,{value:i}),(0,o.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,o.jsx)(en,{value:r}),(0,o.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,o.jsx)(nn,{}),(0,o.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,o.jsx)(rn,{isBuy:b,displayMethods:a,price:T,total:k,initialBalance:B,provider:c,currencyCode:h,amountMin:M,amountMax:I,stopLoss:z,firstTrade:E,deviation:L,sign:x,isPriceFixed:g})]})})},on=function(e){var n,t,i,r,a,s,l=e.price,c=e.currencyCode,d=e.currencyMultiplier,u=e.isFixed,f=e.deviation,v=e.unit,h=e.sign,p=(0,m.Z)().t,j=(0,ve.U)({maximumFractionDigits:2}),b=(0,K.BF)(),g=(0,y.He)(f)||0,Z=function(e){return 1!==d?"(".concat(j.format(e*d)," USD)"):""},w=Z(l),C=(0,_.Gc)().formState,S=null===C||void 0===C||null===(n=C.errors)||void 0===n||null===(t=n.offer)||void 0===t||null===(i=t.exchange_price_deviation)||void 0===i?void 0:i.message,T=null===C||void 0===C||null===(r=C.errors)||void 0===r||null===(a=r.offer)||void 0===a||null===(s=a.price)||void 0===s?void 0:s.message;return u?(0,o.jsxs)(P.Z,{preset:"b2-14m",children:[!T&&p("Fixed price won\u2019t change with the market price")," ",w?(0,o.jsx)(ze.Z,{isBlock:"md"==b,status:T?"error":"lightGreen",variant:"solid",children:w}):null]}):(0,o.jsxs)(P.Z,{preset:"b2-14m",className:Pe().priceCaptionTitle,children:[!S&&(0,o.jsx)(P.Z,{className:Pe().priceTitle,children:p("Applicable rate")}),(0,o.jsx)(ze.Z,{isBlock:"md"==b,status:S?"error":"lightGreen",variant:"solid",className:(0,x.Z)(!S&&Pe().priceCaptionBadge),children:function(){var e="".concat(j.format(l)," ").concat(c," ").concat(w),n="+"===h?100+g:g>=100?100:100-g,t="+"===h?l-g:l+g,i=Z(l/n*100),r=Z(t),a="".concat(j.format(l/n*100)," ").concat(c," ").concat(i," * ").concat(n,"% = ").concat(e),o="".concat(j.format(t)," ").concat(c," ").concat(r," ").concat(h," ").concat(f," ").concat(c," = ").concat(e);return f?"%"===v?a:o:e}()})]})},sn=t(4982),ln=function(){var e=(0,m.Z)().t,n=[{title:"1",text:e("offers_create_step_1_title"),active:!0},{title:"2",text:e("offers_create_step_2_title")},{title:"3",text:e("offers_create_step_3_title")},{title:"4",text:e("offers_create_step_4_title")},{title:"5",text:e("offers_create_step_5_title")}];return(0,o.jsx)(sn.Z,{steps:n})},cn=function(e){var n,t,i,r,a,l=e.side,c=e.defaultValues,d=e.isEdit,u=e.onSubmit,f="buy"===l,v=(0,m.Z)().t,h=S(),p=h.currencies,Z=h.isCurrenciesReady,C=w(),I=C.providers,P=C.isProvidersReady,F=(0,b.Z)(),B=F.paymentMethods,V=F.types,z=F.isPaymentMethodsReady,D=(0,g.Z)(),E=D.paymentInstructions,G=D.isPaymentInstructionsReady,H=p.map((function(e){return{value:e.code,text:e.code}})),L=I.map((function(e){return{value:e.name,text:e.name}})),O=(null===c||void 0===c||null===(n=c.offer)||void 0===n?void 0:n.min_amount)!==(null===c||void 0===c||null===(t=c.offer)||void 0===t?void 0:t.max_amount)?"range":"fixed",A=(0,s.useState)(O),R=A[0],q=A[1],W=(0,s.useState)("stable"),K=W[0],$=W[1],Q=(0,s.useState)(""),J=Q[0],X=Q[1],ee="fixed"===R,ne=(0,_.cI)({defaultValues:c,mode:"onSubmit",shouldUseNativeValidation:!0}),te=ne.watch("offer.price_source")||"exchange_rate",ie=ne.watch("offer.currency_code"),re=ne.watch("offer.exchange_rate_provider"),se=(0,y.He)(ne.watch("offer.price")),le=(0,y.He)(ne.watch("offer.min_amount")),ce=(0,y.He)(ne.watch("offer.max_amount")),de=ne.watch("offer.exchange_price_sign"),ue=ne.watch("offer.exchange_price_unit"),fe=ne.watch("offer.exchange_price_deviation")||"",me=ne.watch("offer.payment_method_ids"),ve=ne.watch("offer.payment_method_instruction_ids"),he=ne.watch("offer.round_the_clock",!0),_e=B.filter((function(e){var n=(0,y.He)(e.id);return!!n&&(null===me||void 0===me?void 0:me.includes(n))})),ye=E.filter((function(e){var n=(0,y.He)(e.id);return!!n&&((null===ve||void 0===ve?void 0:ve.includes(n))&&e.paymentMethod)})).map((function(e){return e.paymentMethod})).filter((function(e){return!!e})),je=re||(null===(i=L[0])||void 0===i?void 0:i.value),be=ie||"USD",Ze=de||"+",we=ue||"%",Ce=fe||"",Se="fixed_value"===te,Te=T({provider:je,assetCode:(null===c||void 0===c||null===(r=c.offer)||void 0===r?void 0:r.asset_code)||"BTC",currencyCode:be,deviation:fe||"0",sign:de||"+",unit:ue||"%",skip:Se}),Me=M({currencyCode:be}),Ie=v(Se?"Tied to a fixed rate":"Tied to an exchange rate"),Ne=(Se?se:Te)||0,Pe=ne.watch("offer.balance"),ke=(null===c||void 0===c||null===(a=c.offer)||void 0===a?void 0:a.balance)===Pe?ne.watch("offer.initial_balance"):Pe,Fe=function(e){(0,_.Ih)({data:e,ns:"offer",onError:function(e,n){"base"===e?X(n):ne.setError(e,{message:n})}})};(0,s.useEffect)((function(){d||ne.setValue("offer.workdays_only",!0)}),[d]);var Be=(0,o.jsx)(U,{inInput:!0,tabs:[{title:be,value:"stable"},{title:"BTC",value:"btc"}],defaultValue:K,onChange:function(e){if($(e),"btc"===e&&Ne){if(le){var n=(0,y._z)(String(le/Ne));n&&ne.setValue("offer.min_amount",String(n))}if(ce){var t=(0,y._z)(String(ce/Ne));t&&ne.setValue("offer.max_amount",String(t))}}else{if(le){var i=(0,y._z)(String(Ne*le),2);i&&ne.setValue("offer.min_amount",String(i))}if(ce){var r=(0,y._z)(String(Ne*ce),2);r&&ne.setValue("offer.max_amount",String(r))}}}}),ze=function(e){return(0,o.jsx)(Ee,{isFixed:Se,min:le,max:ce,price:Ne,type:K,currencyMultiplier:Me,currencyCode:be,badgeStatus:e})},De=(0,o.jsx)(U,{inInput:!0,tabs:[{title:v("Floating rate"),value:"exchange_rate"},{title:v("Fixed rate"),value:"fixed_value"}],defaultValue:te,className:N().switchContainer,onChange:function(e){ne.setValue("offer.price_source",e),ne.setValue("offer.currency_code",be),"fixed_value"===e&&(ne.resetField("offer.exchange_rate_provider"),ne.resetField("offer.exchange_price_sign"),ne.resetField("offer.exchange_price_deviation"),ne.resetField("offer.exchange_price_unit")),"exchange_rate"===e&&(ne.resetField("offer.price"),ne.setValue("offer.exchange_rate_provider",je),ne.setValue("offer.exchange_price_sign",Ze),ne.setValue("offer.exchange_price_unit",we),ne.setValue("offer.exchange_price_deviation",Ce))}}),He=(0,o.jsx)(U,{inInput:!0,tabs:[{title:v("Fixed amount"),value:"fixed"},{title:v("Amount range"),value:"range"}],defaultValue:R,className:N().switchContainer,onChange:function(e){q(e),"fixed"===e&&ne.setValue("offer.max_amount",ne.watch("offer.min_amount")),"range"===e&&ne.setValue("offer.max_amount",ne.watch("offer.min_amount"))}});return(0,o.jsxs)(_.ZP,{state:ne,onSubmit:function(e){if(X(""),u){var n,t=e.offer||{};t.enabled=null===(n=t.enabled)||void 0===n||n;var i=(Se?(0,y.He)(t.price):Te)||0;if("btc"===K&&i){var r=(0,y.He)(t.max_amount),a=(0,y.He)(t.min_amount);r&&(t.max_amount=String(r*i)),a&&(t.min_amount=String(a*i))}return u({offer:t}).catch((function(e){var n;"error"in e&&"data"in e.error&&Fe(null===(n=e.error)||void 0===n?void 0:n.data)}))}},onError:Fe,children:[(0,o.jsxs)("section",{className:N().layout,children:[(0,o.jsxs)("main",{className:N().layoutCol,children:[(0,o.jsxs)(k,{label:Ie,labelPostfix:De,caption:(0,o.jsx)(on,{isFixed:Se,price:Ne,currencyCode:be,currencyMultiplier:Me,deviation:fe,sign:de,unit:ue}),children:[!Se&&P&&Z&&L.length&&(0,o.jsx)(ae,{sign:de,deviation:fe,unit:ue||we,provider:je,providerItems:L,currencieItems:H,currencyCode:be,onClose:function(){ne.setValue("offer.exchange_price_deviation","")},onChangeSign:function(e){ne.setValue("offer.exchange_price_sign",e)},onCurrencyChange:function(e){"%"!==ue&&ne.setValue("offer.exchange_price_unit",e)}}),Se&&(0,o.jsx)(oe,{currencieItems:H})]}),(0,o.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,o.jsx)(k,{label:v(f?"Amount you want to buy":"Amount you want to sell"),labelPostfix:He,children:(0,o.jsxs)("div",{style:{width:"100%"},children:[!ee&&(0,o.jsx)(pe,{isEdit:d,currencyCode:be,currencyType:K,currencyTypeSwitch:Be,caption:ze}),ee&&(0,o.jsx)(xe,{isEdit:d,currencyCode:be,currencyType:K,currencyTypeSwitch:Be,caption:ze})]})}),(0,o.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),f&&z&&B.length&&(0,o.jsx)(k,{children:(0,o.jsx)(_.ZP.Item,{isWide:!0,name:"offer.payment_method_ids",required:"".concat(v("These fields are required")),children:(0,o.jsx)(ge,{paymentMethods:B,types:V})})}),!f&&z&&G&&(0,o.jsx)(k,{children:(0,o.jsx)(_.ZP.Item,{isWide:!0,name:"offer.payment_method_instruction_ids",required:"".concat(v("Payment instruction is required")),children:(0,o.jsx)(Ve,{paymentInstructions:E,paymentMethods:B,types:V})})})]}),(0,o.jsx)("aside",{className:(0,x.Z)(N().layoutCol,N().stickyCol),children:(0,o.jsx)(an,{isBuy:f,isPriceFixed:Se,isRoundClock:he,countryCode:ne.watch("offer.country_code"),paymentWindow:ne.watch("offer.payment_window_minutes"),confirmations:ne.watch("offer.confirmations"),stopLoss:ne.watch("offer.stop_loss_value"),firstTrade:ne.watch("offer.first_trade_limit"),initialBalance:ke,balance:Pe,displayMethods:f?_e:ye,price:Ne,provider:je,amountMin:le,amountMax:ce,currencyCode:be,deviation:fe,currencyType:K,sign:de,unit:ue,onFullTime:function(e){e?(ne.setValue("offer.working_hours_start","00:00"),ne.setValue("offer.working_hours_end","00:00")):(ne.resetField("offer.working_hours_start"),ne.resetField("offer.working_hours_end"))}})}),(0,o.jsx)(Ge,{error:J,isBuy:f,isEdit:d})]}),(0,o.jsx)(ln,{}),(0,o.jsx)(_.ZP.Item,{required:!0,name:"offer.side",defaultValue:l,children:(0,o.jsx)(Y,{})}),(0,o.jsx)(_.ZP.Item,{required:!0,name:"offer.price_source",defaultValue:"exchange_rate",children:(0,o.jsx)(Y,{value:te})})]})},dn=function(e){var n=e.children,t=e.title;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.W,{children:(0,o.jsx)(u.Z.Heading,{children:(0,o.jsx)(d.Z,{uppercase:!0,level:1,children:t})})}),(0,o.jsx)(u.W,{containerSize:"sm",children:(0,o.jsx)(u.Z.Content,{isQuiet:!0,p:0,children:n})})]})},un=function(e){var n=e.offer,t=e.side,c=e.isEdit,d=(0,a.Z)((0,v.Ly)(),1)[0],u=(0,a.Z)((0,v.o$)(),1)[0],f=null===n||void 0===n?void 0:n.id,m=(0,v.p5)(f,{skip:!f}),p=(0,l.useRouter)(),x=(0,s.useMemo)((function(){if(n)return(0,v.c)(n)}),[n]);return(0,o.jsx)(cn,{side:t,isEdit:c,defaultValues:x,onSubmit:function(e){if(e){var t=function(e){var n,t,i,r;(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.offer)||void 0===t?void 0:t.id)&&(m.refetch(),p.push("/offers/".concat(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(r=i.offer)||void 0===r?void 0:r.id)))};return c&&n?u((0,r.Z)((0,i.Z)({},e),{id:n.id})).then((function(e){return(0,h.L)(e)})).then((function(e){return t(e)})):d(e).then((function(e){return(0,h.L)(e)})).then((function(e){return t(e)}))}return Promise.resolve()}})},fn=function(){return(0,o.jsxs)("div",{style:{display:"flex",gap:"24px"},children:[(0,o.jsx)(f.Z,{height:"6",style:{width:"50%"}}),(0,o.jsx)(f.Z,{height:"6",style:{width:"50%"}})]})},mn=function(e){var n=e.title,t=e.offer,i=e.isEdit,r=(0,l.useRouter)().asPath,a=(0,m.Z)().t,d=(0,p.Z)().hasUser,u=r.includes("#sell")?"sell":"buy",f=(0,s.useState)((null===t||void 0===t?void 0:t.side)||u),v=f[0],h=f[1],x=!d||i&&!t,_=i?["buy"===(null===t||void 0===t?void 0:t.side)?"sell":"buy"]:void 0;return(0,o.jsx)(dn,{title:n,children:(0,o.jsxs)(c.Z,{variant:"transparent",defaultKey:v,disabledKeys:_,onChange:function(e){h(e)},children:[(0,o.jsx)(c.Z.Tab,{title:a("I want to buy BTC"),children:x?(0,o.jsx)(fn,{}):(0,o.jsx)(un,{isEdit:i,side:v,offer:t})},"buy"),(0,o.jsx)(c.Z.Tab,{title:a("I want to sell BTC"),children:x?(0,o.jsx)(fn,{}):(0,o.jsx)(un,{isEdit:i,side:v,offer:t})},"sell")]})})}},43092:function(e,n,t){"use strict";t.d(n,{O:function(){return i}});var i=function(){(null===window||void 0===window?void 0:window.location)&&(window.location.href="/sign_in")}},14174:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var i=t(14924),r=t(85893),a=t(67294),o=t(86010),s=t(51621),l=t.n(s),c=function(e){var n=e.children;return(0,r.jsx)(r.Fragment,{children:n})},d=Object.assign((function(e){var n=e.children,t=e.variant,s=void 0===t?"solid":t,d=e.defaultKey,u=void 0===d?"":d,f=e.disabledKeys,m=void 0===f?[]:f,v=e.onChange,h=e.isWithHover,p=a.Children.map(n,(function(e,n){if(e.type!==c)throw new Error("Tabs only accepts Tabs.Tab elements");return{index:n,key:e.key,title:e.props.title}})),x=(0,a.useState)(p[0].key),_=x[0],y=x[1],j=p.find((function(e){return e.key===_}));if((0,a.useEffect)((function(){u&&y(u)}),[u]),!j)return null;var b,g=n[j.index];return(0,r.jsxs)("div",{className:(0,o.Z)(l().container,(b={},(0,i.Z)(b,l()["variant--".concat(s)],!!s),(0,i.Z)(b,l().withHover,h),b)),children:[(0,r.jsx)("div",{className:l().tabItems,children:p.map((function(e){var n,t=e.key,a=e.title;return(0,r.jsxs)("div",{className:(0,o.Z)(l().tabItem,(n={},(0,i.Z)(n,l().tabItemActive,_===t),(0,i.Z)(n,l().tabItemDisabled,m.includes(t)),n)),onClick:function(){return function(e){e&&e!==_&&(m.includes(e)||(y(e),v&&v(e)))}(t)},children:[a,(0,r.jsx)("div",{className:(0,o.Z)(l().underline,(0,i.Z)({},l().activeUnderline,_===t))})]},t)}))}),(0,r.jsx)("div",{className:l().body,children:g})]})}),{Tab:c,displayName:"Tabs"});d.displayName="Tabs";var u=d},93349:function(e){e.exports={content:"paymentInstructions_content___BSJM",details:"paymentInstructions_details__FYh4k",priceCaptionTitle:"paymentInstructions_priceCaptionTitle__zK_MN",priceTitle:"paymentInstructions_priceTitle__DjTIs"}},33780:function(e){e.exports={groupContainer:"offerCreate_groupContainer__uSmPp",rateFieldsGroup:"offerCreate_rateFieldsGroup__lEgwz",rateFieldsMargin:"offerCreate_rateFieldsMargin__yzCLA",errorContent:"offerCreate_errorContent__pCSDo",errorMsg:"offerCreate_errorMsg__1NRoQ",rateFields:"offerCreate_rateFields__7ojbp",deviation:"offerCreate_deviation__A5yTd",formGroup:"offerCreate_formGroup__c6Ate",formGroupLabel:"offerCreate_formGroupLabel__Sy3z1",layoutCol:"offerCreate_layoutCol__iwOOF",stickyCol:"offerCreate_stickyCol__nswLF",switchButtons:"offerCreate_switchButtons__lBWG2",hoursField:"offerCreate_hoursField__t2nfd",hoursContent:"offerCreate_hoursContent__M4ace",hoursGroup:"offerCreate_hoursGroup__VCT_2",infoContent:"offerCreate_infoContent__vcw04",infoRow:"offerCreate_infoRow__bq48_",priceContent:"offerCreate_priceContent__EYUML",infoRowTitle:"offerCreate_infoRowTitle__fuggJ",infoRowItem:"offerCreate_infoRowItem__2e7sc",caption:"offerCreate_caption___5YIE",amountGroup:"offerCreate_amountGroup__S2HEr",paymentPanel:"offerCreate_paymentPanel__8abnz",paymentBuyContent:"offerCreate_paymentBuyContent__vavmp",amountContainer:"offerCreate_amountContainer__mT6kR",advancedAmount:"offerCreate_advancedAmount__x3PNB",advancedAmountContent:"offerCreate_advancedAmountContent__Blp4D",switchContent:"offerCreate_switchContent__p1oWm",rangeAmount:"offerCreate_rangeAmount__Uc_xc",rangeAmountGroup:"offerCreate_rangeAmountGroup__DqCrl",columnContentLayout:"offerCreate_columnContentLayout__klWM1",submitGroup:"offerCreate_submitGroup__A621_",paymentMethodItem:"offerCreate_paymentMethodItem__Nisbf",switchContainer:"offerCreate_switchContainer__LPiYh",infoRowPayments:"offerCreate_infoRowPayments__c_4_x",addMarginButton:"offerCreate_addMarginButton__3DgGA",layout:"offerCreate_layout__ZvKwz",rateProvider:"offerCreate_rateProvider__ct1fd"}},67023:function(e){e.exports={checkbox:"checkbox_checkbox__J6io9",input:"checkbox_input__tzL0t"}},10832:function(e){e.exports={checkmark:"checkmark_checkmark__iLnY5",selected:"checkmark_selected__e14Nt",indeterminate:"checkmark_indeterminate__sT1MF"}},64582:function(e){e.exports={container:"expander_container__N8_vH",titleContainer:"expander_titleContainer__z0sN9",icon:"expander_icon__kYDOW",open:"expander_open__sU27w",caption:"expander_caption__KkX5w",unvisible:"expander_unvisible__Tt493",content:"expander_content__zHoNB",visible:"expander_visible__wn0JK"}},95979:function(e){e.exports={tabs:"tabSwitch_tabs__jHO8_",disabled:"tabSwitch_disabled__s187W",tab:"tabSwitch_tab__Hse1f",text:"tabSwitch_text__kpc5C","size--base":"tabSwitch_size--base__7LMb3","size--sm":"tabSwitch_size--sm__ocMOf",input:"tabSwitch_input__MQlRY"}},51621:function(e){e.exports={container:"tabs_container__LPpGD",tabItems:"tabs_tabItems__txghQ",tabItem:"tabs_tabItem__V2aqi",withHover:"tabs_withHover__1PQMI",tabItemActive:"tabs_tabItemActive__tuP2b",underline:"tabs_underline__baSMP",body:"tabs_body__8l3KE","variant--transparent":"tabs_variant--transparent__x3Y85",tabItemDisabled:"tabs_tabItemDisabled__sjFiz",activeUnderline:"tabs_activeUnderline__8yOGc"}}}]);