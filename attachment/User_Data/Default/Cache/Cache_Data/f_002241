(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{65937:function(e,n,t){"use strict";t.d(n,{Z:function(){return mn}});var i=t(26042),r=t(69396),o=t(828),a=t(85893),s=t(67294),l=t(11163),c=t(14174),d=t(97153),u=t(84946),f=t(91930),m=t(20709),v=t(21580),h=t(72600),p=t(53183),x=t(86010),_=t(21209),y=t(69095),j=t(57533),b=t(98336),g=t(12518),Z=t(14562),w=function(){var e=(0,Z.A)();return{providers:e.data||[],isProvidersReady:"fulfilled"===e.status}},C=t(52209);var S=function(){var e=(0,C.K)();return{currencies:(null===e||void 0===e?void 0:e.data)||[],isCurrenciesReady:"fulfilled"===e.status}};var T=function(e){var n=e.provider,t=e.assetCode,i=e.currencyCode,r=e.deviation,o=e.sign,a=e.unit,s=e.skip;return(0,v.XV)({provider:n,asset_code:t,currency_code:i,deviation:r,sign:o,unit:a},{skip:!n||!i||null===(0,y.He)(r)||s}).currentData||0};var M=function(e){var n=e.currencyCode;return(0,v.F0)({currency_code:n},{skip:"USD"===n}).currentData||1},I=t(33780),N=t.n(I),P=t(23585),k=function(e){var n=e.caption,t=e.label,i=e.labelPostfix,r=e.children;return(0,a.jsxs)("div",{className:N().groupContainer,children:[t&&(0,a.jsxs)("div",{className:N().formGroupLabel,children:[(0,a.jsx)(P.Z,{color:"primaryBrown",weight:"medium",children:t}),i]}),(0,a.jsx)("div",{className:N().formGroup,children:r}),n&&(0,a.jsx)("div",{className:N().caption,children:n})]})},F=t(99534),V=t(14924),z=t(34140),B=t(23830),D=t(25279),E=t(92234),G=(0,s.createContext)({}),H=t(24419),L=t(28628),O=t(1155),A=t(95979),R=t.n(A),q=function(e){var n,t=e.isEmphasized,o=e.isRequired,s=e.isDisabled,l=e.label,c=e.validationState,d=e.children,u=e.orientation,f=void 0===u?"horizontal":u,m=e.size,v=void 0===m?"base":m,h=e.className,p=(0,D.w)(e),_=(0,B.a)(e,p),y=_.radioGroupProps,j=_.labelProps,b={className:(0,x.Z)(h,R().tabs,(n={},(0,V.Z)(n,R().required,o),(0,V.Z)(n,R().horizontal,"horizontal"===f),(0,V.Z)(n,R().disabled,s),(0,V.Z)(n,R()["size--".concat(v)],v),n))};return(0,a.jsxs)("div",(0,r.Z)((0,i.Z)({},(0,E.dG)(b,y)),{children:[(0,a.jsx)(z.T,{children:(0,a.jsx)("span",(0,r.Z)((0,i.Z)({className:R().label,"aria-hidden":"true"},j),{children:l}))}),(0,a.jsx)(G.Provider,{value:{isEmphasized:t,validationState:c,state:p},children:d})]}))};q.Tab=(0,s.forwardRef)((function(e,n){var t,o=e.isDisabled,l=e.children,c=e.autoFocus,d=(0,H.XI)({isDisabled:o}),u=d.hoverProps,f=d.isHovered,m=(0,s.useRef)(null),v=(0,O.rV)(n,m),h=(0,s.useContext)(G),p=h.isEmphasized,_=h.validationState,y=h.state,j=(0,B.x)((0,r.Z)((0,i.Z)({},e,h),{isDisabled:o}),y,m).inputProps;return(0,a.jsxs)("label",(0,r.Z)((0,i.Z)({},u),{ref:v,className:(0,x.Z)(R().tab,(t={},(0,V.Z)(t,R().hover,f),(0,V.Z)(t,R().quiet,!p),(0,V.Z)(t,R().invalid,"invalid"===_),(0,V.Z)(t,R().disabled,y.isDisabled),t)),children:[(0,a.jsx)(L.tE,{focusRingClass:R().focusRing,autoFocus:c,children:(0,a.jsx)("input",(0,r.Z)((0,i.Z)({className:R().input},j),{ref:m}))}),(0,a.jsx)("span",{className:R().text,children:l})]}))}));var W=q,U=function(e){var n=e.tabs,t=e.inInput,o=(0,F.Z)(e,["tabs","inInput"]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(W,(0,r.Z)((0,i.Z)({},o),{size:t?"sm":void 0,"aria-label":"fieldSwitch",children:n.map((function(e){return(0,a.jsx)(W.Tab,{value:e.value,children:e.title},e.value)}))}))})},Y=function(e){var n=e.name,t=e.value,i=e.defaultValue;return"string"===typeof i?(0,a.jsx)("input",{type:"hidden",name:n,defaultValue:i}):(0,a.jsx)("input",{type:"hidden",name:n,value:t})},K=t(84647),$=t(872),Q=t(42004),J=t(30658),X=t(94215),ee=t(91473),ne=t(4304),te=function(e){var n=e.onPress,t=e.isDisabled,i=(0,m.Z)().t,r=(0,K.dD)();return(0,a.jsx)(J.ZP,{icon:(0,a.jsx)(X.Z,{color:t?"grey600":"primary"}),iconSize:"M",variant:"primaryFlat",cursor:"pointer",weight:"medium",isDisabled:t,className:t?N().addMarginButton:"",onPress:function(){return null===n||void 0===n?void 0:n()},children:r?null:i("Add margin")})},ie=[{title:(0,a.jsx)(ne.Z,{width:"32px",height:"50px",src:{src:"/_next/static/media/PlusIcon.0bf6dbd2.svg",height:16,width:16},alt:"plus"}),value:"+"},{title:(0,a.jsx)(ne.Z,{width:"32px",height:"50px",src:{src:"/_next/static/media/MinusIcon.5830e8df.svg",height:24,width:24},alt:"minus"}),value:"-"}],re=function(e){var n=e.sign,t=e.unit,i=e.onClose,r=e.onChangeSign,o=e.currencyCode,l=void 0===o?"":o,c=e.errorContent,d=(0,s.useState)(n||"+"),u=d[0],f=d[1],m=(0,s.useMemo)((function(){return[{text:"%",value:"%"},{text:l,value:l}]}),[l]),v=(0,a.jsx)(U,{inInput:!0,tabs:ie,defaultValue:u,onChange:function(e){r&&r(e),f(e)}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:N().rateFields,children:[(0,a.jsx)(_.ZP.Item,{display:"none",name:"offer.exchange_price_sign",defaultValue:u,children:(0,a.jsx)(Y,{value:u})}),(0,a.jsx)(_.ZP.Item,{required:!0,showError:!1,maxLength:"%"===t?5:12,pattern:"^[0-9.]*$",name:"offer.exchange_price_deviation",children:(0,a.jsx)(Q.Z,{validateOnType:!0,prefix:v,inputMode:"numeric",className:N().deviation,"aria-label":"priceDeviation"})}),(0,a.jsx)(_.ZP.Item,{name:"offer.exchange_price_unit",defaultValue:t,children:(0,a.jsx)($.Z,{w:25,items:m})}),(0,a.jsx)(J.ZP,{isQuiet:!0,icon:(0,a.jsx)(ee.Z,{color:"grey600"}),cursor:"pointer",iconSize:"M",onPress:function(){return i()}})]}),c]})},oe=function(e){var n,t,i,r=e.providerItems,o=e.currencieItems,l=e.provider,c=e.currencyCode,d=e.deviation,u=e.sign,f=e.unit,m=e.onChangeSign,v=e.onClose,h=e.onCurrencyChange,p=(0,K.BF)(),y=(0,_.Gc)().formState,j=(0,s.useState)(!!d),b=j[0],g=j[1],Z=null===y||void 0===y||null===(n=y.errors)||void 0===n||null===(t=n.offer)||void 0===t||null===(i=t.exchange_price_deviation)||void 0===i?void 0:i.message,w=Z?(0,a.jsx)(P.Z,{color:"error",preset:"b2-14r",className:N().errorMsg,children:Z}):null,C=(0,a.jsx)(te,{onPress:function(){return g(!0)}}),S=(0,a.jsx)(re,{sign:u,unit:f,currencyCode:c,errorContent:w,onChangeSign:m,onClose:function(){g(!1),v&&v()}});return(0,a.jsxs)("section",{className:(0,x.Z)(b?N().rateFieldsMargin:N().rateFieldsGroup,w&&N().errorContent),children:[(0,a.jsxs)("div",{className:N().rateFields,children:[(0,a.jsx)(_.ZP.Item,{required:!0,name:"offer.exchange_rate_provider",defaultValue:l,children:(0,a.jsx)($.Z,{w:"md"==p?40:56,items:r,className:N().rateProvider})}),(0,a.jsx)(_.ZP.Item,{required:!0,name:"offer.currency_code",defaultValue:c||"USD",children:(0,a.jsx)($.Z,{isDisabled:!l,w:25,items:o,onChange:h})}),b?(0,a.jsx)(te,{isDisabled:!0}):null]}),(0,a.jsx)("div",{className:N().rateFields,children:b?S:C})]})},ae=function(e){var n,t=e.currencieItems,i=e.defaultValue,r=void 0===i?"":i,o=(0,m.Z)().t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.ZP.Item,{name:"offer.price",required:"".concat(o("This field is required")),maxLength:12,pattern:"^[0-9.]*$",defaultValue:r,children:(0,a.jsx)(Q.Z,{validateOnType:!0,inputMode:"numeric","aria-label":"rate"})}),(0,a.jsx)(_.ZP.Item,{required:!0,name:"offer.currency_code",defaultValue:(null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.value)||"USD",children:(0,a.jsx)($.Z,{w:25,items:t})})]})},se=t(26845),le=t(44916),ce=t(4348),de=t(77189),ue=t(64582),fe=t.n(ue),me=function(e){var n=e.children,t=e.title,i=e.caption,r=e.defaultOpen,o=void 0!==r&&r,l=e.isOpen,c=e.footnote,d=(0,s.useState)(o),u=d[0],f=d[1],m="boolean"===typeof l?l:u;return(0,a.jsxs)("section",{className:fe().container,children:[(0,a.jsxs)("div",{className:fe().titleContainer,onClick:function(){f(!u)},children:[(0,a.jsx)(P.Z,{weight:"medium",color:"primaryBrown",className:fe().title,children:t}),(0,a.jsx)(de.Z,{className:(0,x.Z)(fe().icon,m&&fe().open)})]}),i&&(0,a.jsx)("div",{className:(0,x.Z)(fe().caption,(0,V.Z)({},fe().unvisible,m)),children:i}),(0,a.jsx)("div",{className:(0,x.Z)(fe().content,(0,V.Z)({},fe().visible,m)),children:n}),(0,a.jsx)(P.Z,{size:"sm",weight:"medium",children:u&&c})]})},ve=t(18485),he=function(e){var n=e.visible,t=e.currencyCode,i=e.currencyType,r=e.onClose,o=e.isEdit,s=(0,m.Z)().t,l=(0,ve.U)(),c=(0,_.fq)().offer,d=(0,K.dD)(),u=(0,y.He)(null===c||void 0===c?void 0:c.stop_loss_value)||0,f=Number(null===c||void 0===c?void 0:c.initial_balance)||0,v=u?l.format(u):"",h=(0,y.He)(null===c||void 0===c?void 0:c.balance),p=h?l.format(h):0,x=f?l.format(f):"",b=(null===c||void 0===c?void 0:c.first_trade_limit)?l.format(c.first_trade_limit):"",g="fixed_value"===(null===c||void 0===c?void 0:c.price_source);return(0,a.jsx)("div",{className:N().advancedAmount,style:{display:n?"block":"none"},children:(0,a.jsx)(le.Z,{title:s("Advanced settings"),titlePostfix:(0,a.jsx)(P.Z,{size:"sm",color:"grey",children:s("Optional")}),variant:"gradient",onClose:r,children:(0,a.jsxs)("div",{className:N().advancedAmountContent,children:[(0,a.jsxs)(me,{title:s("Total offer balance"),caption:p?"".concat(p&&p+" "+t," out of ").concat(x," ").concat(t):s("Max amount available for trade. Offer will be disabled when reached."),footnote:o?"Left of the initial balance of ".concat(x," ").concat(t):void 0,children:[(0,a.jsx)(P.Z,{mb:1.5,color:"grey",children:s("Max amount available for trade. Offer will be disabled when reached.")}),(0,a.jsx)(_.ZP.Item,{name:"offer.balance",pattern:"^[0-9.]*$",maxLength:"stable"===i?12:14,defaultValue:o?p:"",children:(0,a.jsx)(Q.Z,{validateOnType:!0,w:d?100:80,inputMode:"numeric",postfix:t.toUpperCase(),"aria-label":"offerBalance"})})]}),(0,a.jsxs)(me,{title:s("Stop-loss value"),caption:v?"".concat(v," ").concat(t):s("If applicable rate drops to defined value, your offer will be disabled."),children:[(0,a.jsx)(P.Z,{mb:1.5,color:"grey",children:s("If applicable rate drops to defined value, your offer will be disabled.")}),(0,a.jsx)(_.ZP.Item,{name:"offer.stop_loss_value",pattern:"^[0-9.]*$",maxLength:"stable"===i?12:14,isDisabled:g,defaultValue:v,children:(0,a.jsx)(Q.Z,{validateOnType:!0,w:d?100:80,inputMode:"numeric",postfix:t.toUpperCase(),"aria-label":"offerStopLossValue"})})]}),(0,a.jsxs)(me,{title:"First-trade limit",caption:b?"".concat(b," ").concat(t):s("Max amount available for a trade with a user you have not dealt with before."),children:[(0,a.jsx)(P.Z,{mb:1.5,color:"grey",children:s("Max amount available for a trade with a user you have not dealt with before.")}),(0,a.jsx)(_.ZP.Item,{name:"offer.first_trade_limit",pattern:"^[0-9.]*$",maxLength:"stable"===i?12:14,defaultValue:"",children:(0,a.jsx)(Q.Z,{validateOnType:!0,w:d?100:80,inputMode:"numeric",postfix:t.toUpperCase(),"aria-label":"offerFirstTradeLimit"})})]}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(_.ZP.Item,{name:"offer.for_experienced_users",children:(0,a.jsx)(ce.Z,{children:(0,a.jsxs)("div",{className:N().switchContent,children:[(0,a.jsx)(P.Z,{weight:"medium",color:"primaryBrown",children:s("Available to experienced users only")}),(0,a.jsx)(P.Z,{block:!0,color:"grey",children:s("Your offer will only be available to users who have traded on Hodl Hodl before.")})]})})})]})})})},pe=function(e){var n,t,i,r,o,l,c=e.currencyCode,d=e.currencyType,u=e.currencyTypeSwitch,f=e.caption,v=e.isEdit,h=(0,m.Z)().t,p=(0,s.useState)(!1),x=p[0],y=p[1],j=(0,K.ac)("(max-width: 767px )"),b=(0,_.Gc)().formState,g=null===b||void 0===b||null===(n=b.errors)||void 0===n||null===(t=n.offer)||void 0===t||null===(i=t.min_amount)||void 0===i?void 0:i.message,Z=null===b||void 0===b||null===(r=b.errors)||void 0===r||null===(o=r.offer)||void 0===o||null===(l=o.max_amount)||void 0===l?void 0:l.message,w=g||Z?(0,a.jsxs)(P.Z,{block:!0,color:"error",preset:"b2-14r",children:[g," ",Z]}):null,C=(0,a.jsx)(J.ZP,{icon:(0,a.jsx)(X.Z,{color:x?"grey600":"primary"}),iconSize:"M",variant:"primaryFlat",cursor:"pointer",weight:"medium",isDisabled:x,onPress:function(){return y((function(e){return!e}))},children:h("Advanced settings")});return(0,a.jsxs)("div",{className:N().rangeAmount,children:[(0,a.jsxs)("div",{className:N().rangeAmountGroup,children:[(0,a.jsx)(se.Z.Item,{required:"".concat(h("This field is required")),pattern:"^[0-9.]*$",maxLength:"stable"===d?12:14,name:"offer.min_amount",isWide:j,showError:!1,children:(0,a.jsx)(Q.Z,{validateOnType:!0,prefix:h("From"),inputMode:"numeric",w:j?void 0:48,"aria-label":"offerMinAmount"})}),j?null:"-",(0,a.jsx)(se.Z.Item,{required:!0,name:"offer.max_amount",pattern:"^[0-9.]*$",maxLength:"stable"===d?12:14,showError:!1,children:(0,a.jsx)(Q.Z,{validateOnType:!0,w:j?void 0:56,prefix:h("To"),inputMode:"numeric",postfix:u,"aria-label":"offerMaxAmount"})}),j?null:C]}),w,w?f("error"):f(),j?C:null,(0,a.jsx)(he,{visible:x,currencyCode:c,currencyType:d,isEdit:v,onClose:function(){return y((function(e){return!e}))}})]})},xe=function(e){var n,t,i,r,o,l,c=e.currencyCode,d=e.currencyTypeSwitch,u=e.caption,f=e.currencyType,v=(0,m.Z)().t,h=(0,K.ac)("(max-width: 767px )"),p=(0,_.Gc)(),x=p.formState,y=p.watch,j=p.setValue,b=(0,s.useState)(!1),g=b[0],Z=b[1],w=null===x||void 0===x||null===(n=x.errors)||void 0===n||null===(t=n.offer)||void 0===t||null===(i=t.min_amount)||void 0===i?void 0:i.message,C=null===x||void 0===x||null===(r=x.errors)||void 0===r||null===(o=r.offer)||void 0===o||null===(l=o.max_amount)||void 0===l?void 0:l.message,S=w||C?(0,a.jsxs)(P.Z,{block:!0,items:"center",color:"error",preset:"b2-14r",children:[w," ",C]}):null,T=y("offer.min_amount");return(0,s.useEffect)((function(){j("offer.max_amount",T)}),[T]),(0,a.jsxs)("div",{className:N().amountContainer,children:[(0,a.jsxs)("div",{className:N().amountGroup,children:[(0,a.jsx)(se.Z.Item,{name:"offer.min_amount",required:"".concat(v("This field is required")),pattern:"^[0-9.]*$",maxLength:"stable"===f?12:14,showError:!1,defaultValue:"",children:(0,a.jsx)(Q.Z,{validateOnType:!0,w:80,inputMode:"numeric",postfix:d,"aria-label":"currencyType"})}),(0,a.jsx)(se.Z.Item,{required:!0,name:"offer.max_amount",display:"none",defaultValue:"0",children:(0,a.jsx)(Y,{})}),h&&(0,a.jsxs)("div",{children:[S," ",S?u("error"):u()]}),(0,a.jsx)(J.ZP,{icon:(0,a.jsx)(X.Z,{color:g?"grey600":"primary"}),iconSize:"M",variant:"primaryFlat",cursor:"pointer",weight:"medium",isDisabled:g,onPress:function(){return Z((function(e){return!e}))},children:v("Advanced settings")})]}),!h&&(0,a.jsxs)(a.Fragment,{children:[S," ",S?u("error"):u()]}),(0,a.jsx)(he,{visible:g,currencyCode:c,currencyType:f,onClose:function(){return Z((function(e){return!e}))}})]})},_e=t(29815),ye=t(88267),je=function(e){var n=e.methods,t=void 0===n?[]:n,i=e.field,r=e.types,o=e.values,l=e.onClose,c=e.onChange,d=e.error,u=(0,K.ac)("(max-width: 767px )"),f=(0,m.Z)().t,v=(0,s.useState)((null===i||void 0===i?void 0:i.type)||""),h=v[0],p=v[1],x=(0,s.useState)((null===i||void 0===i?void 0:i.name)||""),_=x[0],j=x[1],b=(0,s.useMemo)((function(){return(0,y.TE)(t.filter((function(e){return e.type===h})).map((function(e){return e.name})))}),[h,t]).map((function(e){return{text:e,value:e}})).sort((function(e,n){return e.text.localeCompare(n.text)})),g=r.map((function(e){return{text:e,value:e}})),Z=t.find((function(e){return e.name===_&&e.type&&h})),w=(0,y.He)(null===Z||void 0===Z?void 0:Z.id),C=!((null===Z||void 0===Z?void 0:Z.id)===(null===i||void 0===i?void 0:i.id)||!w||!(null===o||void 0===o?void 0:o.includes(w))),S=h?"".concat(h," ").concat(_):f("Payment instruction");(0,s.useEffect)((function(){(null===Z||void 0===Z?void 0:Z.id)!==(null===i||void 0===i?void 0:i.id)&&c&&w&&!(null===o||void 0===o?void 0:o.includes(w))&&c(w)}),[h,_,o]);var T=C?(0,a.jsx)(P.Z,{color:"error",size:"xs",mt:1.5,children:f("Selected payment method has already been used in one of the instructions above. Create another offer\nif you want to use the same payment method with different payment details.")}):null;return(0,a.jsxs)("div",{className:N().paymentMethodItem,id:null===i||void 0===i?void 0:i.id,children:[(0,a.jsx)(le.Z,{variant:"gradient",title:S,isInvalid:C||!!d,onClose:l,children:(0,a.jsxs)("div",{className:N().paymentBuyContent,children:[(0,a.jsx)($.Z,{value:h,placeholder:f("Select payment type"),w:u?"100":"1/2",items:g,isWide:u,onChange:p}),(0,a.jsx)($.Z,{isDisabled:!h,w:u?"100":"1/2",value:_,placeholder:f("Select payment method"),items:b,isWide:u,onChange:j})]})}),T,d?(0,a.jsx)(P.Z,{color:"error",size:"xs",mt:1.5,children:d}):null]})},be={id:"",name:"",type:""},ge=function(e){var n=e.types,t=e.paymentMethods,i=e.name,r=e.value,o=void 0===r?[]:r,l=e.defaultValue,c=void 0===l?[]:l,d=e.error,u=e.onChange,f=function(e){return e.length>0?e.map((function(e){return t.find((function(n){return String(e)===String(n.id)}))})).filter((function(e){return!!e})):null},v=(0,m.Z)().t,h=(0,s.useState)(f(c)||[]),p=h[0],x=h[1],_=p.map((function(e){return e.type})),j=n.filter((function(e){return!_.includes(e)})),b=t.filter((function(e){return j.includes(e.type)})).length>0,g=(0,s.useMemo)((function(){return p.map((function(e){return(0,y.He)(e.id)||0})).filter((function(e){return!!e}))}),[p]),Z=function(e,n){var i,r=null===t||void 0===t?void 0:t.find((function(n){return n.id===String(e)}));if(u&&r){var o=(0,_e.Z)(p);o[n]=r,u((0,y.TE)(null===(i=o)||void 0===i?void 0:i.map((function(e){return(0,y.He)(e.id)||0})).filter((function(e){return!!e}))))}};return(0,s.useEffect)((function(){var e=f(o);e&&x(e)}),[o]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.Z,{weight:"medium",mb:3,color:"primaryBrown",children:v("Your payment instructions")}),(0,a.jsxs)("div",{className:N().paymentPanel,children:[p.length>0?p.map((function(e,i){return(0,a.jsx)(je,{field:e,values:o,types:n,methods:t,error:d,onChange:function(e){return Z(e,i)},onClose:function(){return function(e){if(u){var n=(0,y.TE)(o.filter((function(n){return String(n)!==e.id})));0===n.length&&x([]),u(n)}}(e)}},"".concat(e.id,"-").concat(i))})):(0,a.jsx)(je,{types:n,methods:t,error:d,onChange:function(e){return Z(e,p.length)}}),b&&(0,a.jsx)(J.ZP,{isWide:!0,variant:"primaryOutline",size:12,icon:(0,a.jsx)(ye.Z,{}),iconSize:"M",onPress:function(){if(b&&u){var e=f(o);e&&x((0,_e.Z)(e).concat([be]))}},children:v("Add new payment insctruction")}),(0,a.jsx)(Y,{name:i,value:g})]})]})},Ze=t(90650),we=t(85905),Ce=t(44412),Se=t(26207),Te=t(44647),Me=t(93142),Ie=t(28021),Ne=t(93349),Pe=t.n(Ne),ke=function(e){return null===e||void 0===e?void 0:e.map((function(e){return(0,y.He)(e.id)||0})).filter((function(e){return!!e}))},Fe=function(e,n){return e.map((function(e){return n.find((function(n){return String(n.id)===String(e)}))})).filter((function(e){return!!e}))},Ve=function(e){var n,t,r=e.item,l=e.types,c=e.paymentMethods,d=e.onRemove,u=(0,m.Z)().t,f=(0,o.Z)((0,Ie.BG)(),1)[0],v=(0,s.useMemo)((function(){var e,n;return{id:(null===r||void 0===r?void 0:r.id)||"",method:(null===r||void 0===r||null===(e=r.paymentMethod)||void 0===e?void 0:e.name)||"",type:(null===r||void 0===r||null===(n=r.paymentMethod)||void 0===n?void 0:n.type)||"",name:(null===r||void 0===r?void 0:r.name)||"",details:(null===r||void 0===r?void 0:r.details)||""}}),[r]),p=function(e){var n={payment_method_instruction:{name:e.name,details:e.details||"",payment_method_id:e.payment_method_id}};return f((0,i.Z)({id:null===v||void 0===v?void 0:v.id},n)).then((function(e){return(0,h.L)(e)}))},_=(0,a.jsxs)(we.hg,{type:"modal",mobileType:"fullscreenTakeover",preventPressOutside:!1,isDismissable:!1,children:[(0,a.jsx)(J.ZP,{icon:(0,a.jsx)(Me.Z,{color:"primary"}),variant:"primaryFlat",weight:"medium",text:"sm",className:Pe().editBtn,iconSize:"5",ml:1.5,cursor:"pointer",children:u("offers_create_payment_instructions_edit_btn")}),function(e){return(0,a.jsx)(we.Vq,{mobileType:"fullscreenTakeover",children:(0,a.jsx)(Ce.V,{style:{maxWidth:"33.75rem"},children:(0,a.jsx)(Se.Z,{types:l,methods:c,defaultValues:v,onSubmit:p,onClose:e})})})}]});return(0,a.jsx)(le.Z,{variant:"gradient",title:r.name,titlePostfix:_,onClose:function(){return d(r.id)},children:(0,a.jsxs)("div",{className:Pe().content,children:[(0,a.jsxs)("div",{className:Pe().contentItem,children:[(0,a.jsx)(P.Z,{block:!0,size:"xs",color:"primary800",mb:1.5,children:u("offers_create_payment_instructions_type")}),(0,a.jsx)(P.Z,{block:!0,weight:"medium",color:"black",children:null===(n=r.paymentMethod)||void 0===n?void 0:n.type})]}),(0,a.jsxs)("div",{className:Pe().contentItem,children:[(0,a.jsx)(P.Z,{block:!0,size:"xs",color:"primary800",mb:1.5,children:u("offers_create_payment_instructions_method")}),(0,a.jsx)(P.Z,{block:!0,color:"black",weight:"medium",children:null===(t=r.paymentMethod)||void 0===t?void 0:t.name})]}),(0,a.jsxs)("div",{className:(0,x.Z)(Pe().contentItem,Pe().details),children:[(0,a.jsx)(P.Z,{block:!0,size:"xs",color:"primary800",mb:1.5,children:u("offers_create_payment_instructions_details")}),(0,a.jsx)(P.Z,{block:!0,weight:"medium",color:"primaryBrown",className:Pe().details,children:r.details})]})]})})},ze=function(e){var n=e.paymentMethods,t=void 0===n?[]:n,l=e.paymentInstructions,c=void 0===l?[]:l,d=e.types,u=void 0===d?[]:d,f=e.name,v=e.defaultValue,p=void 0===v?[]:v,x=e.value,_=e.error,j=e.onChange,b=(0,m.Z)().t,g=(0,K.dD)(),Z=(0,s.useState)(Fe(p,c)),w=Z[0],C=Z[1],S=(0,o.Z)((0,Ie.V2)(),1)[0],T=(0,s.useMemo)((function(){return w.map((function(e){return(0,y.He)(e.id)||0}))}),[w]),M=function(e){return S({payment_method_instruction:{name:e.name,details:e.details,payment_method_id:e.payment_method_id}}).then((function(e){return(0,h.L)(e)})).then((function(e){var n;(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.payment_method_instruction)&&j&&j((0,y.TE)(ke((0,_e.Z)(w).concat([e.data.payment_method_instruction]))))}))},I=(0,a.jsxs)(we.hg,{type:"modal",mobileType:"fullscreenTakeover",preventPressOutside:!1,isDismissable:!1,children:[(0,a.jsx)(J.ZP,{isWide:!0,variant:"primaryOutline",size:12,icon:(0,a.jsx)(ye.Z,{}),iconSize:"M",children:b("Create new payment instruction")}),function(e){return(0,a.jsx)(we.Vq,{mobileType:"fullscreenTakeover",children:(0,a.jsx)(Ce.V,{style:{maxWidth:g?"none":"33.75rem"},children:(0,a.jsx)(Se.Z,{types:u,methods:t,onSubmit:M,onClose:e})})})}]}),N=c.map((function(e){return(0,r.Z)((0,i.Z)({},e),{paymentMethod:t.find((function(n){return n.id===e.payment_method_id}))})})).map((function(e){var n,t;return{text:(0,a.jsxs)(P.Z,{children:[e.name," ",(null===e||void 0===e?void 0:e.paymentMethod)?(0,a.jsx)(Te.Z,{type:null===(n=e.paymentMethod)||void 0===n?void 0:n.type,name:null===(t=e.paymentMethod)||void 0===t?void 0:t.name},e.id):null]}),value:e.id}})),k=w.map((function(e){return e.id})),F=N.filter((function(e){return!k.includes(e.value)})),V=function(e){var n=w.filter((function(n){return n.id!=e}));j&&j((0,y.TE)(ke(n)))};return(0,s.useEffect)((function(){"undefined"!==typeof x&&C(Fe(x,c))}),[x,c]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.Z,{weight:"medium",mb:3,color:"primaryBrown",children:b("Your payment instructions")}),(0,a.jsx)(Ze.Z,{flex:"col",gap:"6",mb:"6",children:w.length>0&&w.map((function(e){return(0,a.jsx)(Ve,{item:e,types:u,paymentMethods:t,onRemove:V},e.id)}))}),(0,a.jsxs)("div",{children:[(0,a.jsx)($.Z,{mb:4,validationState:_?"invalid":void 0,error:_,placeholder:b("Select payment instruction"),items:F,value:" ",defaultValue:"",onChange:function(e){return function(e){var n=c.find((function(n){return n.id===e})),t=w.find((function(e){return e.id===(null===n||void 0===n?void 0:n.id)}));j&&!t&&n&&j((0,y.TE)(ke((0,_e.Z)(w).concat([n]))))}(e)}}),I,(0,a.jsx)(Y,{name:f,value:T})]})]})},Be=t(76858);var De=function(e){var n=e.status,t=void 0===n?"lightGreen":n,i=e.children;return(0,a.jsx)(P.Z,{preset:"b2-14m",children:(0,a.jsx)(Be.Z,{status:t,variant:"solid",children:i})})};var Ee=function(e){var n=e.min,t=e.max,i=e.price,r=e.type,o=e.currencyCode,s=e.currencyMultiplier,l=e.badgeStatus,c=(0,ve.U)({maximumFractionDigits:8}),d=function(e){var n=e.min,t=e.max,i=e.price,r=e.type,o=e.format,a=e.currencyCode,s=e.currencyMultiplier,l=function(e,n){return(0,y.tD)(["".concat(String(o((0,y._z)(e,2)||0))),"".concat(String(o((0,y._z)(n,2)||0)))])},c=function(e,n){var t=n?l(e*s,n*s):o(e*s);return 1!==s?"(".concat(t," USD)"):""};if(!i)return"";if(n&&t){if("btc"===r){var d=n*i,u=t*i;return"= ".concat(l(d,u)," ").concat(a," ").concat(c(d,u))}if("stable"===r)return"= ".concat(function(e,n){return(0,y.tD)(["".concat((0,y._z)(e,8)),"".concat((0,y._z)(n,8))])}(n/i,t/i)," BTC ").concat(c(n,t))}if(n){if("btc"===r){var f=n*i;return"= ".concat((0,y._z)(f,2)," ").concat(a," ").concat(c(f))}if("stable"===r){var m=n/i;return"= ".concat((0,y._z)(m)," BTC ").concat(c(n))}}return""}({min:n,max:t,type:r,price:i,format:function(e){return c.format(e)},currencyCode:o,currencyMultiplier:s});return d?(0,a.jsx)(De,{status:l,children:d}):"stable"===r?(0,a.jsx)(De,{status:l,children:"- BTC"}):"btc"===r?(0,a.jsxs)(De,{status:l,children:["- ",o]}):null},Ge=function(e){var n=e.isBuy,t=e.isEdit,i=e.error,r=(0,m.Z)().t,o=(0,l.useRouter)(),s=r(n?"Create offer to buy BTC":"Create offer to sell BTC"),c=r(n?"Save offer to buy BTC":"Save offer to sell BTC"),d=i?(0,a.jsx)(P.Z,{color:"error",preset:"c-12r",mb:4,children:i}):null;return(0,a.jsxs)("div",{className:N().switchButtons,children:[(0,a.jsx)(Ze.Z,{mb:4,children:(0,a.jsx)(_.ZP.Item,{name:"offer.enabled",children:(0,a.jsx)(ce.Z,{isSelected:!0,children:(0,a.jsxs)("div",{className:N().switchContent,children:[(0,a.jsx)(P.Z,{weight:"medium",color:"primaryBrown",children:r("Enable offer after creation")}),(0,a.jsx)(P.Z,{block:!0,color:"grey",children:r("Your offer will be active and available to other users. Disable to save as a\ndraft.")})]})})})}),(0,a.jsx)(Ze.Z,{mb:4,children:(0,a.jsx)(_.ZP.Item,{name:"offer.private",children:(0,a.jsx)(ce.Z,{children:(0,a.jsxs)("div",{className:N().switchContent,children:[(0,a.jsx)(P.Z,{weight:"medium",color:"primaryBrown",children:r("Make offer private")}),(0,a.jsx)(P.Z,{block:!0,color:"grey",children:r("Your offer will only be accessible by the link and not displayed in the\npublic offer list.")})]})})})}),d,(0,a.jsxs)("div",{className:N().submitGroup,children:[(0,a.jsx)(_.ZP.Submit,{isWide:!0,weight:"medium",size:12,variant:"primary",children:t?c:s}),(0,a.jsx)(J.ZP,{isWide:!0,weight:"medium",size:12,variant:"primaryOutline",onPress:function(){return o.back()},children:r("Cancel changes")})]})]})},He=t(60386),Le=t(94470),Oe=t(10832),Ae=t.n(Oe),Re=function(e){var n,t=e.elementType,i=void 0===t?"span":t,r=e.className,o=e.isIndeterminate,s=e.isSelected,l=e.isHovered,c=e.children;return(0,a.jsx)(i,{className:(0,x.Z)(Ae().checkmark,(n={},(0,V.Z)(n,Ae().indeterminate,o),(0,V.Z)(n,Ae().selected,s),(0,V.Z)(n,Ae().hovered,l),n),r),children:c})},qe=t(67023),We=t.n(qe),Ue=function(e){var n=e.children,t=e.isIndeterminate,o=e.value,l=e.isSelected,c=e.className,d=(0,Le.l)((0,r.Z)((0,i.Z)({},e),{isSelected:(0,y.Xq)(o)?o:l})),u=(0,s.useRef)(null),f=(0,He.O)(e,d,u).inputProps;return(0,a.jsxs)("label",{className:(0,x.Z)(We().checkbox,c),children:[(0,a.jsx)(Re,{elementType:"label",isIndeterminate:t,isSelected:d.isSelected,children:(0,a.jsx)("input",(0,r.Z)((0,i.Z)({className:We().input},f),{ref:u}))}),n]})},Ye=function(e){var n,t,i=e.onFullTime,r=e.isRoundClock,o=(0,m.Z)().t,s=(0,y.w6)(0,48).map((function(e){return{text:(0,y.bx)(30*e),value:"".concat((0,y.bx)(30*e))}})),l=null===(n=s[0])||void 0===n?void 0:n.value,c=null===(t=s[0])||void 0===t?void 0:t.value;return(0,a.jsxs)("div",{className:N().hoursField,children:[(0,a.jsx)(P.Z,{weight:"medium",color:"primaryBrown",children:o("Available hours")}),(0,a.jsx)(P.Z,{block:!0,color:"grey",children:o("Define the timeframes for an offer to be active. An offer is automatically disabled if you have not been online for {{count}} days.",{count:10})}),(0,a.jsxs)("div",{className:N().hoursContent,children:[(0,a.jsx)(_.ZP.Item,{name:"offer.round_the_clock",children:(0,a.jsx)(Ue,{isSelected:r,"aria-label":"24HoursAccess",onChange:function(e){i&&i(e)},children:o("24 hours access")})}),(0,a.jsxs)("div",{className:N().hoursGroup,children:[(0,a.jsx)(_.ZP.Item,{name:"offer.working_hours_start",isDisabled:r,defaultValue:l,children:(0,a.jsx)($.Z,{w:32,variant:"white",items:s})}),"-",(0,a.jsx)(_.ZP.Item,{name:"offer.working_hours_end",isDisabled:r,defaultValue:c,children:(0,a.jsx)($.Z,{w:32,variant:"white",items:s})})]})]}),(0,a.jsxs)("div",{className:N().hoursContent,children:[(0,a.jsx)(_.ZP.Item,{name:"offer.workdays_only",children:(0,a.jsxs)(Ue,{"aria-label":"workdaysOnly",children:[" ",o("Workdays only.")]})}),(0,a.jsx)(P.Z,{color:"grey",children:o("Offer will be disabled on Saturdays and Sundays.")})]})]})},Ke=t(25588),$e=function(){return(0,Ke.R)().data||[]},Qe=function(e){var n,t,i,r=e.value,o=(0,m.Z)().t,s=$e(),l=[{text:"Global",value:"Global"}].concat((0,_e.Z)(s.map((function(e){return{text:e.name,value:e.code}})))),c=r?null===(n=null===l||void 0===l?void 0:l.find((function(e){return String(e.value)===String(r)})))||void 0===n?void 0:n.text:"",d=(0,_.Gc)().formState,u=null===d||void 0===d||null===(t=d.errors)||void 0===t||null===(i=t.offer)||void 0===i?void 0:i.country_code;return(0,a.jsxs)(me,{title:o("Location"),caption:c,isOpen:!!u||void 0,children:[(0,a.jsx)(P.Z,{mb:1.5,color:"grey",children:o('The list of payment methods depends on the "Country" setting.')}),(0,a.jsx)(se.Z.Item,{name:"offer.country_code",defaultValue:"Global",children:(0,a.jsx)($.Z,{w:48,variant:"white",items:l})})]})},Je=t(90837),Xe=function(e){var n,t,i=e.value,r=(0,m.Z)().t,o=i?r("{{count}} min",{count:i}):"",s=(0,_.Gc)().formState,l=null===s||void 0===s||null===(n=s.errors)||void 0===n||null===(t=n.offer)||void 0===t?void 0:t.payment_window_minutes;return(0,a.jsxs)(me,{title:r("Payment window"),caption:o,isOpen:!!l||void 0,children:[(0,a.jsxs)(P.Z,{mb:1.5,color:"grey",children:[r("The time within which the Seller must receive the payment from the Buyer. When the time runs out, a\ndispute can be started.")," ",(0,a.jsx)(Je.Z,{variant:"link",href:"/pages/faq#payment_window",children:r("How to set payment window?")})]}),(0,a.jsx)(se.Z.Item,{name:"offer.payment_window_minutes",pattern:"^[0-9]*$",maxLength:5,defaultValue:"90",children:(0,a.jsx)(Q.Z,{validateOnType:!0,w:48,variant:"white",inputMode:"numeric",postfix:"min","aria-label":"offerPaymentWindowMinutes"})})]})},en=function(e){var n,t,i,r=e.value,o=(0,m.Z)().t,s=(0,_.Gc)().formState,l=(0,p.Z)().user;if(!l)return null;var c=(0,y.w6)(l.canHaveZeroConfirmations?0:1,7).map((function(e){return{text:"".concat(e," confirmation"),value:"".concat(e)}})),d=r?null===(n=null===c||void 0===c?void 0:c.find((function(e){return String(e.value)===String(r)})))||void 0===n?void 0:n.text:"",u=null===s||void 0===s||null===(t=s.errors)||void 0===t||null===(i=t.offer)||void 0===i?void 0:i.confirmations;return(0,a.jsxs)(me,{title:o("BTC confirmations"),caption:d,isOpen:!!u||void 0,children:[(0,a.jsx)(P.Z,{mb:1.5,color:"grey",children:o("The number of transaction confirmations you will have to wait when deposing Bitcoin to escrow. More\nconfirmations ensure better security but require more time.")}),(0,a.jsx)(se.Z.Item,{required:!0,name:"offer.confirmations",defaultValue:"1",children:(0,a.jsx)($.Z,{w:48,variant:"white",items:c})})]})},nn=function(){var e,n,t,i,r=(0,m.Z)().t,o=(0,_.Gc)().formState,s=(null===o||void 0===o||null===(e=o.errors)||void 0===e||null===(n=e.offer)||void 0===n?void 0:n.title)||(null===o||void 0===o||null===(t=o.errors)||void 0===t||null===(i=t.offer)||void 0===i?void 0:i.description);return(0,a.jsx)(me,{title:r("Offer description"),isOpen:!!s||void 0,children:(0,a.jsxs)(Ze.Z,{flex:"col",gap:"2",children:[(0,a.jsx)(se.Z.Item,{label:r("Title"),maxLength:100,name:"offer.title",children:(0,a.jsx)(Q.Z,{showCounter:!0,variant:"white",caption:r("Displayed in offer list"),"aria-label":"offerTitle"})}),(0,a.jsx)(se.Z.Item,{label:r("Description"),maxLength:5e3,name:"offer.description",children:(0,a.jsx)(Q.Z,{showCounter:!0,multiLine:!0,variant:"white",rows:4,"aria-label":"offerDescription"})})]})})},tn=function(e,n){return{title:e,content:n}},rn=function(e){var n=e.displayMethods,t=void 0===n?[]:n,i=e.price,r=e.currencyCode,o=e.provider,s=e.amountMin,l=e.amountMax,c=e.total,u=e.stopLoss,f=e.firstTrade,v=e.deviation,h=e.isBuy,p=e.isEdit,_=e.initialBalance,j=e.sign,b=e.isPriceFixed,g=(0,K.dD)(),Z=(0,m.Z)().t,w="+"===j?"calmGreen":"orangeBg",C=(0,a.jsxs)(a.Fragment,{children:["0"===i?"-":i," ",r," ",g||b?"":"|",!b&&(0,a.jsxs)("div",{className:N().priceContent,children:[o," ",v&&(0,a.jsx)(Be.Z,{status:w,preset:"s2b",variant:"solid",children:v})]})]}),S=(0,a.jsxs)(a.Fragment,{children:[(0,y.tD)([s,l])," ",l||s?r:"- ".concat(r)]}),T=(0,a.jsxs)(a.Fragment,{children:[c," ",r,_&&(0,a.jsxs)(Be.Z,{status:"darkGrey",preset:"l-12m",variant:"solid",children:["out of ",_," ",r]})]}),M=(0,a.jsxs)(a.Fragment,{children:[u," ",r]}),I=(0,a.jsxs)(a.Fragment,{children:[f," ",r]}),P=(0,a.jsx)(a.Fragment,{children:t.map((function(e){return(0,a.jsx)(Te.Z,{type:e.type,name:e.name},e.name)}))}),k=[!!i&&tn(Z("Price"),C),tn(Z("Amount"),S),p&&c&&tn(Z("Offer balance"),T),!!u&&tn(Z("Stop-loss value"),M),!!f&&tn(Z("First-trade limit"),I),tn(Z("Payment methods"),P)].filter(Boolean);return(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Z,{uppercase:!0,level:5,color:"primaryBrown",children:Z(h?"Offer to buy BTC":"Offer to sell BTC")}),(0,a.jsx)("div",{className:N().infoContent,children:k.map((function(e){return(0,a.jsxs)("div",{className:(0,x.Z)("Payment methods"===e.title?N().infoRowPayments:N().infoRow),children:[(0,a.jsx)("div",{className:N().infoRowTitle,children:e.title}),(0,a.jsx)("div",{className:N().infoRowItem,children:e.content})]},e.title)}))})]})},on=function(e){var n=e.currencyType,t=e.countryCode,i=e.paymentWindow,r=e.confirmations,o=e.displayMethods,s=e.price,l=e.initialBalance,c=e.provider,d=e.amountMin,u=e.amountMax,f=e.balance,m=e.stopLoss,v=e.firstTrade,h=e.currencyCode,p=e.deviation,x=e.sign,_=e.unit,b=e.isBuy,g=e.isEdit,Z=e.isPriceFixed,w=e.isRoundClock,C=e.onFullTime,S=(0,ve.U)(),T="btc"===n,M=S.format(s),I=d?S.format(T?d*s:d):"",P=u?S.format(T?u*s:u):"",k=(0,y.He)(f),F=null!==k?S.format(k):null,V=(0,y.He)(l),z=null!==V?S.format(V):null,B=(0,y.He)(m),D=B?S.format(B):"",E=(0,y.He)(v),G=E?S.format(E):"",H=S.format((0,y.He)(p)||0),L="currency"==_?" ".concat(h):_,O=(0,y.He)(p)?"".concat(x).concat(H).concat(L):"";return(0,a.jsx)(le.Z,{variant:"grey",children:(0,a.jsxs)("div",{className:N().columnContentLayout,children:[(0,a.jsx)(Ye,{isRoundClock:w,onFullTime:C}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(Qe,{value:t}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(Xe,{value:i}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(en,{value:r}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(nn,{}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(rn,{isBuy:b,isEdit:g,displayMethods:o,price:M,total:F,initialBalance:z,provider:c,currencyCode:h,amountMin:I,amountMax:P,stopLoss:D,firstTrade:G,deviation:O,sign:x,isPriceFixed:Z})]})})},an=function(e){var n,t,i,r,o,s,l=e.price,c=e.currencyCode,d=e.currencyMultiplier,u=e.isFixed,f=e.deviation,v=e.unit,h=e.sign,p=(0,m.Z)().t,j=(0,ve.U)({maximumFractionDigits:2}),b=(0,K.BF)(),g=(0,y.He)(f)||0,Z=function(e){return 1!==d?"(".concat(j.format(e*d)," USD)"):""},w=Z(l),C=(0,_.Gc)().formState,S=null===C||void 0===C||null===(n=C.errors)||void 0===n||null===(t=n.offer)||void 0===t||null===(i=t.exchange_price_deviation)||void 0===i?void 0:i.message,T=null===C||void 0===C||null===(r=C.errors)||void 0===r||null===(o=r.offer)||void 0===o||null===(s=o.price)||void 0===s?void 0:s.message;return u?(0,a.jsxs)(P.Z,{preset:"b2-14m",children:[!T&&p("Fixed price won\u2019t change with the market price")," ",w?(0,a.jsx)(Be.Z,{isBlock:"md"==b,status:T?"error":"lightGreen",variant:"solid",children:w}):null]}):(0,a.jsxs)(P.Z,{preset:"b2-14m",className:Pe().priceCaptionTitle,children:[!S&&(0,a.jsx)(P.Z,{className:Pe().priceTitle,children:p("Applicable rate")}),(0,a.jsx)(Be.Z,{isBlock:"md"==b,status:S?"error":"lightGreen",variant:"solid",className:(0,x.Z)(!S&&Pe().priceCaptionBadge),children:function(){var e="".concat(j.format(l)," ").concat(c," ").concat(w),n="+"===h?100+g:g>=100?100:100-g,t="+"===h?l-g:l+g,i=Z(l/n*100),r=Z(t),o="".concat(j.format(l/n*100)," ").concat(c," ").concat(i," * ").concat(n,"% = ").concat(e),a="".concat(j.format(t)," ").concat(c," ").concat(r," ").concat(h," ").concat(f," ").concat(c," = ").concat(e);return f?"%"===v?o:a:e}()})]})},sn=t(4982),ln=function(){var e=(0,m.Z)().t,n=[{title:"1",text:e("offers_create_step_1_title"),active:!0},{title:"2",text:e("offers_create_step_2_title")},{title:"3",text:e("offers_create_step_3_title")},{title:"4",text:e("offers_create_step_4_title")},{title:"5",text:e("offers_create_step_5_title")}];return(0,a.jsx)(sn.Z,{steps:n})},cn=function(e){var n,t,i,r,o,l=e.side,c=e.defaultValues,d=e.isEdit,u=e.onSubmit,f="buy"===l,v=(0,m.Z)().t,h=S(),p=h.currencies,Z=h.isCurrenciesReady,C=w(),I=C.providers,P=C.isProvidersReady,F=(0,b.Z)(),V=F.paymentMethods,z=F.types,B=F.isPaymentMethodsReady,D=(0,g.Z)(),E=D.paymentInstructions,G=D.isPaymentInstructionsReady,H=(null===c||void 0===c||null===(n=c.offer)||void 0===n?void 0:n.min_amount)!==(null===c||void 0===c||null===(t=c.offer)||void 0===t?void 0:t.max_amount)?"range":"fixed",L=p.map((function(e){return{value:e.code,text:e.code}})),O=I.map((function(e){return{value:e.name,text:e.name}})),A=(0,s.useState)(H),R=A[0],q=A[1],W=(0,s.useState)("stable"),K=W[0],$=W[1],Q=(0,s.useState)(""),J=Q[0],X=Q[1],ee="fixed"===R,ne=(0,_.cI)({defaultValues:c,mode:"onSubmit",shouldUseNativeValidation:!0}),te=ne.watch("offer.price_source")||"exchange_rate",ie=ne.watch("offer.currency_code"),re=ne.watch("offer.exchange_rate_provider"),se=(0,y.He)(ne.watch("offer.price")),le=(0,y.He)(ne.watch("offer.min_amount")),ce=(0,y.He)(ne.watch("offer.max_amount")),de=ne.watch("offer.exchange_price_sign"),ue=ne.watch("offer.exchange_price_unit"),fe=ne.watch("offer.exchange_price_deviation")||"",me=ne.watch("offer.payment_method_ids"),ve=ne.watch("offer.payment_method_instruction_ids"),he=ne.watch("offer.round_the_clock",!0),_e=V.filter((function(e){var n=(0,y.He)(e.id);return!!n&&(null===me||void 0===me?void 0:me.includes(n))})),ye=E.filter((function(e){var n=(0,y.He)(e.id);return!!n&&((null===ve||void 0===ve?void 0:ve.includes(n))&&e.paymentMethod)})).map((function(e){return e.paymentMethod})).filter((function(e){return!!e})),je=re||(null===(i=O[0])||void 0===i?void 0:i.value),be=ie||"USD",Ze=de||"+",we=ue||"%",Ce=fe||"",Se="fixed_value"===te,Te=T({provider:je,assetCode:(null===c||void 0===c||null===(r=c.offer)||void 0===r?void 0:r.asset_code)||"BTC",currencyCode:be,deviation:fe||"0",sign:de||"+",unit:ue||"%",skip:Se}),Me=M({currencyCode:be}),Ie=v(Se?"Tied to a fixed rate":"Tied to an exchange rate"),Ne=(Se?se:Te)||0,Pe=ne.watch("offer.balance"),ke=(null===c||void 0===c||null===(o=c.offer)||void 0===o?void 0:o.balance)===Pe?ne.watch("offer.initial_balance"):Pe,Fe=function(e){(0,_.Ih)({data:e,ns:"offer",onError:function(e,n){"base"===e?X(n):ne.setError(e,{message:n})}})};(0,s.useEffect)((function(){d||ne.setValue("offer.workdays_only",!0)}),[d]);var Ve=(0,a.jsx)(U,{inInput:!0,tabs:[{title:be,value:"stable"},{title:"BTC",value:"btc"}],defaultValue:K,onChange:function(e){if($(e),"btc"===e&&Ne){if(le){var n=(0,y._z)(String(le/Ne));n&&ne.setValue("offer.min_amount",String(n))}if(ce){var t=(0,y._z)(String(ce/Ne));t&&ne.setValue("offer.max_amount",String(t))}}else{if(le){var i=(0,y._z)(String(Ne*le),2);i&&ne.setValue("offer.min_amount",String(i))}if(ce){var r=(0,y._z)(String(Ne*ce),2);r&&ne.setValue("offer.max_amount",String(r))}}}}),Be=function(e){return(0,a.jsx)(Ee,{isFixed:Se,min:le,max:ce,price:Ne,type:K,currencyMultiplier:Me,currencyCode:be,badgeStatus:e})},De=(0,a.jsx)(U,{inInput:!0,tabs:[{title:v("Floating rate"),value:"exchange_rate"},{title:v("Fixed rate"),value:"fixed_value"}],defaultValue:te,className:N().switchContainer,onChange:function(e){ne.setValue("offer.price_source",e),ne.setValue("offer.currency_code",be),"fixed_value"===e&&(ne.resetField("offer.exchange_rate_provider"),ne.resetField("offer.exchange_price_sign"),ne.resetField("offer.exchange_price_deviation"),ne.resetField("offer.exchange_price_unit")),"exchange_rate"===e&&(ne.resetField("offer.price"),ne.setValue("offer.exchange_rate_provider",je),ne.setValue("offer.exchange_price_sign",Ze),ne.setValue("offer.exchange_price_unit",we),ne.setValue("offer.exchange_price_deviation",Ce))}}),He=(0,a.jsx)(U,{inInput:!0,tabs:[{title:v("Fixed amount"),value:"fixed"},{title:v("Amount range"),value:"range"}],defaultValue:R,className:N().switchContainer,onChange:function(e){q(e),"fixed"===e&&ne.setValue("offer.max_amount",ne.watch("offer.min_amount")),"range"===e&&ne.setValue("offer.max_amount",ne.watch("offer.min_amount"))}});return(0,a.jsxs)(_.ZP,{state:ne,onSubmit:function(e){if(X(""),u){var n,t=e.offer||{};t.enabled=null===(n=t.enabled)||void 0===n||n;var i=(Se?(0,y.He)(t.price):Te)||0;if("btc"===K&&i){var r=(0,y.He)(t.max_amount),o=(0,y.He)(t.min_amount);r&&(t.max_amount=String(r*i)),o&&(t.min_amount=String(o*i))}return u({offer:t}).catch((function(e){var n;"error"in e&&"data"in e.error&&Fe(null===(n=e.error)||void 0===n?void 0:n.data)}))}},onError:Fe,children:[(0,a.jsxs)("section",{className:N().layout,children:[(0,a.jsxs)("main",{className:N().layoutCol,children:[(0,a.jsxs)(k,{label:Ie,labelPostfix:De,caption:(0,a.jsx)(an,{isFixed:Se,price:Ne,currencyCode:be,currencyMultiplier:Me,deviation:fe,sign:de,unit:ue}),children:[!Se&&P&&Z&&O.length&&(0,a.jsx)(oe,{sign:de,deviation:fe,unit:ue||we,provider:je,providerItems:O,currencieItems:L,currencyCode:be,onClose:function(){ne.setValue("offer.exchange_price_deviation","")},onChangeSign:function(e){ne.setValue("offer.exchange_price_sign",e)},onCurrencyChange:function(e){"%"!==ue&&ne.setValue("offer.exchange_price_unit",e)}}),Se&&(0,a.jsx)(ae,{currencieItems:L})]}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),(0,a.jsx)(k,{label:v(f?"Amount you want to buy":"Amount you want to sell"),labelPostfix:He,children:(0,a.jsxs)("div",{style:{width:"100%"},children:[!ee&&(0,a.jsx)(pe,{currencyCode:be,currencyType:K,currencyTypeSwitch:Ve,caption:Be,isEdit:d}),ee&&(0,a.jsx)(xe,{currencyCode:be,currencyType:K,currencyTypeSwitch:Ve,caption:Be})]})}),(0,a.jsx)(j.Z,{dashed:!0,visible:!0,color:"gray3",size:"S"}),f&&B&&V.length&&(0,a.jsx)(k,{children:(0,a.jsx)(_.ZP.Item,{isWide:!0,name:"offer.payment_method_ids",required:"".concat(v("These fields are required")),children:(0,a.jsx)(ge,{paymentMethods:V,types:z})})}),!f&&B&&G&&(0,a.jsx)(k,{children:(0,a.jsx)(_.ZP.Item,{isWide:!0,name:"offer.payment_method_instruction_ids",required:"".concat(v("Payment instruction is required")),children:(0,a.jsx)(ze,{paymentInstructions:E,paymentMethods:V,types:z})})})]}),(0,a.jsx)("aside",{className:(0,x.Z)(N().layoutCol,N().stickyCol),children:(0,a.jsx)(on,{countryCode:ne.watch("offer.country_code"),paymentWindow:ne.watch("offer.payment_window_minutes"),confirmations:ne.watch("offer.confirmations"),initialBalance:ke,balance:Pe,stopLoss:ne.watch("offer.stop_loss_value"),firstTrade:ne.watch("offer.first_trade_limit"),displayMethods:f?_e:ye,price:Ne,provider:je,amountMin:le,amountMax:ce,currencyCode:be,deviation:fe,currencyType:K,sign:de,unit:ue,isBuy:f,isEdit:d,isPriceFixed:Se,isRoundClock:he,onFullTime:function(e){e?(ne.setValue("offer.working_hours_start","00:00"),ne.setValue("offer.working_hours_end","00:00")):(ne.resetField("offer.working_hours_start"),ne.resetField("offer.working_hours_end"))}})}),(0,a.jsx)(Ge,{error:J,isBuy:f,isEdit:d})]}),(0,a.jsx)(ln,{}),(0,a.jsx)(_.ZP.Item,{required:!0,name:"offer.side",defaultValue:l,children:(0,a.jsx)(Y,{})}),(0,a.jsx)(_.ZP.Item,{required:!0,name:"offer.price_source",defaultValue:"exchange_rate",children:(0,a.jsx)(Y,{value:te})})]})},dn=function(e){var n=e.children,t=e.title;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.W,{children:(0,a.jsx)(u.Z.Heading,{children:(0,a.jsx)(d.Z,{uppercase:!0,level:1,children:t})})}),(0,a.jsx)(u.W,{containerSize:"sm",children:(0,a.jsx)(u.Z.Content,{isQuiet:!0,p:0,children:n})})]})},un=function(e){var n=e.offer,t=e.side,c=e.isEdit,d=(0,o.Z)((0,v.Ly)(),1)[0],u=(0,o.Z)((0,v.o$)(),1)[0],f=null===n||void 0===n?void 0:n.id,m=(0,v.p5)(f,{skip:!f}),p=(0,l.useRouter)(),x=(0,s.useMemo)((function(){if(n)return(0,v.c)(n)}),[n]);return(0,a.jsx)(cn,{side:t,isEdit:c,defaultValues:x,onSubmit:function(e){if(e){var t=function(e){var n,t,i,r;(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.offer)||void 0===t?void 0:t.id)&&(m.refetch(),p.push("/offers/".concat(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(r=i.offer)||void 0===r?void 0:r.id)))};return c&&n?u((0,r.Z)((0,i.Z)({},e),{id:n.id})).then((function(e){return(0,h.L)(e)})).then((function(e){return t(e)})):d(e).then((function(e){return(0,h.L)(e)})).then((function(e){return t(e)}))}return Promise.resolve()}})},fn=function(){return(0,a.jsxs)("div",{style:{display:"flex",gap:"24px"},children:[(0,a.jsx)(f.Z,{height:"6",style:{width:"50%"}}),(0,a.jsx)(f.Z,{height:"6",style:{width:"50%"}})]})},mn=function(e){var n=e.title,t=e.offer,i=e.isEdit,r=(0,l.useRouter)().asPath,o=(0,m.Z)().t,d=(0,p.Z)().hasUser,u=r.includes("#sell")?"sell":"buy",f=(0,s.useState)((null===t||void 0===t?void 0:t.side)||u),v=f[0],h=f[1],x=!d||i&&!t,_=i?["buy"===(null===t||void 0===t?void 0:t.side)?"sell":"buy"]:void 0;return(0,a.jsx)(dn,{title:n,children:(0,a.jsxs)(c.Z,{variant:"transparent",defaultKey:v,disabledKeys:_,onChange:function(e){h(e)},children:[(0,a.jsx)(c.Z.Tab,{title:o("I want to buy BTC"),children:x?(0,a.jsx)(fn,{}):(0,a.jsx)(un,{isEdit:i,side:v,offer:t})},"buy"),(0,a.jsx)(c.Z.Tab,{title:o("I want to sell BTC"),children:x?(0,a.jsx)(fn,{}):(0,a.jsx)(un,{isEdit:i,side:v,offer:t})},"sell")]})})}},43092:function(e,n,t){"use strict";t.d(n,{O:function(){return i}});var i=function(){(null===window||void 0===window?void 0:window.location)&&(window.location.href="/sign_in")}},14174:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var i=t(14924),r=t(85893),o=t(67294),a=t(86010),s=t(51621),l=t.n(s),c=function(e){var n=e.children;return(0,r.jsx)(r.Fragment,{children:n})},d=Object.assign((function(e){var n=e.children,t=e.variant,s=void 0===t?"solid":t,d=e.defaultKey,u=void 0===d?"":d,f=e.disabledKeys,m=void 0===f?[]:f,v=e.onChange,h=e.isWithHover,p=o.Children.map(n,(function(e,n){if(e.type!==c)throw new Error("Tabs only accepts Tabs.Tab elements");return{index:n,key:e.key,title:e.props.title}})),x=(0,o.useState)(p[0].key),_=x[0],y=x[1],j=p.find((function(e){return e.key===_}));if((0,o.useEffect)((function(){u&&y(u)}),[u]),!j)return null;var b,g=n[j.index];return(0,r.jsxs)("div",{className:(0,a.Z)(l().container,(b={},(0,i.Z)(b,l()["variant--".concat(s)],!!s),(0,i.Z)(b,l().withHover,h),b)),children:[(0,r.jsx)("div",{className:l().tabItems,children:p.map((function(e){var n,t=e.key,o=e.title;return(0,r.jsxs)("div",{className:(0,a.Z)(l().tabItem,(n={},(0,i.Z)(n,l().tabItemActive,_===t),(0,i.Z)(n,l().tabItemDisabled,m.includes(t)),n)),onClick:function(){return function(e){e&&e!==_&&(m.includes(e)||(y(e),v&&v(e)))}(t)},children:[o,(0,r.jsx)("div",{className:(0,a.Z)(l().underline,(0,i.Z)({},l().activeUnderline,_===t))})]},t)}))}),(0,r.jsx)("div",{className:l().body,children:g})]})}),{Tab:c,displayName:"Tabs"});d.displayName="Tabs";var u=d},93349:function(e){e.exports={content:"paymentInstructions_content___BSJM",details:"paymentInstructions_details__FYh4k",priceCaptionTitle:"paymentInstructions_priceCaptionTitle__zK_MN",priceTitle:"paymentInstructions_priceTitle__DjTIs"}},33780:function(e){e.exports={groupContainer:"offerCreate_groupContainer__uSmPp",rateFieldsGroup:"offerCreate_rateFieldsGroup__lEgwz",rateFieldsMargin:"offerCreate_rateFieldsMargin__yzCLA",errorContent:"offerCreate_errorContent__pCSDo",errorMsg:"offerCreate_errorMsg__1NRoQ",rateFields:"offerCreate_rateFields__7ojbp",deviation:"offerCreate_deviation__A5yTd",formGroup:"offerCreate_formGroup__c6Ate",formGroupLabel:"offerCreate_formGroupLabel__Sy3z1",layoutCol:"offerCreate_layoutCol__iwOOF",stickyCol:"offerCreate_stickyCol__nswLF",switchButtons:"offerCreate_switchButtons__lBWG2",hoursField:"offerCreate_hoursField__t2nfd",hoursContent:"offerCreate_hoursContent__M4ace",hoursGroup:"offerCreate_hoursGroup__VCT_2",infoContent:"offerCreate_infoContent__vcw04",infoRow:"offerCreate_infoRow__bq48_",priceContent:"offerCreate_priceContent__EYUML",infoRowTitle:"offerCreate_infoRowTitle__fuggJ",infoRowItem:"offerCreate_infoRowItem__2e7sc",caption:"offerCreate_caption___5YIE",amountGroup:"offerCreate_amountGroup__S2HEr",paymentPanel:"offerCreate_paymentPanel__8abnz",paymentBuyContent:"offerCreate_paymentBuyContent__vavmp",amountContainer:"offerCreate_amountContainer__mT6kR",advancedAmount:"offerCreate_advancedAmount__x3PNB",advancedAmountContent:"offerCreate_advancedAmountContent__Blp4D",switchContent:"offerCreate_switchContent__p1oWm",rangeAmount:"offerCreate_rangeAmount__Uc_xc",rangeAmountGroup:"offerCreate_rangeAmountGroup__DqCrl",columnContentLayout:"offerCreate_columnContentLayout__klWM1",submitGroup:"offerCreate_submitGroup__A621_",paymentMethodItem:"offerCreate_paymentMethodItem__Nisbf",switchContainer:"offerCreate_switchContainer__LPiYh",infoRowPayments:"offerCreate_infoRowPayments__c_4_x",addMarginButton:"offerCreate_addMarginButton__3DgGA",layout:"offerCreate_layout__ZvKwz",rateProvider:"offerCreate_rateProvider__ct1fd"}},67023:function(e){e.exports={checkbox:"checkbox_checkbox__J6io9",input:"checkbox_input__tzL0t"}},10832:function(e){e.exports={checkmark:"checkmark_checkmark__iLnY5",selected:"checkmark_selected__e14Nt",indeterminate:"checkmark_indeterminate__sT1MF"}},64582:function(e){e.exports={container:"expander_container__N8_vH",titleContainer:"expander_titleContainer__z0sN9",icon:"expander_icon__kYDOW",open:"expander_open__sU27w",caption:"expander_caption__KkX5w",unvisible:"expander_unvisible__Tt493",content:"expander_content__zHoNB",visible:"expander_visible__wn0JK"}},95979:function(e){e.exports={tabs:"tabSwitch_tabs__jHO8_",disabled:"tabSwitch_disabled__s187W",tab:"tabSwitch_tab__Hse1f",text:"tabSwitch_text__kpc5C","size--base":"tabSwitch_size--base__7LMb3","size--sm":"tabSwitch_size--sm__ocMOf",input:"tabSwitch_input__MQlRY"}},51621:function(e){e.exports={container:"tabs_container__LPpGD",tabItems:"tabs_tabItems__txghQ",tabItem:"tabs_tabItem__V2aqi",withHover:"tabs_withHover__1PQMI",tabItemActive:"tabs_tabItemActive__tuP2b",underline:"tabs_underline__baSMP",body:"tabs_body__8l3KE","variant--transparent":"tabs_variant--transparent__x3Y85",tabItemDisabled:"tabs_tabItemDisabled__sjFiz",activeUnderline:"tabs_activeUnderline__8yOGc"}}}]);