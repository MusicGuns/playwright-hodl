(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9531],{40944:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/offers/[slug]",function(){return n(74456)}])},65607:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(85893),r=(n(67294),n(86010)),o=n(86740),s=n.n(o),a=function(e){var t=e.color,n=void 0===t?"dai":t,o=e.size,a=void 0===o?"medium":o,l=e.name,c=e.status,d=void 0===c?"offline":c,u=null===l||void 0===l?void 0:l.charAt(0);return(0,i.jsxs)("div",{className:s().avatarContainer,children:[(0,i.jsx)("span",{className:(0,r.Z)(s().avatar,s()["color--".concat(n)],s()["size--".concat(a)]),title:l,"data-testid":"avatar",children:u}),d?(0,i.jsx)("span",{"data-testid":"avatar-status",className:(0,r.Z)(s().status,s()["status--".concat(d)])}):null]})}},80164:function(e,t,n){"use strict";n.d(t,{u:function(){return c},Z:function(){return d}});var i=n(14924),r=n(85893),o=(n(67294),n(86010)),s=n(22128),a=n(43866),l=n.n(a),c=function(e){var t=e.children;return(0,r.jsx)("div",{className:l().group,children:t})},d=function(e){var t,n=(e=(0,s.yS)(e,"icon")).type,a=e.size,c=void 0===a?"base":a,d=e.className;return(0,r.jsx)("span",{className:(0,o.Z)(l().token,(t={},(0,i.Z)(t,l()["type--".concat(n)],n),(0,i.Z)(t,l()["size--".concat(null===c||void 0===c?void 0:c.toLowerCase())],c),t),d),title:n,children:n})}},87875:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var i=n(14924),r=n(26042),o=n(69396),s=n(99534),a=n(85893),l=n(67294),c=n(86010),d=n(38208),u=n(98479),f=n(92234),m=n(30658),h=n(23585),p=n(84647),v=n(23974),_=n.n(v),x=function(e){var t,n=e.children,l=e.state,u=e.textOption,m=e.size,p=(0,s.Z)(e,["children","state","textOption","size"]),v=(0,d.l)(e,l).tooltipProps;return(0,a.jsx)("div",(0,o.Z)((0,r.Z)({className:(0,c.Z)(_().popup,(t={},(0,i.Z)(t,_().longStatus,u),(0,i.Z)(t,_()["size--".concat(m)],m),t))},(0,f.dG)(p,v)),{children:(0,a.jsx)(h.Z,{color:"current",preset:"b2-14r",className:_().text,children:n})}))};var y=function(e){var t=e.children,n=e.tooltip,i=e.textOption,c=e.size,f=(0,s.Z)(e,["children","tooltip","textOption","size"]),h=(0,p.dD)(),v=(0,u.O)(e),y=(0,l.useRef)(null),j=(0,d.Q)(e,v,y),g=j.triggerProps,Z=j.tooltipProps;return(0,a.jsxs)("span",{className:_().tooltip,children:[(0,a.jsx)("span",{className:_().tooltipButton,children:(0,a.jsx)(m.ZP,(0,o.Z)((0,r.Z)({ref:y},g,f),{isQuiet:!0,onPress:function(){h&&(v.isOpen?v.close(!0):v.open(!0))},children:t}))}),v.isOpen&&(0,a.jsx)(x,(0,o.Z)((0,r.Z)({state:v,textOption:i,size:c},Z),{children:n}))]})}},74456:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return xt}});var i=n(85893),r=n(67294),o=n(9008),s=n.n(o),a=n(11163),l=n(20709),c=n(84946),d=n(23585),u=n(65607),f=n(90837),m=n(44916),h=n(97153),p=n(57533),v=n(26042),_=n(69396),x=n(24419),y=n(84647),j=n(15033),g=n.n(j),Z=function(e){var t=e.children,n=e.isDisabled,o=e.title,s=(0,r.useState)(!1),a=s[0],l=s[1],c=(0,x.XI)({isDisabled:n}),d=c.hoverProps,u=c.isHovered,f=(0,y.ac)("(min-width: ".concat(y.FB.xl,")")),m=(0,x.r7)({onPress:function(){return f?null:l(!a)}}).pressProps;return(0,i.jsxs)("div",(0,_.Z)((0,v.Z)({className:g().wrappButton},d,m),{children:[t,u||a?(0,i.jsx)("span",{className:g().content,children:o}):null]}))},w=n(22128),b=n(77857),N=function(e){return(0,i.jsx)("svg",(0,_.Z)((0,v.Z)({fill:"none",viewBox:"0 0 20 20","aria-hidden":"true"},e),{children:(0,i.jsx)("path",{fill:"currentColor",d:"M10 2a8 8 0 1 1 0 16 8 8 0 0 1 0-16Zm0 1a7 7 0 1 0 0 14 7 7 0 0 0 0-14Zm0 10.5a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm0-8a2.5 2.5 0 0 1 1.651 4.377l-.154.125-.219.163-.087.072a1.968 1.968 0 0 0-.156.149c-.339.36-.535.856-.535 1.614a.5.5 0 0 1-1 0c0-1.012.293-1.752.805-2.298a3.11 3.11 0 0 1 .356-.323l.247-.185.118-.1A1.5 1.5 0 1 0 8.5 8a.5.5 0 0 1-1 .001A2.5 2.5 0 0 1 10 5.5Z"})}))};var P,S,C=function(e){return e=(0,w.yS)(e,"icon"),(0,i.jsx)(b.Z,(0,_.Z)((0,v.Z)({},e),{children:(0,i.jsx)(N,{})}))},k=n(87875),F=n(69095),I=n(18485),T=n(44647),O=n(90339),B=n(86431),M=n.n(B),E=n(85905),z=n(44412),D=n(30658),V=n(14924),L=n(86010),W=n(92234),R=n(90650),A=n(11373),H=n.n(A),U=(0,r.forwardRef)((function(e,t){var n,o,s,a=(e=(0,w.yS)(e,"textExpand")).className,l=e.children,c=e.as,d=void 0===c?"div":c,u=e.size,f=e.weight,m=e.preset,h=e.collapseText,p=e.expandText,x=e.height,j=void 0===x?50:x,g=e.width,Z=void 0===g?640:g,b=d||"div",N=(0,r.useRef)(null),P=(0,r.useState)(!0),S=P[0],C=P[1],k=(0,r.useState)(!0),F=k[0],I=k[1],T=(0,R.v)(e),O=(0,y.dD)(),B=(0,r.useState)(null===N||void 0===N||null===(n=N.current)||void 0===n?void 0:n.offsetWidth),M=B[0],E=B[1],z=(0,r.useState)(null===N||void 0===N||null===(o=N.current)||void 0===o?void 0:o.offsetHeight),A=z[0],U=z[1];(0,r.useImperativeHandle)(t,(function(){return N.current}));var q={className:(0,L.Z)(a,H().content,(s={},(0,V.Z)(s,H()["size--".concat(u)],u),(0,V.Z)(s,H()["weight--".concat(f)],f),(0,V.Z)(s,H()["preset--".concat(m)],m),(0,V.Z)(s,H().visible,S),s))};(0,r.useEffect)((function(){var e,t;E(null===N||void 0===N||null===(e=N.current)||void 0===e?void 0:e.offsetWidth),U(null===N||void 0===N||null===(t=N.current)||void 0===t?void 0:t.offsetHeight),I(!(M&&M>Z&&!O||!(A&&A>=j)))}),[M,A,O,Z,j,l]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b,(0,_.Z)((0,v.Z)({},(0,W.dG)(q,T)),{ref:N,children:l})),F&&(0,i.jsx)(D.ZP,{variant:"primaryFlat",className:H().collapse,onPress:function(){return C((function(e){return!e}))},children:S?h:p})]})})),q=function(e){var t=e.description,n=e.title,r=e.isOpen,o=(0,l.Z)().t,s=(0,y.dD)();return(0,i.jsx)("div",{children:s?(0,i.jsxs)(E.hg,{hideArrow:!0,mobileType:"tray",placement:"bottom start",isOpen:r,offset:10,preventPressOutside:!1,type:"tray",children:[(0,i.jsx)(U,{collapseText:(0,i.jsx)(D.ZP,{variant:"primaryFlat",size:12,iconSize:"M",isToggled:r,children:o("...read offer details")}),size:"base",weight:"normal",mt:3,children:(0,i.jsx)("div",{className:M().descriptionContainerMobile,children:t})}),(0,i.jsxs)(E.Vq,{headerIsMobile:!0,closeIconWeight:"normal",children:[(0,i.jsx)(z.h,{children:(0,i.jsx)(h.Z,{align:"center",className:M().heading,children:(0,i.jsx)("p",{children:o("Offer description")})})}),(0,i.jsxs)(z.V,{padding:4,maxHeight:500,children:[n&&(0,i.jsx)(h.Z,{className:M().heading,children:n}),(0,i.jsx)("div",{className:M().fullDescriptionMobile,children:t})]})]})]}):(0,i.jsx)(U,{className:(null===t||void 0===t?void 0:t.length)>700?M().textExpandFull:M().textExpand,collapseText:"hide",expandText:"...read offer details",size:"base",weight:"normal",width:(null===t||void 0===t?void 0:t.length)>700?1304:640,mt:3,children:t})})},G=function(e){var t=e.text;return(0,i.jsx)(k.Z,{tooltip:t,delay:0,children:(0,i.jsx)(C,{color:"primary"})})},K=function(e){var t=e.price,n=e.amountMin,r=e.amountMax,o=e.currencyCode,s=(0,I.U)();if(!n||!r||!t)return null;var a="",l=(0,F._z)((0,O.Z)(n/t)),c=(0,F._z)((0,O.Z)(r/t));null!==l&&null!==c&&(a=(0,F.tD)(["".concat(l),"".concat(c)]));var u=(0,F.tD)([s.format(n),s.format(r)]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,{className:M().limitsValue,color:"primaryBrown",children:"".concat(u," ").concat(o)}),(0,i.jsxs)(d.Z,{className:M().limitsValueBtc,color:"grey700",children:[a,"\xa0","BTC"]})]})},Q=function(e){var t,n=e.offer,r=(0,l.Z)().t,o=100*(0,F.Hq)(null===n||void 0===n?void 0:n.rating),s=(0,I.U)(),a=(0,F.He)(null===n||void 0===n?void 0:n.price)||0,c=(null===n||void 0===n?void 0:n.paymentMethods)||[],v=null===n||void 0===n?void 0:n.title,_=null===n||void 0===n?void 0:n.description,x=v||_,y=null===n||void 0===n?void 0:n.username,j=null===n||void 0===n?void 0:n.onlineStatus,g=(0,F.He)(null===n||void 0===n?void 0:n.tradesCount)||0,w=(0,F.He)(null===n||void 0===n?void 0:n.amountMin)||0,b=(0,F.He)(null===n||void 0===n?void 0:n.amountMax)||0,N=null===n||void 0===n?void 0:n.currencyCode,P=null===n||void 0===n?void 0:n.paymentWindow,S=null===n||void 0===n?void 0:n.confirmations,C=null===n||void 0===n?void 0:n.country,k={online:r("offers_table_user_online"),offline:r("offers_table_user_offline"),recently_online:r("offers_table_user_recently_online")}[j||"offline"];return(0,i.jsxs)("div",{className:M().container,children:[(0,i.jsxs)("div",{className:M().body,children:[(0,i.jsxs)("div",{className:M().sellerRow,children:[(0,i.jsxs)(d.Z,{className:M().sellername,children:[(0,i.jsx)(Z,{title:k,children:(0,i.jsx)(u.Z,{name:y,color:"primary",status:j,size:"md"})}),(0,i.jsx)(f.Z,{className:M().sellerText,href:"/users/".concat(y),children:y})]}),(0,i.jsxs)(d.Z,{block:!0,className:M().sellerStats,color:"grey700",children:[isNaN(o)&&0===g&&r("offers_table_user_no_rating"),!isNaN(o)&&0!==g&&r("offers_table_user_count_one",{count:o})+", "+r("offers_table_user_deals",{count:g}),isNaN(o)&&0!==g&&r("offers_table_user_no_rating")+", "+r("offers_table_user_deals",{count:g}),!isNaN(o)&&0===g&&r("offers_table_user_count_one",{count:o})]}),(0,i.jsxs)(d.Z,{block:!0,className:M().sellerStatsMobile,color:"grey700",children:[isNaN(o)&&0===g&&r("offers_table_user_no_rating"),!isNaN(o)&&0!==g&&r("offers_table_user_count_one",{count:o})+", "+r("offers_table_user_deals",{count:Number(g)}),isNaN(o)&&0!==g&&r("offers_table_user_no_rating")+", "+r("offers_table_user_deals",{count:Number(g)}),!isNaN(o)&&0===g&&r("offers_table_user_count_one",{count:o})]})]}),(0,i.jsxs)("div",{className:M().info,children:[(0,i.jsxs)("div",{className:M().prices,children:[(0,i.jsxs)("div",{className:M().priceRow,children:[(0,i.jsx)(d.Z,{className:M().priceTitle,color:"grey700",children:r("Price")}),(0,i.jsxs)(d.Z,{className:M().price,children:[(0,i.jsxs)(d.Z,{className:M().priceValue,color:"primaryBrown",children:[s.format(Math.floor(a)),"."]}),(0,i.jsx)(d.Z,{className:M().priceDecimal,color:"primaryBrown",mr:1,children:(t=a,t.toFixed(2).slice(-2))}),(0,i.jsx)(d.Z,{className:M().priceCurrency,color:"primaryBrown",ml:.5,children:N})]})]}),(0,i.jsxs)("div",{className:M().limitRow,children:[(0,i.jsx)(d.Z,{className:M().limitTitle,color:"grey700",children:r("Limits")}),(0,i.jsx)("div",{className:M().limit,children:(0,i.jsx)(K,{price:a,amountMin:w,amountMax:b,currencyCode:N})})]})]}),(0,i.jsx)(p.Z,{dashed:!0,visible:!0,className:M().dashedDivider,size:"S",orientation:"horizontal"}),(0,i.jsxs)("div",{className:M().detailsRow,children:[(0,i.jsxs)("div",{className:M().details,children:[(0,i.jsx)(d.Z,{className:M().location,color:"grey700",children:r("Location")}),(0,i.jsx)(d.Z,{className:M().country,color:"primaryBrown",children:C})]}),(0,i.jsxs)("div",{className:M().details,children:[(0,i.jsx)(d.Z,{className:M().location,color:"grey700",children:r("Payment window")}),(0,i.jsx)(G,{text:r("The payment window is the time within which the Buyer must complete the payment. The timeframe must reflect the selected payment method. When the payment window runs out, the Seller can cancel the contract or start the dispute if the payment has been initiated but not received.")}),(0,i.jsx)(d.Z,{className:M().paymentWindow,color:"primaryBrown",children:"".concat(P," min.")})]}),(0,i.jsxs)("div",{className:M().details,children:[(0,i.jsx)(d.Z,{className:M().confirmationsTitle,color:"grey700",children:r("BTC confirmations")}),(0,i.jsx)(d.Z,{className:M().confirmations,color:"primaryBrown",children:"".concat(S," confirmation")})]})]})]}),(0,i.jsxs)("div",{className:M().paymentsRow,children:[(0,i.jsx)(d.Z,{className:M().paymentsTitle,color:"grey700",children:r("Payment methods")}),(0,i.jsx)("div",{className:M().payments,children:c.map((function(e){return(0,i.jsx)(T.Z,{type:e.type,name:e.name},e.id||e.name)}))})]})]}),x&&(0,i.jsxs)(m.Z,{className:M().panel,variant:"grey",children:[v&&(0,i.jsx)(h.Z,{className:M().heading,children:v}),_&&(0,i.jsx)(q,{description:_,title:v})]})]})},Y=n(99534),X=n(70656),J=n.n(X),$=function(e){var t=e.children,n=(0,Y.Z)(e,["children"]),r=(0,y.dD)(),o=r?12:10,s=r?"xl":"base";return(0,i.jsx)(f.Z,(0,_.Z)((0,v.Z)({},n),{text:s,weight:"medium",size:o,children:t}))},ee=function(e){var t=e.title,n=e.text,r=(0,l.Z)().t,o=[{variant:"primary",weight:"medium",href:"/sign_up",text:r("views.layouts.links.sign_up")},{variant:"primaryBrown",href:"/sign_in",text:r("views.layouts.links.log_in")}];return(0,i.jsxs)("div",{className:J().container,children:[(0,i.jsx)(z.h,{mb:3,children:(0,i.jsx)(d.Z,{preset:"s1-20m",color:"grey900",children:t})}),(0,i.jsx)(d.Z,{color:"darkGrey",children:n}),(0,i.jsx)("div",{className:J().buttons,children:o.map((function(e){var t=e.text,n=(0,Y.Z)(e,["text"]);return(0,i.jsx)($,(0,_.Z)((0,v.Z)({},n),{children:t}),n.href)}))})]})},te=n(64478),ne=n(31808),ie=n(4982),re=function(){var e=(0,l.Z)().t,t=[{title:"1",text:e("offer_accept_step_1_title"),active:!0},{title:"2",text:e("offer_accept_step_2_title"),active:!1},{title:"3",text:e("offer_accept_step_3_title"),active:!1},{title:"4",text:e("offer_accept_step_4_title"),active:!1},{title:"5",text:e("offer_accept_step_5_title"),active:!1}];return(0,i.jsx)(R.Z,{mx:8,children:(0,i.jsx)(ie.Z,{steps:t})})},oe=n(1168),se=n.n(oe),ae=function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:se().desktopSkeleton,children:[(0,i.jsxs)("div",{className:se().infoPanelInfo,children:[(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"137px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"185px"}})]}),(0,i.jsxs)("div",{className:se().infoPanelPriceLimit,children:[(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"176px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"255px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"226px"}})]}),(0,i.jsxs)("div",{className:se().infoPanelAddInfo,children:[(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"176px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"213px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"260px"}})]}),(0,i.jsx)("div",{className:se().infoPanelPaymentMethod,children:(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"176px"}})})]}),(0,i.jsxs)("div",{className:se().tabletSkeleton,children:[(0,i.jsxs)("div",{className:se().infoPanelInfo,children:[(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"137px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"185px"}})]}),(0,i.jsxs)("div",{className:se().infoPanelPriceLimit,children:[(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"176px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"195px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"139px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"213px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"260px"}})]}),(0,i.jsx)("div",{className:se().infoPanelAddInfo,children:(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"160px"}})})]}),(0,i.jsxs)("div",{className:se().mobileSkeleton,children:[(0,i.jsxs)("div",{className:se().infoPanelInfo,children:[(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"65%"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"30%"}})]}),(0,i.jsxs)("div",{className:se().infoPanelPriceLimit,children:[(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"176px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"204px"}})]}),(0,i.jsx)(ne.Z,{dashed:!0,visible:!0,size:"S",color:"grayLight"}),(0,i.jsxs)("div",{className:se().infoPanelAddInfo,children:[(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"215px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"237px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"176px"}})]}),(0,i.jsx)("div",{children:(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"100px"}})})]})]})},le=function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:se().offerPaneldesktopSkeleton,children:[(0,i.jsx)("div",{children:(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"180px"}})}),(0,i.jsxs)("div",{className:se().offersPanelAddInfo,children:[(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"652px"}}),(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"652px"}})]})]}),(0,i.jsxs)("div",{className:se().offerPanelTabletSkeleton,children:[(0,i.jsx)("div",{children:(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"180px"}})}),(0,i.jsx)("div",{children:(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"720px"}})}),(0,i.jsx)("div",{children:(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"720px"}})})]}),(0,i.jsxs)("div",{className:se().offerPanelMobileSkeleton,children:[(0,i.jsx)("div",{children:(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"180px"}})}),(0,i.jsx)("div",{children:(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"100%"}})}),(0,i.jsx)("div",{children:(0,i.jsx)(te.Z,{ml:1,height:"6",style:{width:"100%"}})})]}),(0,i.jsx)(re,{})]})},ce=n(53183),de=n(47568),ue=n(828),fe=n(20414),me=n(56316),he=n(46259),pe=n.n(he),ve=n(80164),_e=n(29626),xe=n(27715),ye=n(35626),je=function(e){return(0,ye.js)().update(e).digest()};!function(e){e.mainnet="mainnet",e.testnet="testnet",e.regtest="regtest"}(P||(P={})),function(e){e.p2pkh="p2pkh",e.p2sh="p2sh",e.p2wpkh="p2wpkh",e.p2wsh="p2wsh",e.p2tr="p2tr"}(S||(S={}));var ge={0:{type:S.p2pkh,network:P.mainnet},111:{type:S.p2pkh,network:P.testnet},5:{type:S.p2sh,network:P.mainnet},196:{type:S.p2sh,network:P.testnet}},Ze=function(e){var t,n=e.substr(0,2).toLowerCase();if("bc"===n||"tb"===n)return function(e){var t;try{t=e.startsWith("bc1p")||e.startsWith("tb1p")||e.startsWith("bcrt1p")?xe.iE.decode(e):xe.gW.decode(e)}catch(r){throw new Error("Invalid address")}var n={bc:P.mainnet,tb:P.testnet,bcrt:P.regtest}[t.prefix];if(void 0===n)throw new Error("Invalid address");var i=t.words[0];if(i<0||i>16)throw new Error("Invalid address");return{bech32:!0,network:n,address:e,type:20===xe.gW.fromWords(t.words.slice(1)).length?S.p2wpkh:1===i?S.p2tr:S.p2wsh}}(e);try{t=(0,_e.j)(e)}catch(c){throw new Error("Invalid address")}var i=t.length;if(25!==i)throw new Error("Invalid address");var r=t[0],o=t.slice(i-4,i),s=t.slice(0,i-4),a=je(je(s)).slice(0,4);if(o.some((function(e,t){return e!==a[t]})))throw new Error("Invalid address");if(!Object.keys(ge).map(Number).includes(r))throw new Error("Invalid address");var l=ge[r];return(0,_.Z)((0,v.Z)({},l),{address:e,bech32:!1})},we=function(e,t){try{var n=Ze(e);return!t||t===n.network}catch(i){return!1}},be=n(42004),Ne=n(22791),Pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return e&&(null===e||void 0===e?void 0:e.length)>0?"".concat(e.slice(0,t),"...").concat(e.slice(-1*t)):""},Se=function(){var e=(0,l.Z)().t,t=(0,me.Gc)().watch,n=(0,y.dD)(),r=t("contract.release_address"),o=!!r&&we(r||""),s=(0,i.jsx)(i.Fragment,{children:n&&(0,i.jsxs)(d.Z,{block:!0,color:"current",children:[e("Bitcoin address:"),r&&o&&(0,i.jsx)(Ne.Z,{variant:"solid",status:"info",children:Pe(r)})]})});return(0,i.jsxs)("div",{className:pe().inputWrapper,children:[(0,i.jsxs)(d.Z,{preset:"b1-16m",children:[(0,i.jsx)(ve.Z,{type:"BTC",size:"s"})," ",e("Bitcoin address")]}),(0,i.jsx)(me.ZP.Item,{name:"contract.release_address",rules:{validate:function(t){return!t||(!!we(t)||e("Incorrect Bitcoin address"))}},caption:s,children:(0,i.jsx)(be.Z,{isWide:!0,showValidationIcon:o,validationState:o?"valid":void 0})})]})};function Ce(e){var t="which"in e?e.which:e.keyCode;return!(69==t||101==t)}var ke=function(e){var t=e.currencyCode,n=e.isValueFirst,o=e.isDisabled,s=e.error,a=e.price,l=e.caption,c=e.defaultValue,u=e.validationState,f=e.onChange,m=e.onBlur,h=(0,Y.Z)(e,["currencyCode","isValueFirst","isDisabled","error","price","caption","defaultValue","validationState","onChange","onBlur"]),p=(0,F.He)(c)||0,x=(0,y.dD)(),j=(0,r.useRef)(""),g=(0,r.useState)(p?String(p/a):void 0),Z=g[0],w=g[1],b=(0,r.useState)(p?String(p):void 0),N=b[0],P=b[1],S=function(e){var t=(0,F.He)(e);e.length<=24&&(P(e),"value"===j.current&&w(t?String((0,F._z)((0,O.Z)(t/a))):""),f&&f(e))},C=(0,i.jsx)(d.Z,{children:t}),k=(0,i.jsx)(be.Z,(0,_.Z)((0,v.Z)({},h),{isWide:!0,validateOnType:!0,isDisabled:o,validationState:u,showErrorText:!1,pattern:"^[0-9.]*$",inputMode:"numeric",max:"99999999",step:"0.01",postfix:C,value:N?String(N):"",maxLength:12,onKeyDown:Ce,onChange:S,onFocus:function(){j.current="value"},onBlur:m})),I=(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(ve.Z,{type:"BTC",size:"s"})," BTC"]}),T=(0,i.jsx)(be.Z,{isWide:!0,validateOnType:!0,isDisabled:o,pattern:"^[0-9.]*$",inputMode:"numeric",max:"99999999",step:"0.0001",validationState:u,showErrorText:!1,postfix:I,value:Z?String(Z):"",maxLength:14,onKeyDown:Ce,onChange:function(e){var t=(0,F.He)(e);e.length<=24&&(w(e),"volume"===j.current&&S(t?String(t*a):""))},onFocus:function(){j.current="volume"},onBlur:m});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:pe().inputContainer,children:[n?k:T,!x&&(0,i.jsx)("span",{children:"="}),n?T:k]}),l&&(0,i.jsx)(d.Z,{color:"grey800",preset:"c-12r",mt:1.5,children:l}),s&&(0,i.jsx)(d.Z,{color:"error",preset:"c-12r",role:"alert",mt:1.5,children:s})]})},Fe=function(e){var t=e.currencyCode,n=e.amountMin,o=e.amountMax,s=e.isValueFirst,a=e.price,c=(0,l.Z)().t,u=(0,I.U)(),f=c(s?"I want to sell BTC":"I want to buy BTC for"),m=c(s?"Enter the amount you are looking to sell":"Enter the amount you are looking to buy"),h=function(e){return!(!n||!o)&&(!(e<n||e>o)||c("The amount is out of the allowed range. Allowed trade amount is from {{min}} to {{max}} {{currency}}.",{min:u.format(n),max:u.format(o),currency:t}))},p=(0,r.useMemo)((function(){return{required:"".concat(c("Values is required")),validate:h}}),[n,o]);return(0,i.jsxs)("div",{className:pe().inputWrapper,children:[(0,i.jsx)(d.Z,{preset:"b1-16m",children:f}),(0,i.jsx)(me.ZP.Item,{isWide:!0,name:"contract.value",rules:p,caption:m,children:(0,i.jsx)(ke,{isValueFirst:!s,price:a,currencyCode:t})})]})},Ie=function(e){var t=e.text;return(0,i.jsx)(k.Z,{tooltip:t,delay:0,children:(0,i.jsx)(C,{color:"primary"})})},Te=function(e){var t=e.title,n=e.isGreen,r=e.isCapitalize;return(0,i.jsx)(Ne.Z,{status:n?"darkGreen":"orangeBg",variant:"solid",preset:"b2-14m",isCapitalize:r,children:t})},Oe=function(e){var t=e.title,n=e.withBorder,r=void 0!==n&&n,o=e.children;return(0,i.jsxs)("div",{className:pe().panelItem,children:[(0,i.jsx)(d.Z,{block:!0,gap:"2",items:"center",color:"grey700",preset:"b1-16r",children:t}),(0,i.jsx)("div",{className:pe().panelItemBody,children:o}),r&&(0,i.jsx)(p.Z,{dashed:!0,visible:!0,color:"gray3",size:"S",mt:5,mb:5})]})},Be=function(e){var t=e.value,n=e.price,r=e.currencyCode,o=(0,I.U)(),s=(0,O.Z)(t),a=s.times(n).round(2).toNumber(),l=o.format(a),c=t?"".concat((0,F._z)(s)," BTC \u2248").concat(l," ").concat(r):"- BTC";return(0,i.jsx)(d.Z,{children:c})},Me=function(e){var t=e.side,n=e.fee,r=e.value,o=e.price,s=e.intermediaryFee,a=void 0===s?"0":s,c=e.transactionFee,d=void 0===c?"0":c,u=e.transactionFeeLevel,f=e.transactionCustomFee,h=e.currencyCode,p="sell"===t,v="buy"===t,_=(0,l.Z)().t,x=(0,O.Z)(r/o),y=(0,O.Z)(n),j=(0,O.Z)(d),g=(0,O.Z)(a),Z=x.times(y),w=x.plus(Z),b=x.minus(Z),N=x.times(g),P=g.times(100).toNumber(),S=_("Fees are charged in Bitcoin and deducted from the deposit upon its release. Fees are equally divided between both contract parties. The amount the Seller initially deposits to escrow includes his fee, while the Buyer receives his bitcoins minus his part of the fee."),C=_('Estimated transaction fee is based on the current mempool state and the "Transaction fee type" specified in your Dashboard settings, there you can choose what transaction fee level the trading platform will use for your withdrawals.'),k=_("A fee charged by our partner if you perform the deal through the partner's means, such as the Trezor Suite application, or have been referred to the platform by that intermediary."),F=null!==f?": ".concat(f," Sat/vB"):"";return(0,i.jsxs)(m.Z,{variant:"grey",children:[(0,i.jsx)(Oe,{withBorder:!0,title:_(p?"Amount to buy":"Amount to sell"),children:(0,i.jsx)(Be,{value:x.round(8).toFixed(),price:o,currencyCode:h})}),(0,i.jsxs)(Oe,{withBorder:!0,title:(0,i.jsxs)(i.Fragment,{children:[_("Trading fee"),(0,i.jsx)(Ie,{text:S})]}),children:[(0,i.jsx)(Te,{title:"".concat(_("FEE")," ").concat(y.times(100).toFixed(),"%")}),(0,i.jsx)(Be,{value:Z.round(8).toFixed(),price:o,currencyCode:h})]}),v&&(0,i.jsx)(Oe,{withBorder:!0,title:(0,i.jsx)(i.Fragment,{children:_("Amount to be deposited in escrow")}),children:(0,i.jsx)(Be,{value:w.round(8).toFixed(),price:o,currencyCode:h})}),p&&(0,i.jsx)(Oe,{withBorder:!0,title:(0,i.jsx)(i.Fragment,{children:_("Amount to be received, excluding transaction fee")}),children:(0,i.jsx)(Be,{value:b.round(8).toFixed(),price:o,currencyCode:h})}),(0,i.jsxs)(Oe,{withBorder:!0,title:(0,i.jsxs)(i.Fragment,{children:[_("Intermediary fee"),(0,i.jsx)(Ie,{text:k})]}),children:[(0,i.jsx)(Te,{title:"".concat(_("FEE")," ").concat(P,"%")})," ",(0,i.jsx)(Be,{value:N.toFixed(),price:o,currencyCode:h})]}),p&&(0,i.jsxs)(Oe,{title:(0,i.jsxs)(i.Fragment,{children:[_("Estimated transaction fee"),(0,i.jsx)(Ie,{text:C})]}),children:[u&&(0,i.jsx)(Te,{isCapitalize:!0,isGreen:!0,title:"".concat(u," ").concat(F)}),(0,i.jsx)(Be,{value:j.round(8).toFixed(),price:o,currencyCode:h})]})]})},Ee=n(872),ze=function(e){var t,n=e.items,r=e.name,o=e.onChange,s=(0,l.Z)().t,a=1===(null===n||void 0===n?void 0:n.length)?null===(t=n[0])||void 0===t?void 0:t.value:void 0;return(0,i.jsxs)("div",{className:pe().inputWrapper,children:[(0,i.jsx)(d.Z,{preset:"b1-16m",children:s("Payment method")}),(0,i.jsx)(me.ZP.Item,{required:"".concat(s("Payment method is required")),name:r,defaultValue:a,children:(0,i.jsx)(Ee.Z,{disableOnSingleItem:!0,items:n,"aria-label":s("Payment method"),placeholder:s("Select payment method"),onChange:o})})]})},De=n(64924),Ve=n(88267),Le=function(e){var t=e.children,n=(0,l.Z)().t;return(0,i.jsxs)("div",{className:pe().inputWrapper,children:[(0,i.jsx)(d.Z,{preset:"b1-16m",children:n("My payment instruction")}),t]})},We=function(e){var t,n,o=e.name,s=e.item,a=e.items,c=e.isEmpty,u=e.isDisabled,f=e.defaultValue,h=e.offerPaymentMethod,p=e.offerPaymentMethods,x=e.InstructionCreateModal,y=(0,l.Z)().t,j=(0,r.useState)(!1),g=j[0],Z=j[1],w=(0,r.useState)(!1),b=w[0],N=w[1],P=(0,me.Gc)(),S=P.formState,C=P.setValue,k=null===S||void 0===S||null===(t=S.errors)||void 0===t||null===(n=t.contract)||void 0===n?void 0:n.payment_method_instruction_id,I=k?(0,i.jsx)(d.Z,{color:"error",preset:"c-12r",children:k.message}):null,T=(0,r.useMemo)((function(){var e,t;return{id:(null===s||void 0===s?void 0:s.value)||"",method:(null===s||void 0===s||null===(e=s.paymentMethod)||void 0===e?void 0:e.name)||"",type:(null===s||void 0===s||null===(t=s.paymentMethod)||void 0===t?void 0:t.type)||"",name:(null===s||void 0===s?void 0:s.name)||"",details:(null===s||void 0===s?void 0:s.details)||""}}),[s]),O=(0,r.useMemo)((function(){return{method:(null===h||void 0===h?void 0:h.name)||"",type:(null===h||void 0===h?void 0:h.type)||""}}),[h]),B=(0,r.useMemo)((function(){return null===p||void 0===p?void 0:p.map((function(e){return(0,_.Z)((0,v.Z)({},e),{id:e.value})}))}),[p]),M=(0,r.useMemo)((function(){return(0,F.TE)(null===p||void 0===p?void 0:p.map((function(e){return(null===e||void 0===e?void 0:e.type)||""})).filter((function(e){return!!e})))}),[p]),V=function(e){(null===e||void 0===e?void 0:e.id)&&C(o,e.id)},L=(0,i.jsxs)(E.hg,{type:"modal",mobileType:"fullscreenTakeover",isOpen:g,preventPressOutside:!1,isDismissable:!1,children:[(0,i.jsx)(D.ZP,{isWide:!0,isDisabled:u,variant:"primaryOutline",size:12,icon:(0,i.jsx)(Ve.Z,{}),iconSize:"M",onPress:function(){return Z(!0)},children:y("Create new payment instruction")}),(0,i.jsx)(E.Vq,{mobileType:"fullscreenTakeover",children:(0,i.jsx)(z.V,{style:{maxWidth:"33.75rem"},children:g&&(0,i.jsx)(x,{defaultValues:O,methods:B,types:M,onSubmit:V,onClose:function(){return Z(!1)}})})})]}),W=(0,i.jsxs)(E.hg,{type:"modal",mobileType:"fullscreenTakeover",isOpen:b,preventPressOutside:!1,isDismissable:!1,children:[(0,i.jsx)(D.ZP,{icon:(0,i.jsx)(De.Z,{}),isDisabled:u,variant:"primaryFlat",onPress:function(){return N(!0)},children:y("Edit")}),(0,i.jsx)(E.Vq,{mobileType:"fullscreenTakeover",children:(0,i.jsx)(z.V,{style:{maxWidth:"33.75rem"},children:b&&(0,i.jsx)(x,{methods:B,types:M,defaultValues:T,onSubmit:V,onClose:function(){return N(!1)}})})})]});return c?(0,i.jsx)(Le,{children:(0,i.jsxs)("section",{children:[I,L]})}):(0,i.jsxs)(Le,{children:[(0,i.jsx)(me.ZP.Item,{required:"".concat(y("Payment instruction is required")),name:o,defaultValue:f,children:(0,i.jsx)(Ee.Z,{disableOnSingleItem:!0,items:a,"aria-label":y("Select payment instruction"),placeholder:y("Select payment instruction")})}),s&&(0,i.jsx)(m.Z,{variant:"gradient",title:s.name,titlePostfix:W,children:(0,i.jsx)("div",{className:pe().details,children:s.details})}),(0,i.jsx)("section",{children:L})]})},Re=function(e){var t=e.value,n=e.currencyCode,r=e.error,o=e.isLoading,s=e.isDisabled,a=(0,l.Z)().t,c=(0,I.U)(),u=(0,F._z)(t,2)||0,f="".concat(c.format(u)," ").concat(n),m=t?a("Accept offer for {{context}}",{context:f}):a("offer_accept"),h=r?(0,i.jsx)(d.Z,{color:"error",preset:"c-12r",mb:4,children:r}):null;return(0,i.jsxs)("div",{children:[h,(0,i.jsx)(me.ZP.Submit,{isWide:!0,isLoading:o,isDisabled:s,variant:"primary",size:12,weight:"medium",children:m})]})},Ae=function(e){var t,n=e.defaultValues,o=e.currencyCode,s=e.userPaymentInstructions,a=void 0===s?[]:s,d=e.offerPaymentMethods,u=void 0===d?[]:d,f=e.offerPaymentInstructions,m=void 0===f?[]:f,h=e.feeRate,p=e.transactionFee,v=e.transactionFeeLevel,_=e.transactionCustomFee,x=e.side,j=e.price,g=e.amountMin,Z=e.amountMax,w=e.InstructionCreateModal,b=e.isDisabled,N=e.onSubmit,P=(0,me.cI)({defaultValues:n}),S=(0,l.Z)().t,C="xl"===(0,y.BF)(),k="sell"===x,I="buy"===x,T=(0,r.useState)(""),O=T[0],B=T[1],M=P.watch("contract.payment_method_id"),E=(0,F.He)(P.watch("contract.value"))||0,z=a.filter((function(e){var t;return String(null===(t=e.paymentMethod)||void 0===t?void 0:t.id)===String(M)})),D=u.find((function(e){return String(e.value)===String(M)})),V=1===(null===z||void 0===z?void 0:z.length)?null===(t=z[0])||void 0===t?void 0:t.value:void 0,W=P.watch("contract.payment_method_instruction_id")||V,R=0===(null===a||void 0===a?void 0:a.length)||0===(null===z||void 0===z?void 0:z.length),A=a.find((function(e){return String(e.value)===String(W)})),H=(0,i.jsx)(Re,{value:E,error:O,currencyCode:o,isDisabled:b});return(0,r.useEffect)((function(){(null===A||void 0===A?void 0:A.value)&&P.setValue("contract.payment_method_instruction_id",null===A||void 0===A?void 0:A.value)}),[A]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(me.ZP,{state:P,className:pe().formContainer,onSubmit:function(e){return B(""),e.contract.payment_method_instruction_id?N?N(e).catch((function(e){var t;"error"in e&&"data"in e.error&&function(e){(0,me.Ih)({data:e,ns:"contract",onError:function(e,t){"base"===e?B(t):P.setError(e,{message:t})}})}(null===(t=e.error)||void 0===t?void 0:t.data)})):void 0:(P.setError("contract.payment_method_instruction_id",{message:"".concat(S(I?"Payment instruction is required":"Payment method is required"))}),!1)},children:[(0,i.jsxs)(c.Z.Group,{isWrap:!C,gap:8,children:[(0,i.jsxs)("main",{className:(0,L.Z)(pe().main,pe().column),children:[(0,i.jsx)(Fe,{isValueFirst:I,price:j,amountMin:g,amountMax:Z,currencyCode:o}),I&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ze,{items:u,name:"contract.payment_method_id",onChange:function(){return P.setValue("contract.payment_method_instruction_id","")}}),(0,i.jsx)(We,{name:"contract.payment_method_instruction_id",InstructionCreateModal:w,offerPaymentMethods:u,offerPaymentMethod:D,item:A,items:z,defaultValue:V,isEmpty:R,isDisabled:!M})]}),k&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Se,{}),(0,i.jsx)(ze,{items:m,name:"contract.payment_method_instruction_id"})]}),C&&H]}),(0,i.jsx)("aside",{className:(0,L.Z)(pe().aside,pe().column),children:(0,i.jsx)(Me,{side:x,fee:h,transactionFee:p,transactionFeeLevel:v,transactionCustomFee:_,value:E,price:j,currencyCode:o})})]}),!C&&H]}),(0,i.jsx)(re,{})]})},He=n(39695),Ue=n(12518),qe=n(28003),Ge=n(30221),Ke=n(21580),Qe=n(72600),Ye=function(){var e=(0,a.useRouter)(),t=(0,r.useState)({value:0,volume:0}),n=t[0],i=t[1];return(0,r.useEffect)((function(){var t=new URL(window.location.toString()),n=t.searchParams.get("volume"),r=t.searchParams.get("value");i({volume:(0,F.He)(n)||0,value:(0,F.He)(r)||0}),t.searchParams.delete("selected_input_type"),t.searchParams.delete("value"),t.searchParams.delete("volume"),e.replace(t,void 0,{shallow:!0})}),[]),n},Xe=function(){(null===window||void 0===window?void 0:window.location)&&(window.location.href="/offers/my")},Je=n(26207),$e=n(28021),et=n(98336),tt=function(e){var t=e.onClose,n=e.onSubmit,r=e.defaultValues,o=e.types,s=e.methods,a=(0,ue.Z)((0,$e.V2)(),1)[0],l=(0,ue.Z)((0,$e.BG)(),1)[0],c=(0,et.Z)(),d=c.paymentMethods,u=c.types,f=c.isPaymentMethodsReady,m=(0,Ue.Z)().paymentInstructions;return f?(0,i.jsx)(Je.Z,{types:o||u,methods:s||d,instructions:m,defaultValues:r,onSubmit:function(e){var t={payment_method_instruction:{name:e.name,details:e.details||"",payment_method_id:e.payment_method_id}};return(null===r||void 0===r?void 0:r.id)?l((0,v.Z)({id:null===r||void 0===r?void 0:r.id},t)).then((function(e){return(0,Qe.L)(e)})).then((function(e){var t,i;return n&&(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.payment_method_instruction)&&n(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.payment_method_instruction),e})):a(t).then((function(e){return(0,Qe.L)(e)})).then((function(e){var t,i;return n&&(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.payment_method_instruction)&&n(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.payment_method_instruction),e}))},onClose:t}):null},nt=function(e){var t,n,o=e.offer,s=(0,Ue.Z)().paymentInstructions,a=(0,l.Z)().t,c=(0,ue.Z)((0,He.$5)(),1)[0],u=Ye(),f=(0,ce.Z)().user,m=(0,Ke.p5)(o.id),h=(0,qe.zn)().addNotification,p=(0,r.useState)(!1),v=p[0],_=p[1],x=null===f||void 0===f?void 0:f.transactionFeeLevel,y=null===f||void 0===f?void 0:f.bitcoinAddress,j=null===f||void 0===f?void 0:f.transactionCustomFee,g="sell"===(null===o||void 0===o?void 0:o.side),Z={contract:{value:u.value,release_address:y||""}},w=(null===o||void 0===o||null===(t=o.paymentMethods)||void 0===t?void 0:t.map((function(e){return{value:e.id,type:e.type,name:e.name,text:(0,i.jsxs)(d.Z,{block:!0,gap:"2",items:"center",children:[e.name," ",(0,i.jsx)(T.Z,{type:e.type,name:e.type})]})}})))||[],b=(null===o||void 0===o||null===(n=o.paymentInstructions)||void 0===n?void 0:n.map((function(e){return{value:e.id,text:(0,i.jsxs)(d.Z,{block:!0,gap:"2",items:"center",children:[e.paymentMethod.name," ",(0,i.jsx)(T.Z,{type:e.paymentMethod.type,name:e.paymentMethod.type})]})}})))||[],N=(null===s||void 0===s?void 0:s.map((function(e){return{value:e.id,text:(0,i.jsxs)(d.Z,{block:!0,gap:"2",items:"center",children:[e.name," ",e.paymentMethod&&(0,i.jsx)(T.Z,{type:e.paymentMethod.type,name:e.paymentMethod.name})," "]}),paymentMethod:e.paymentMethod,details:e.details,name:e.name}})))||[],P=function(){var e=(0,de.Z)((function(e){var t,n,i,r,a,l,d,u,f;return(0,fe.__generator)(this,(function(m){return n=null===e||void 0===e?void 0:e.contract,i=n.payment_method_instruction_id,r=n.release_address,a=n.comment,l=n.value,d=(g?null===o||void 0===o?void 0:o.paymentInstructions:s).map((function(e){return{id:e.id,version:e.version}})),u=null===(t=null===d||void 0===d?void 0:d.find((function(e){return String(e.id)===String(i)})))||void 0===t?void 0:t.version,f=(0,F.He)(i),o&&u&&null!==f&&l?[2,c({contract:{offer_id:o.id,offer_version:o.version,payment_method_instruction_id:f,payment_method_instruction_version:u,comment:a,value:l,release_address:g?r:void 0}}).then((function(e){return(0,Qe.L)(e)})).then((function(e){var t,n,i,r,o;(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.contract)||void 0===n?void 0:n.id)&&(o=null===e||void 0===e||null===(i=e.data)||void 0===i||null===(r=i.contract)||void 0===r?void 0:r.id,(null===window||void 0===window?void 0:window.location)&&o&&(window.location.href="/contracts/".concat(o)))}))]:[2]}))}));return function(t){return e.apply(this,arguments)}}(),S=(0,F.He)(null===o||void 0===o?void 0:o.authorFeeRate)||0,C=(0,F.He)(null===o||void 0===o?void 0:o.yourFeeRate)||0,k=Math.min(S,C)/2,I=(0,F.He)(null===o||void 0===o?void 0:o.price)||0,O=(0,F.He)(null===o||void 0===o?void 0:o.amountMin)||0,B=(0,F.He)(null===o||void 0===o?void 0:o.amountMax)||0,M=(0,r.useMemo)((function(){return new Ge.oc({hashed_id:o.id})}),[o.id]);return(0,Ge.Ko)(M,{onMessage:function(e){if(null!=e.price&&e.price!=o.price&&m.refetch(),null!=e.offer_changes){var t=e.offer_changes;((null===t||void 0===t?void 0:t.deleted)||(null===t||void 0===t?void 0:t.inactive)||!t.published)&&(h({message:a("You cannot create a contract, because the offer is no longer active."),type:"warning"}),_(!0)),(null===t||void 0===t?void 0:t.payment_method)&&h({message:a("Payment methods have been changed by owner, please REFRESH page in order to create contract."),type:"warning",secondsLeft:120}),m.refetch()}}}),(0,i.jsx)(Ae,{isDisabled:v,defaultValues:Z,currencyCode:null===o||void 0===o?void 0:o.currencyCode,userPaymentInstructions:N,offerPaymentMethods:w,offerPaymentInstructions:b,side:null===o||void 0===o?void 0:o.side,price:I,amountMin:O,amountMax:B,feeRate:String(k),exchangeFeeRate:null===o||void 0===o?void 0:o.exchangeFeeRate,intermediaryFeeRate:null===o||void 0===o?void 0:o.intermediaryFeeRate,transactionFee:null===o||void 0===o?void 0:o.transactionFee,transactionFeeLevel:x,transactionCustomFee:j,InstructionCreateModal:tt,onSubmit:P})},it=n(27562),rt=n(34566),ot=n.n(rt),st=function(e){var t=e.title,n=e.isOwn,r=(0,a.useRouter)(),o=(0,l.Z)().t,s=o(n?"Back to my offers":"Back to all offers");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.ZP,{icon:(0,i.jsx)(it.Z,{color:"primary",size:"S",className:(0,L.Z)(ot().backButton)}),className:(0,L.Z)(ot().buttonText),onPress:function(){n?Xe():r.back()},children:s}),(0,i.jsx)(h.Z,{uppercase:!0,level:1,children:t})]})},at=n(4348),lt=n(26187),ct=n.n(lt),dt=function(e){var t=e.heading,n=e.title,r=e.badge,o="+"===e.sign?"calmGreen":"orangeBg";return(0,i.jsxs)("div",{className:ct().settingsContainer,children:[(0,i.jsx)(d.Z,{color:"grey",className:ct().settingsItem,children:t}),(0,i.jsxs)("div",{className:ct().settingTitle,children:[(0,i.jsx)(d.Z,{weight:"medium",color:"neutral100",children:n}),r&&(0,i.jsx)(Ne.Z,{status:o,variant:"solid",preset:"l-12m",className:ct().badge,children:r})]})]})},ut=function(e){var t=e.title,n=e.url,r=e.badge,o=e.type;return(0,i.jsxs)("div",{className:ct().offerItem,children:[(0,i.jsx)(f.Z,{variant:"underlineLink",href:n,weight:"medium",className:ct().link,children:t}),r?(0,i.jsx)(T.Z,{name:r,type:o}):null]})},ft=function(e){var t=e.onDelete,n=(0,l.Z)().t;return(0,i.jsxs)(E.hg,{type:"modal",preventPressOutside:!1,children:[(0,i.jsx)(D.ZP,{isWide:!0,variant:"danger",cursor:"pointer",weight:"medium",size:12,children:n("Delete offer")}),function(e){return(0,i.jsx)(E.Vq,{isDismissable:!1,children:(0,i.jsx)(m.Z,{variant:"grey",title:n("Are you sure you want to delete this offer?"),onClose:e,children:(0,i.jsxs)(R.Z,{flex:"row",gap:2,mt:4,children:[(0,i.jsx)(D.ZP,{isWide:!0,variant:"danger",cursor:"pointer",weight:"medium",size:12,onPress:function(){return null===t||void 0===t?void 0:t()},children:n("Delete offer")}),(0,i.jsx)(D.ZP,{isWide:!0,variant:"primaryOutline",cursor:"pointer",weight:"medium",size:12,onPress:function(){return e()},children:n("Cancel")})]})})})}]})},mt=function(e,t){var n=(0,r.useState)(e),i=n[0],o=n[1];return(0,r.useEffect)((function(){"boolean"===typeof e&&o(e)}),[e]),[i,function(e){o(e),t&&t(e)}]},ht=function(e){var t=e.currencyCode,n=e.offerBalance,r=e.firstTradeLimit,o=e.ongoingContracts,s=e.priceMargin,a=e.stopLossValue,u=e.editUrl,h=e.experiencedError,p=e.enabledError,_=e.isExperienced,x=e.isEnabled,j=e.sign,g=e.onDelete,Z=e.onDuplicate,w=e.onExperiencedChange,b=e.onEnableChange,N=(0,y.Av)(),P=(0,l.Z)().t,S=(0,ue.Z)(mt(_,w),2),C=S[0],k=S[1],F=(0,ue.Z)(mt(x,b),2),I=F[0],T=F[1];return(0,i.jsx)("div",{className:(0,L.Z)(ct().container),children:(0,i.jsxs)(c.Z.Group,{isWrap:N,gap:8,children:[(0,i.jsxs)("div",{className:ct().column,children:[(0,i.jsxs)("div",{className:ct().settingsWrapper,children:[(0,i.jsx)(d.Z,{weight:"medium",children:P("Other settings")}),(null===s||void 0===s?void 0:s.title)?(0,i.jsx)(dt,{heading:P("Price margin"),title:null===s||void 0===s?void 0:s.title,badge:null===s||void 0===s?void 0:s.badge,sign:j}):null,n?(0,i.jsx)(dt,{heading:P("Offer balance"),title:"".concat(n," ").concat(t)}):null,a?(0,i.jsx)(dt,{heading:P("Stop-loss value"),title:"".concat(a," ").concat(t)}):null,r?(0,i.jsx)(dt,{heading:P("First-trade limit"),title:"".concat(r," ").concat(t)}):null]}),(0,i.jsxs)("div",{className:ct().checkboxes,children:[(0,i.jsx)(at.Z,{className:ct().checkbox,isSelected:C,onChange:k,children:(0,i.jsxs)("div",{className:ct().checkboxContainer,children:[(0,i.jsx)(d.Z,{weight:"medium",children:P("Available to experienced users only")}),(0,i.jsx)(d.Z,{color:"grey",children:P("Your offer will only be available to users who have traded on Hodl Hodl before.")}),h?(0,i.jsx)(d.Z,{color:"error",preset:"c-12r",children:h}):null]})}),(0,i.jsx)(at.Z,{className:ct().checkbox,isSelected:I,onChange:T,children:(0,i.jsxs)("div",{className:ct().checkboxContainer,children:[(0,i.jsx)(d.Z,{weight:"medium",children:P(I?"offer_enabled":"offer_disabled")}),(0,i.jsx)(d.Z,{color:"grey",children:P(I?"offer_enabled_text":"offer_disabled_text")}),p?(0,i.jsx)(d.Z,{color:"error",preset:"c-12r",children:p}):null]})})]}),(0,i.jsx)(f.Z,{isWide:!0,variant:"primary",cursor:"pointer",weight:"medium",size:12,to:u,children:P("Edit offer")}),(0,i.jsxs)("div",{className:ct().btnContainer,children:[(0,i.jsx)(D.ZP,{isWide:!0,variant:"primaryOutline",cursor:"pointer",weight:"medium",size:12,onPress:function(){return null===Z||void 0===Z?void 0:Z()},children:P("Duplicate")}),(0,i.jsx)(ft,{onDelete:g})]})]}),(0,i.jsx)("div",{className:ct().column,children:(0,i.jsx)(m.Z,{variant:"grey",className:ct().panel,children:(0,i.jsxs)("div",{className:ct().contractsContainer,children:[(0,i.jsx)(d.Z,{weight:"medium",children:P("Ongoing contracts associated with the offer")}),null===o||void 0===o?void 0:o.map((function(e){return(0,i.jsx)(ut,(0,v.Z)({},e),e.url)})),0===(null===o||void 0===o?void 0:o.length)?(0,i.jsx)(d.Z,{color:"grey800",preset:"b1-16r",children:P("There are currently no active contracts for this offer.\nAs soon as someone accepts your offer, we will notify you by email and it will also automatically appear here.")}):null]})})})]})})},pt=function(e){var t,n,o=e.offer,s=(0,l.Z)().t,c=(0,a.useRouter)(),d=(0,I.U)(),u=null===o||void 0===o?void 0:o.id,f=(0,Ke.p5)(u,{skip:!u}),m=(0,He.IF)({"filters[offer_id]":o.id}),h=(0,ue.Z)((0,Ke.g5)(),1)[0],p=(0,ue.Z)((0,Ke.o$)(),1)[0],v=(0,ue.Z)((0,Ke.Ly)(),1)[0],_=(0,r.useState)(""),x=_[0],y=_[1],j=(0,r.useState)(""),g=j[0],Z=j[1],w=(0,et.Z)().paymentMethods,b=function(e){var t={amount:d.format((0,F.He)(e.value)||0),price:d.format((0,F.He)(e.price)||0),currency:e.currency_code};return"sell"===o.side?s("Buying {{ amount }} {{ currency }} at {{ price }} {{ currency }}",t):s("Selling {{ amount }} {{ currency }} at {{ price }} {{ currency }}",t)},N=null===m||void 0===m||null===(t=m.data)||void 0===t||null===(n=t.contracts)||void 0===n?void 0:n.filter((function(e){return"canceled"!==e.status&&"completed"!==e.status&&"resolved"!==e.status})).map((function(e){var t,n,i=w.filter((function(t){return e.payment_method_instruction.payment_method_id===t.id}));return{title:b(e),url:"/contracts/".concat(e.id),badge:null===(t=i[0])||void 0===t?void 0:t.name,type:null===(n=i[0])||void 0===n?void 0:n.type}})),P="/offers/".concat(o.id,"/edit"),S=o.exchangePriceSign,C=o.exchangePriceUnit,k=o.currencyCode,T=(0,F.He)(o.balance),O=T?d.format(T):void 0,B=(0,F.He)(o.firstTradeLimit),M=B?d.format(B):void 0,E=(0,F.He)(o.exchangePriceDeviation),z=E?d.format(E):void 0,D=(0,F.He)(o.stopLossValue),V=D?d.format(D):void 0,L=z?"".concat(S).concat(z).concat("currency"==C?k:C):"",W={title:o.exchangeRateProvider,badge:L},R=function(e){var t;if(e&&(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.data)){var n,i=null===(n=e.error)||void 0===n?void 0:n.data,r=null===i||void 0===i?void 0:i.validation_errors;if(r)return Object.keys(r).reduce((function(e,t){return r[t]&&Array.isArray(r[t])&&r[t].length&&e.push(r[t].join(", ")),e}),[]).join(", ")}return""},A=function(){var e=(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){switch(e.label){case 0:return[4,h(o.id)];case 1:return e.sent(),Xe(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,i.jsx)(ht,{currencyCode:k,offerBalance:O,firstTradeLimit:M,ongoingContracts:N,priceMargin:W,stopLossValue:V,isExperienced:o.forExperiencedUsers,isEnabled:o.enabled,editUrl:P,enabledError:x,experiencedError:g,sign:S,onDelete:A,onDuplicate:function(){v((0,Ke.c)(o)).then((function(e){return(0,Qe.L)(e)})).then((function(e){var t,n;if(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.offer)||void 0===n?void 0:n.id){var i,r,o=null===e||void 0===e||null===(i=e.data)||void 0===i||null===(r=i.offer)||void 0===r?void 0:r.id;c.push("/offers/".concat(o,"/edit"))}})).catch(R)},onExperiencedChange:function(e){Z(""),p({id:o.id,offer:{for_experienced_users:e}}).then((function(e){return(0,Qe.L)(e)})).then((function(){f.refetch()})).catch((function(e){Z(R(e))}))},onEnableChange:function(e){y(""),p({id:o.id,offer:{enabled:e}}).then((function(e){return(0,Qe.L)(e)})).then((function(){f.refetch()})).catch((function(e){y(R(e))}))}})},vt=function(){var e=(0,l.Z)().t;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.W,{children:(0,i.jsx)(c.Z.Heading,{children:(0,i.jsx)(st,{title:e("Offer Not Found")})})}),(0,i.jsx)(c.W,{containerSize:"sm",children:(0,i.jsx)(c.Z.Content,{isQuiet:!0,children:(0,i.jsxs)("div",{style:{textAlign:"center",maxWidth:"600px",padding:"21px",margin:"1rem auto"},children:[(0,i.jsx)(h.Z,{level:1,mb:4,children:e("404 - Offer Not Found")}),(0,i.jsx)(f.Z,{to:"/",variant:"primary",size:12,children:e("Go back home")})]})})})]})},_t=function(e){var t=e.offer,n=(0,ce.Z)(),o=n.username,s=n.isUserReady,a=n.isGuest,d=(0,l.Z)().t,u=o===(null===t||void 0===t?void 0:t.username),f=(0,r.useMemo)((function(){return u?"sell"===(null===t||void 0===t?void 0:t.side)?d("Offer to Sell Bitcoin"):d("Offer to Buy Bitcoin"):"sell"===(null===t||void 0===t?void 0:t.side)?d("Offer to Buy Bitcoin"):d("Offer to Sell Bitcoin")}),[u,t,d]),m=(0,i.jsx)(c.W,{children:(0,i.jsx)(c.Z.Heading,{children:(0,i.jsx)(st,{title:f,isOwn:u})})});if(t&&s){var h=(0,i.jsx)(nt,{offer:t});return a&&(h=(0,i.jsx)(ee,{title:d("Accept offer"),text:d("Sign up to accept this offer and start a trade.")})),u&&(h=(0,i.jsx)(pt,{offer:t})),(0,i.jsxs)(i.Fragment,{children:[m,(0,i.jsxs)(c.W,{containerSize:"sm",children:[(0,i.jsx)(c.Z.Content,{isQuiet:!0,children:(0,i.jsx)(Q,{offer:t})}),(0,i.jsx)(c.Z.Content,{isQuiet:!0,children:h})]})]})}return(0,i.jsxs)(i.Fragment,{children:[m,(0,i.jsxs)(c.W,{containerSize:"sm",children:[(0,i.jsx)(c.Z.Content,{isQuiet:!0,children:(0,i.jsx)(ae,{})}),(0,i.jsx)(c.Z.Content,{isQuiet:!0,children:(0,i.jsx)(le,{})})]})]})},xt=function(){var e,t,n=(0,a.useRouter)(),o=(0,l.Z)().t,c=(0,I.U)(),d=null===(e=n.query)||void 0===e?void 0:e.slug,u=(0,Ke.p5)(d,{skip:!d}),f=null===u||void 0===u?void 0:u.data,m=404===(null===(t=null===u||void 0===u?void 0:u.error)||void 0===t?void 0:t.status),h=(0,r.useMemo)((function(){if(m)return o("Offer not found");var e=(0,F.He)(null===f||void 0===f?void 0:f.amountMin)||0,t=(0,F.He)(null===f||void 0===f?void 0:f.amountMax)||0,n=(0,F.He)(null===f||void 0===f?void 0:f.price)||0,i=null===f||void 0===f?void 0:f.currencyCode,r="sell"===(null===f||void 0===f?void 0:f.side),s={min:c.format(e),max:c.format(t),price:c.format(n),currency:i};return o(r?"Buy between {{min}} and {{max}} {{currency}} worth of BTC at {{price}} {{currency}}":"Sell between {{min}} and {{max}} {{currency}} worth of BTC at {{price}} {{currency}}",s)}),[m,f]);return(0,r.useEffect)((function(){"my"===d&&window.location.reload()}),[d]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s(),{children:[(0,i.jsx)("title",{children:h}),(0,i.jsx)("meta",{name:"description",content:o("offer_accept_text")})]}),m?(0,i.jsx)(vt,{}):(0,i.jsx)(_t,{offer:f,isLoading:u.isLoading})]})}},34566:function(e){e.exports={backButton:"offer_backButton__wm5gv",buttonText:"offer_buttonText__QeSTe"}},46259:function(e){e.exports={formContainer:"acceptOfferForm_formContainer__k1F6l",main:"acceptOfferForm_main__VEvHw",column:"acceptOfferForm_column__uO4gn",inputContainer:"acceptOfferForm_inputContainer__GmY9j",panelItem:"acceptOfferForm_panelItem__arj8u",inputWrapper:"acceptOfferForm_inputWrapper__xZ95H",panelItemBody:"acceptOfferForm_panelItemBody__YVLKl",details:"acceptOfferForm_details__mvfJy",aside:"acceptOfferForm_aside___pqDq"}},70656:function(e){e.exports={container:"acceptOfferLoginForm_container__iBkTy",buttons:"acceptOfferLoginForm_buttons__yQ78C"}},1168:function(e){e.exports={desktopSkeleton:"acceptOfferSkeletons_desktopSkeleton__KiV69",offerPaneldesktopSkeleton:"acceptOfferSkeletons_offerPaneldesktopSkeleton__5Ny66",tabletSkeleton:"acceptOfferSkeletons_tabletSkeleton__rCrLT",offerPanelTabletSkeleton:"acceptOfferSkeletons_offerPanelTabletSkeleton__UhB9j",mobileSkeleton:"acceptOfferSkeletons_mobileSkeleton__6Iq_y",infoPanelPriceLimit:"acceptOfferSkeletons_infoPanelPriceLimit__9DvAQ",infoPanelAddInfo:"acceptOfferSkeletons_infoPanelAddInfo__oGvxa",offerPanelMobileSkeleton:"acceptOfferSkeletons_offerPanelMobileSkeleton__NYjtx",infoPanelInfo:"acceptOfferSkeletons_infoPanelInfo__QpRkj",infoPanelPaymentMethod:"acceptOfferSkeletons_infoPanelPaymentMethod__svftp",offersPanelAddInfo:"acceptOfferSkeletons_offersPanelAddInfo__rsHok"}},86431:function(e){e.exports={container:"offerInfoPanel_container__4Id_U",body:"offerInfoPanel_body__YMnxu",sellerRow:"offerInfoPanel_sellerRow__qPoT_",sellername:"offerInfoPanel_sellername__ppcow",sellerText:"offerInfoPanel_sellerText__GBQUI",sellerStats:"offerInfoPanel_sellerStats__moZQ_",priceRow:"offerInfoPanel_priceRow__S3ICK",limitRow:"offerInfoPanel_limitRow__N_Tkp",detailsRow:"offerInfoPanel_detailsRow__sNOsS",paymentsRow:"offerInfoPanel_paymentsRow__i8Fxi",priceValue:"offerInfoPanel_priceValue__OkyIV",priceDecimal:"offerInfoPanel_priceDecimal__GwmbA",priceCurrency:"offerInfoPanel_priceCurrency__1K2i3",priceTitle:"offerInfoPanel_priceTitle__VSQxU",limitTitle:"offerInfoPanel_limitTitle__ylUIa",location:"offerInfoPanel_location__EE8vh",confirmationsTitle:"offerInfoPanel_confirmationsTitle__qfmBa",paymentsTitle:"offerInfoPanel_paymentsTitle__WN7dZ",limit:"offerInfoPanel_limit__n6B2R",details:"offerInfoPanel_details__J6SUY",helpOutline:"offerInfoPanel_helpOutline__7_92t",payments:"offerInfoPanel_payments__17YNU",dashedDivider:"offerInfoPanel_dashedDivider__tsRJ_",info:"offerInfoPanel_info__Krx_c",textExpand:"offerInfoPanel_textExpand__jyGDS",textExpandFull:"offerInfoPanel_textExpandFull__UF7Nh",heading:"offerInfoPanel_heading__ZAA87",panel:"offerInfoPanel_panel___bK6r",descriptionContainerMobile:"offerInfoPanel_descriptionContainerMobile__VyveS",fullDescriptionMobile:"offerInfoPanel_fullDescriptionMobile__dsEDn",limitsRow:"offerInfoPanel_limitsRow__0nfwa",confirmations:"offerInfoPanel_confirmations__UfgKw"}},26187:function(e){e.exports={container:"ownOfferForm_container__X4dYK",column:"ownOfferForm_column__SkZTR",btnContainer:"ownOfferForm_btnContainer__D1u0c",badge:"ownOfferForm_badge__ICF3Y",checkboxes:"ownOfferForm_checkboxes__j_69f",checkbox:"ownOfferForm_checkbox__Zkwpp",checkboxContainer:"ownOfferForm_checkboxContainer__xS_h0",settingsContainer:"ownOfferForm_settingsContainer__dzNre",settingsItem:"ownOfferForm_settingsItem__2ly2L",offerItem:"ownOfferForm_offerItem__TAnlh",settingsWrapper:"ownOfferForm_settingsWrapper__yb5fX",panel:"ownOfferForm_panel__Vc6U8",contractsContainer:"ownOfferForm_contractsContainer__bgC8q",settingTitle:"ownOfferForm_settingTitle__Gfh_0",link:"ownOfferForm_link__kcQyC"}},86740:function(e){e.exports={avatar:"avatar_avatar__XtaH4","size--md":"avatar_size--md__Gu6yR","color--dai":"avatar_color--dai__kOghn","color--primary":"avatar_color--primary__vxKMM","color--usdp":"avatar_color--usdp__wOZl1","color--usdt":"avatar_color--usdt__vNkJg","color--busd":"avatar_color--busd__wARlZ","color--liquid":"avatar_color--liquid__VNKl_","color--usdc":"avatar_color--usdc__sC5pJ","color--wbtc":"avatar_color--wbtc___4nKq",avatarContainer:"avatar_avatarContainer__dSgKa",status:"avatar_status__t_DUU","status--online":"avatar_status--online__jG0fg","status--offline":"avatar_status--offline__3G7BU","status--recently_online":"avatar_status--recently_online__L9caY"}},43866:function(e){e.exports={token:"cryptoToken_token__YSRxL",group:"cryptoToken_group__2b0Dh","size--s":"cryptoToken_size--s__0WQ6_","size--xs":"cryptoToken_size--xs__oKq6Y","type--DAI":"cryptoToken_type--DAI__A4X61","type--L-BTC":"cryptoToken_type--L-BTC__P_AZ_","type--USDC":"cryptoToken_type--USDC__daTaI","type--USDP":"cryptoToken_type--USDP___1Wya","type--USDT":"cryptoToken_type--USDT__A2_Am","type--BTC":"cryptoToken_type--BTC__EVNnJ","type--WBTC":"cryptoToken_type--WBTC__oOOC4"}},11373:function(e){e.exports={content:"textExpand_content__PWNZd",visible:"textExpand_visible__9JLlw","size--xs":"textExpand_size--xs__0Kh5E","size--sm":"textExpand_size--sm__AGBq7","size--lg":"textExpand_size--lg__OVMzg","size--xl":"textExpand_size--xl__RN_Ge","size--base":"textExpand_size--base__7SOlq",collapse:"textExpand_collapse__A494_","weight--normal":"textExpand_weight--normal__uh0No","weight--medium":"textExpand_weight--medium__8pl1E","weight--semibold":"textExpand_weight--semibold__EkxPT","weight--bold":"textExpand_weight--bold__EB20O"}},15033:function(e){e.exports={content:"tooltipButton_content__hCzN8",wrappButton:"tooltipButton_wrappButton__sQXXk"}},23974:function(e){e.exports={popup:"tooltip_popup__EMVhb",text:"tooltip_text__1RA6X","size--3":"tooltip_size--3__6H_dW","size--2":"tooltip_size--2__J68Pv","size--4":"tooltip_size--4__Fhg1a",tooltip:"tooltip_tooltip__rAvh8",tooltipButton:"tooltip_tooltipButton__FA0L7",container:"tooltip_container___LNrD",longStatus:"tooltip_longStatus__N16xI"}}},function(e){e.O(0,[3544,2162,466,2959,1133,2890,9774,2888,179],(function(){return t=40944,e(e.s=t);var t}));var t=e.O();_N_E=t}]);